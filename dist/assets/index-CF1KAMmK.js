const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SquadManagement-Bu3BwxwK.js","assets/vendor-DU2oVBwu.js","assets/PlayerFace-CuU6bd_3.js","assets/Market-C3B8_cfW.js","assets/rarities-C0fjtg9p.js","assets/EventModePanel-CrlkCV8W.js","assets/PremiumShop-C2iEbVQv.js","assets/TrainingHub-C1TD75UY.js","assets/AchievementsPanel-DLdJGKlN.js","assets/ReplayViewer-BFL3oSQA.js","assets/SettingsModal-RsZAuAil.js","assets/AdminPanel-ovWBdbVj.js","assets/Settings-K-FZMhgg.js","assets/GameScene-BSLdzM67.js"])))=>i.map(i=>d[i]);
import{r as x,c as uh,j as d,_ as Ze,R as Nf,a as Lf}from"./vendor-DU2oVBwu.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();var vc="popstate";function Df(n={}){function e(i,s){let{pathname:r,search:a,hash:l}=i.location;return Oo("",{pathname:r,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:Fi(s)}return Vf(e,t,null,n)}function ce(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Je(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ff(){return Math.random().toString(36).substring(2,10)}function bc(n,e){return{usr:n.state,key:n.key,idx:e}}function Oo(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Yn(e):e,state:t,key:e&&e.key||i||Ff()}}function Fi({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Yn(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function Vf(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:r=!1}=i,a=s.history,l="POP",c=null,h=f();h==null&&(h=0,a.replaceState({...a.state,idx:h},""));function f(){return(a.state||{idx:null}).idx}function p(){l="POP";let I=f(),D=I==null?null:I-h;h=I,c&&c({action:l,location:A.location,delta:D})}function _(I,D){l="PUSH";let C=Oo(A.location,I,D);h=f()+1;let V=bc(C,h),U=A.createHref(C);try{a.pushState(V,"",U)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;s.location.assign(U)}r&&c&&c({action:l,location:A.location,delta:1})}function b(I,D){l="REPLACE";let C=Oo(A.location,I,D);h=f();let V=bc(C,h),U=A.createHref(C);a.replaceState(V,"",U),r&&c&&c({action:l,location:A.location,delta:0})}function R(I){return Of(I)}let A={get action(){return l},get location(){return n(s,a)},listen(I){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(vc,p),c=I,()=>{s.removeEventListener(vc,p),c=null}},createHref(I){return e(s,I)},createURL:R,encodeLocation(I){let D=R(I);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:_,replace:b,go(I){return a.go(I)}};return A}function Of(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ce(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Fi(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function hh(n,e,t="/"){return Mf(n,e,t,!1)}function Mf(n,e,t,i){let s=typeof e=="string"?Yn(e):e,r=_t(s.pathname||"/",t);if(r==null)return null;let a=dh(n);jf(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let h=Qf(r);l=zf(a[c],h,i)}return l}function dh(n,e=[],t=[],i="",s=!1){let r=(a,l,c=s,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(i)&&c)return;ce(f.relativePath.startsWith(i),`Absolute route path "${f.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(i.length)}let p=pt([i,f.relativePath]),_=t.concat(f);a.children&&a.children.length>0&&(ce(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),dh(a.children,e,_,p,c)),!(a.path==null&&!a.index)&&e.push({path:p,score:Wf(p,a.index),routesMeta:_})};return n.forEach((a,l)=>{if(a.path===""||!a.path?.includes("?"))r(a,l);else for(let c of gh(a.path))r(a,l,!0,c)}),e}function gh(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),r=t.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let a=gh(i.join("/")),l=[];return l.push(...a.map(c=>c===""?r:[r,c].join("/"))),s&&l.push(...a),l.map(c=>n.startsWith("/")&&c===""?"/":c)}function jf(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Gf(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var Uf=/^:[\w-]+$/,Bf=3,Hf=2,qf=1,$f=10,Yf=-2,Ec=n=>n==="*";function Wf(n,e){let t=n.split("/"),i=t.length;return t.some(Ec)&&(i+=Yf),e&&(i+=Hf),t.filter(s=>!Ec(s)).reduce((s,r)=>s+(Uf.test(r)?Bf:r===""?qf:$f),i)}function Gf(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function zf(n,e,t=!1){let{routesMeta:i}=n,s={},r="/",a=[];for(let l=0;l<i.length;++l){let c=i[l],h=l===i.length-1,f=r==="/"?e:e.slice(r.length)||"/",p=Xs({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},f),_=c.route;if(!p&&h&&t&&!i[i.length-1].route.index&&(p=Xs({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!p)return null;Object.assign(s,p.params),a.push({params:s,pathname:pt([r,p.pathname]),pathnameBase:ep(pt([r,p.pathnameBase])),route:_}),p.pathnameBase!=="/"&&(r=pt([r,p.pathnameBase]))}return a}function Xs(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=Kf(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let r=s[0],a=r.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:i.reduce((h,{paramName:f,isOptional:p},_)=>{if(f==="*"){let R=l[_]||"";a=r.slice(0,r.length-R.length).replace(/(.)\/+$/,"$1")}const b=l[_];return p&&!b?h[f]=void 0:h[f]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:r,pathnameBase:a,pattern:n}}function Kf(n,e=!1,t=!0){Je(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(i.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function Qf(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Je(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function _t(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}var Jf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Xf(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?Yn(n):n,r;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?r=wc(t.substring(1),"/"):r=wc(t,e)):r=e,{pathname:r,search:tp(i),hash:np(s)}}function wc(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function ko(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Zf(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function da(n){let e=Zf(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function ga(n,e,t,i=!1){let s;typeof n=="string"?s=Yn(n):(s={...n},ce(!s.pathname||!s.pathname.includes("?"),ko("?","pathname","search",s)),ce(!s.pathname||!s.pathname.includes("#"),ko("#","pathname","hash",s)),ce(!s.search||!s.search.includes("#"),ko("#","search","hash",s)));let r=n===""||s.pathname==="",a=r?"/":s.pathname,l;if(a==null)l=t;else{let p=e.length-1;if(!i&&a.startsWith("..")){let _=a.split("/");for(;_[0]==="..";)_.shift(),p-=1;s.pathname=_.join("/")}l=p>=0?e[p]:"/"}let c=Xf(s,l),h=a&&a!=="/"&&a.endsWith("/"),f=(r||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(h||f)&&(c.pathname+="/"),c}var pt=n=>n.join("/").replace(/\/\/+/g,"/"),ep=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),tp=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,np=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,ip=class{constructor(n,e,t,i=!1){this.status=n,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function sp(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function rp(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var fh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ph(n,e){let t=n;if(typeof t!="string"||!Jf.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,s=!1;if(fh)try{let r=new URL(window.location.href),a=t.startsWith("//")?new URL(r.protocol+t):new URL(t),l=_t(a.pathname,e);a.origin===r.origin&&l!=null?t=l+a.search+a.hash:s=!0}catch{Je(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:s,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var mh=["POST","PUT","PATCH","DELETE"];new Set(mh);var op=["GET",...mh];new Set(op);var Wn=x.createContext(null);Wn.displayName="DataRouter";var br=x.createContext(null);br.displayName="DataRouterState";var ap=x.createContext(!1),_h=x.createContext({isTransitioning:!1});_h.displayName="ViewTransition";var lp=x.createContext(new Map);lp.displayName="Fetchers";var cp=x.createContext(null);cp.displayName="Await";var We=x.createContext(null);We.displayName="Navigation";var Xi=x.createContext(null);Xi.displayName="Location";var ut=x.createContext({outlet:null,matches:[],isDataRoute:!1});ut.displayName="Route";var fa=x.createContext(null);fa.displayName="RouteError";var yh="REACT_ROUTER_ERROR",up="REDIRECT",hp="ROUTE_ERROR_RESPONSE";function dp(n){if(n.startsWith(`${yh}:${up}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function gp(n){if(n.startsWith(`${yh}:${hp}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new ip(e.status,e.statusText,e.data)}catch{}}function fp(n,{relative:e}={}){ce(Gn(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=x.useContext(We),{hash:s,pathname:r,search:a}=Zi(n,{relative:e}),l=r;return t!=="/"&&(l=r==="/"?t:pt([t,r])),i.createHref({pathname:l,search:a,hash:s})}function Gn(){return x.useContext(Xi)!=null}function Zt(){return ce(Gn(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(Xi).location}var kh="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function vh(n){x.useContext(We).static||x.useLayoutEffect(n)}function zn(){let{isDataRoute:n}=x.useContext(ut);return n?Sp():pp()}function pp(){ce(Gn(),"useNavigate() may be used only in the context of a <Router> component.");let n=x.useContext(Wn),{basename:e,navigator:t}=x.useContext(We),{matches:i}=x.useContext(ut),{pathname:s}=Zt(),r=JSON.stringify(da(i)),a=x.useRef(!1);return vh(()=>{a.current=!0}),x.useCallback((c,h={})=>{if(Je(a.current,kh),!a.current)return;if(typeof c=="number"){t.go(c);return}let f=ga(c,JSON.parse(r),s,h.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:pt([e,f.pathname])),(h.replace?t.replace:t.push)(f,h.state,h)},[e,t,r,s,n])}x.createContext(null);function Zi(n,{relative:e}={}){let{matches:t}=x.useContext(ut),{pathname:i}=Zt(),s=JSON.stringify(da(t));return x.useMemo(()=>ga(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function mp(n,e){return bh(n,e)}function bh(n,e,t,i,s){ce(Gn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=x.useContext(We),{matches:a}=x.useContext(ut),l=a[a.length-1],c=l?l.params:{},h=l?l.pathname:"/",f=l?l.pathnameBase:"/",p=l&&l.route;{let C=p&&p.path||"";wh(h,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let _=Zt(),b;if(e){let C=typeof e=="string"?Yn(e):e;ce(f==="/"||C.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),b=C}else b=_;let R=b.pathname||"/",A=R;if(f!=="/"){let C=f.replace(/^\//,"").split("/");A="/"+R.replace(/^\//,"").split("/").slice(C.length).join("/")}let I=hh(n,{pathname:A});Je(p||I!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Je(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=bp(I&&I.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:pt([f,r.encodeLocation?r.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:pt([f,r.encodeLocation?r.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),a,t,i,s);return e&&D?x.createElement(Xi.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},D):D}function _p(){let n=Rp(),e=sp(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},r={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",n),a=x.createElement(x.Fragment,null,x.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:r},"ErrorBoundary")," or"," ",x.createElement("code",{style:r},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),t?x.createElement("pre",{style:s},t):null,a)}var yp=x.createElement(_p,null),Eh=class extends x.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=gp(n.digest);t&&(n=t)}let e=n!==void 0?x.createElement(ut.Provider,{value:this.props.routeContext},x.createElement(fa.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?x.createElement(kp,{error:n},e):e}};Eh.contextType=ap;var vo=new WeakMap;function kp({children:n,error:e}){let{basename:t}=x.useContext(We);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=dp(e.digest);if(i){let s=vo.get(e);if(s)throw s;let r=ph(i.location,t);if(fh&&!vo.get(e))if(r.isExternal||i.reloadDocument)window.location.href=r.absoluteURL||r.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(r.to,{replace:i.replace}));throw vo.set(e,a),a}return x.createElement("meta",{httpEquiv:"refresh",content:`0;url=${r.absoluteURL||r.to}`})}}return n}function vp({routeContext:n,match:e,children:t}){let i=x.useContext(Wn);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),x.createElement(ut.Provider,{value:n},t)}function bp(n,e=[],t=null,i=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let r=n,a=t?.errors;if(a!=null){let f=r.findIndex(p=>p.route.id&&a?.[p.route.id]!==void 0);ce(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),r=r.slice(0,Math.min(r.length,f+1))}let l=!1,c=-1;if(t)for(let f=0;f<r.length;f++){let p=r[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=f),p.route.id){let{loaderData:_,errors:b}=t,R=p.route.loader&&!_.hasOwnProperty(p.route.id)&&(!b||b[p.route.id]===void 0);if(p.route.lazy||R){l=!0,c>=0?r=r.slice(0,c+1):r=[r[0]];break}}}let h=t&&i?(f,p)=>{i(f,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:rp(t.matches),errorInfo:p})}:void 0;return r.reduceRight((f,p,_)=>{let b,R=!1,A=null,I=null;t&&(b=a&&p.route.id?a[p.route.id]:void 0,A=p.route.errorElement||yp,l&&(c<0&&_===0?(wh("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,I=null):c===_&&(R=!0,I=p.route.hydrateFallbackElement||null)));let D=e.concat(r.slice(0,_+1)),C=()=>{let V;return b?V=A:R?V=I:p.route.Component?V=x.createElement(p.route.Component,null):p.route.element?V=p.route.element:V=f,x.createElement(vp,{match:p,routeContext:{outlet:f,matches:D,isDataRoute:t!=null},children:V})};return t&&(p.route.ErrorBoundary||p.route.errorElement||_===0)?x.createElement(Eh,{location:t.location,revalidation:t.revalidation,component:A,error:b,children:C(),routeContext:{outlet:null,matches:D,isDataRoute:!0},onError:h}):C()},null)}function pa(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ep(n){let e=x.useContext(Wn);return ce(e,pa(n)),e}function wp(n){let e=x.useContext(br);return ce(e,pa(n)),e}function Tp(n){let e=x.useContext(ut);return ce(e,pa(n)),e}function ma(n){let e=Tp(n),t=e.matches[e.matches.length-1];return ce(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function xp(){return ma("useRouteId")}function Rp(){let n=x.useContext(fa),e=wp("useRouteError"),t=ma("useRouteError");return n!==void 0?n:e.errors?.[t]}function Sp(){let{router:n}=Ep("useNavigate"),e=ma("useNavigate"),t=x.useRef(!1);return vh(()=>{t.current=!0}),x.useCallback(async(s,r={})=>{Je(t.current,kh),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...r}))},[n,e])}var Tc={};function wh(n,e,t){!e&&!Tc[n]&&(Tc[n]=!0,Je(!1,t))}x.memo(Ip);function Ip({routes:n,future:e,state:t,onError:i}){return bh(n,void 0,t,i,e)}function Ap({to:n,replace:e,state:t,relative:i}){ce(Gn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=x.useContext(We);Je(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:r}=x.useContext(ut),{pathname:a}=Zt(),l=zn(),c=ga(n,da(r),a,i==="path"),h=JSON.stringify(c);return x.useEffect(()=>{l(JSON.parse(h),{replace:e,state:t,relative:i})},[l,h,i,e,t]),null}function te(n){ce(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Pp({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:r=!1,unstable_useTransitions:a}){ce(!Gn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=x.useMemo(()=>({basename:l,navigator:s,static:r,unstable_useTransitions:a,future:{}}),[l,s,r,a]);typeof t=="string"&&(t=Yn(t));let{pathname:h="/",search:f="",hash:p="",state:_=null,key:b="default"}=t,R=x.useMemo(()=>{let A=_t(h,l);return A==null?null:{location:{pathname:A,search:f,hash:p,state:_,key:b},navigationType:i}},[l,h,f,p,_,b,i]);return Je(R!=null,`<Router basename="${l}"> is not able to match the URL "${h}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:x.createElement(We.Provider,{value:c},x.createElement(Xi.Provider,{children:e,value:R}))}function Cp({children:n,location:e}){return mp(Mo(n),e)}function Mo(n,e=[]){let t=[];return x.Children.forEach(n,(i,s)=>{if(!x.isValidElement(i))return;let r=[...e,s];if(i.type===x.Fragment){t.push.apply(t,Mo(i.props.children,r));return}ce(i.type===te,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ce(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Mo(i.props.children,r)),t.push(a)}),t}var Us="get",Bs="application/x-www-form-urlencoded";function Er(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function Np(n){return Er(n)&&n.tagName.toLowerCase()==="button"}function Lp(n){return Er(n)&&n.tagName.toLowerCase()==="form"}function Dp(n){return Er(n)&&n.tagName.toLowerCase()==="input"}function Fp(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Vp(n,e){return n.button===0&&(!e||e==="_self")&&!Fp(n)}var Cs=null;function Op(){if(Cs===null)try{new FormData(document.createElement("form"),0),Cs=!1}catch{Cs=!0}return Cs}var Mp=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function bo(n){return n!=null&&!Mp.has(n)?(Je(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bs}"`),null):n}function jp(n,e){let t,i,s,r,a;if(Lp(n)){let l=n.getAttribute("action");i=l?_t(l,e):null,t=n.getAttribute("method")||Us,s=bo(n.getAttribute("enctype"))||Bs,r=new FormData(n)}else if(Np(n)||Dp(n)&&(n.type==="submit"||n.type==="image")){let l=n.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||l.getAttribute("action");if(i=c?_t(c,e):null,t=n.getAttribute("formmethod")||l.getAttribute("method")||Us,s=bo(n.getAttribute("formenctype"))||bo(l.getAttribute("enctype"))||Bs,r=new FormData(l,n),!Op()){let{name:h,type:f,value:p}=n;if(f==="image"){let _=h?`${h}.`:"";r.append(`${_}x`,"0"),r.append(`${_}y`,"0")}else h&&r.append(h,p)}}else{if(Er(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Us,i=null,s=Bs,a=n}return r&&s==="text/plain"&&(a=r,r=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:r,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function _a(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Up(n,e,t,i){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${i}`:s.pathname=`${s.pathname}.${i}`:s.pathname==="/"?s.pathname=`_root.${i}`:e&&_t(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${i}`,s}async function Bp(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Hp(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function qp(n,e,t){let i=await Promise.all(n.map(async s=>{let r=e.routes[s.route.id];if(r){let a=await Bp(r,t);return a.links?a.links():[]}return[]}));return Gp(i.flat(1).filter(Hp).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function xc(n,e,t,i,s,r){let a=(c,h)=>t[h]?c.route.id!==t[h].route.id:!0,l=(c,h)=>t[h].pathname!==c.pathname||t[h].route.path?.endsWith("*")&&t[h].params["*"]!==c.params["*"];return r==="assets"?e.filter((c,h)=>a(c,h)||l(c,h)):r==="data"?e.filter((c,h)=>{let f=i.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(a(c,h)||l(c,h))return!0;if(c.route.shouldRevalidate){let p=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function $p(n,e,{includeHydrateFallback:t}={}){return Yp(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let r=[s.module];return s.clientActionModule&&(r=r.concat(s.clientActionModule)),s.clientLoaderModule&&(r=r.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(r=r.concat(s.hydrateFallbackModule)),s.imports&&(r=r.concat(s.imports)),r}).flat(1))}function Yp(n){return[...new Set(n)]}function Wp(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function Gp(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let r=JSON.stringify(Wp(s));return t.has(r)||(t.add(r),i.push({key:r,link:s})),i},[])}function Th(){let n=x.useContext(Wn);return _a(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function zp(){let n=x.useContext(br);return _a(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var ya=x.createContext(void 0);ya.displayName="FrameworkContext";function xh(){let n=x.useContext(ya);return _a(n,"You must render this element inside a <HydratedRouter> element"),n}function Kp(n,e){let t=x.useContext(ya),[i,s]=x.useState(!1),[r,a]=x.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:h,onMouseLeave:f,onTouchStart:p}=e,_=x.useRef(null);x.useEffect(()=>{if(n==="render"&&a(!0),n==="viewport"){let A=D=>{D.forEach(C=>{a(C.isIntersecting)})},I=new IntersectionObserver(A,{threshold:.5});return _.current&&I.observe(_.current),()=>{I.disconnect()}}},[n]),x.useEffect(()=>{if(i){let A=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(A)}}},[i]);let b=()=>{s(!0)},R=()=>{s(!1),a(!1)};return t?n!=="intent"?[r,_,{}]:[r,_,{onFocus:yi(l,b),onBlur:yi(c,R),onMouseEnter:yi(h,b),onMouseLeave:yi(f,R),onTouchStart:yi(p,b)}]:[!1,_,{}]}function yi(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Qp({page:n,...e}){let{router:t}=Th(),i=x.useMemo(()=>hh(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?x.createElement(Xp,{page:n,matches:i,...e}):null}function Jp(n){let{manifest:e,routeModules:t}=xh(),[i,s]=x.useState([]);return x.useEffect(()=>{let r=!1;return qp(n,e,t).then(a=>{r||s(a)}),()=>{r=!0}},[n,e,t]),i}function Xp({page:n,matches:e,...t}){let i=Zt(),{future:s,manifest:r,routeModules:a}=xh(),{basename:l}=Th(),{loaderData:c,matches:h}=zp(),f=x.useMemo(()=>xc(n,e,h,r,i,"data"),[n,e,h,r,i]),p=x.useMemo(()=>xc(n,e,h,r,i,"assets"),[n,e,h,r,i]),_=x.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let A=new Set,I=!1;if(e.forEach(C=>{let V=r.routes[C.route.id];!V||!V.hasLoader||(!f.some(U=>U.route.id===C.route.id)&&C.route.id in c&&a[C.route.id]?.shouldRevalidate||V.hasClientLoader?I=!0:A.add(C.route.id))}),A.size===0)return[];let D=Up(n,l,s.unstable_trailingSlashAwareDataRequests,"data");return I&&A.size>0&&D.searchParams.set("_routes",e.filter(C=>A.has(C.route.id)).map(C=>C.route.id).join(",")),[D.pathname+D.search]},[l,s.unstable_trailingSlashAwareDataRequests,c,i,r,f,e,n,a]),b=x.useMemo(()=>$p(p,r),[p,r]),R=Jp(p);return x.createElement(x.Fragment,null,_.map(A=>x.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),b.map(A=>x.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),R.map(({key:A,link:I})=>x.createElement("link",{key:A,nonce:t.nonce,...I,crossOrigin:I.crossOrigin??t.crossOrigin})))}function Zp(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var em=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{em&&(window.__reactRouterVersion="7.13.0")}catch{}function Rc({basename:n,children:e,unstable_useTransitions:t,window:i}){let s=x.useRef();s.current==null&&(s.current=Df({window:i,v5Compat:!0}));let r=s.current,[a,l]=x.useState({action:r.action,location:r.location}),c=x.useCallback(h=>{t===!1?l(h):x.startTransition(()=>l(h))},[t]);return x.useLayoutEffect(()=>r.listen(c),[r,c]),x.createElement(Pp,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:r,unstable_useTransitions:t})}var Rh=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sh=x.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:r,replace:a,state:l,target:c,to:h,preventScrollReset:f,viewTransition:p,unstable_defaultShouldRevalidate:_,...b},R){let{basename:A,unstable_useTransitions:I}=x.useContext(We),D=typeof h=="string"&&Rh.test(h),C=ph(h,A);h=C.to;let V=fp(h,{relative:s}),[U,q,B]=Kp(i,b),E=sm(h,{replace:a,state:l,target:c,preventScrollReset:f,relative:s,viewTransition:p,unstable_defaultShouldRevalidate:_,unstable_useTransitions:I});function k(T){e&&e(T),T.defaultPrevented||E(T)}let v=x.createElement("a",{...b,...B,href:C.absoluteURL||V,onClick:C.isExternal||r?e:k,ref:Zp(R,q),target:c,"data-discover":!D&&t==="render"?"true":void 0});return U&&!D?x.createElement(x.Fragment,null,v,x.createElement(Qp,{page:V})):v});Sh.displayName="Link";var tm=x.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:r,to:a,viewTransition:l,children:c,...h},f){let p=Zi(a,{relative:h.relative}),_=Zt(),b=x.useContext(br),{navigator:R,basename:A}=x.useContext(We),I=b!=null&&cm(p)&&l===!0,D=R.encodeLocation?R.encodeLocation(p).pathname:p.pathname,C=_.pathname,V=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(C=C.toLowerCase(),V=V?V.toLowerCase():null,D=D.toLowerCase()),V&&A&&(V=_t(V,A)||V);const U=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let q=C===D||!s&&C.startsWith(D)&&C.charAt(U)==="/",B=V!=null&&(V===D||!s&&V.startsWith(D)&&V.charAt(D.length)==="/"),E={isActive:q,isPending:B,isTransitioning:I},k=q?e:void 0,v;typeof i=="function"?v=i(E):v=[i,q?"active":null,B?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let T=typeof r=="function"?r(E):r;return x.createElement(Sh,{...h,"aria-current":k,className:v,ref:f,style:T,to:a,viewTransition:l},typeof c=="function"?c(E):c)});tm.displayName="NavLink";var nm=x.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:r,method:a=Us,action:l,onSubmit:c,relative:h,preventScrollReset:f,viewTransition:p,unstable_defaultShouldRevalidate:_,...b},R)=>{let{unstable_useTransitions:A}=x.useContext(We),I=am(),D=lm(l,{relative:h}),C=a.toLowerCase()==="get"?"get":"post",V=typeof l=="string"&&Rh.test(l),U=q=>{if(c&&c(q),q.defaultPrevented)return;q.preventDefault();let B=q.nativeEvent.submitter,E=B?.getAttribute("formmethod")||a,k=()=>I(B||q.currentTarget,{fetcherKey:e,method:E,navigate:t,replace:s,state:r,relative:h,preventScrollReset:f,viewTransition:p,unstable_defaultShouldRevalidate:_});A&&t!==!1?x.startTransition(()=>k()):k()};return x.createElement("form",{ref:R,method:C,action:D,onSubmit:i?c:U,...b,"data-discover":!V&&n==="render"?"true":void 0})});nm.displayName="Form";function im(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ih(n){let e=x.useContext(Wn);return ce(e,im(n)),e}function sm(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:r,viewTransition:a,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let h=zn(),f=Zt(),p=Zi(n,{relative:r});return x.useCallback(_=>{if(Vp(_,e)){_.preventDefault();let b=t!==void 0?t:Fi(f)===Fi(p),R=()=>h(n,{replace:b,state:i,preventScrollReset:s,relative:r,viewTransition:a,unstable_defaultShouldRevalidate:l});c?x.startTransition(()=>R()):R()}},[f,h,p,t,i,e,n,s,r,a,l,c])}var rm=0,om=()=>`__${String(++rm)}__`;function am(){let{router:n}=Ih("useSubmit"),{basename:e}=x.useContext(We),t=xp(),i=n.fetch,s=n.navigate;return x.useCallback(async(r,a={})=>{let{action:l,method:c,encType:h,formData:f,body:p}=jp(r,e);if(a.navigate===!1){let _=a.fetcherKey||om();await i(_,t,a.action||l,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:f,body:p,formMethod:a.method||c,formEncType:a.encType||h,flushSync:a.flushSync})}else await s(a.action||l,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:f,body:p,formMethod:a.method||c,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[i,s,e,t])}function lm(n,{relative:e}={}){let{basename:t}=x.useContext(We),i=x.useContext(ut);ce(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),r={...Zi(n||".",{relative:e})},a=Zt();if(n==null){r.search=a.search;let l=new URLSearchParams(r.search),c=l.getAll("index");if(c.some(f=>f==="")){l.delete("index"),c.filter(p=>p).forEach(p=>l.append("index",p));let f=l.toString();r.search=f?`?${f}`:""}}return(!n||n===".")&&s.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(r.pathname=r.pathname==="/"?t:pt([t,r.pathname])),Fi(r)}function cm(n,{relative:e}={}){let t=x.useContext(_h);ce(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Ih("useViewTransitionState"),s=Zi(n,{relative:e});if(!t.isTransitioning)return!1;let r=_t(t.currentLocation.pathname,i)||t.currentLocation.pathname,a=_t(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Xs(s.pathname,a)!=null||Xs(s.pathname,r)!=null}const On=JSON.parse('[{"id":"PLAYER_001","name":"Alen Krovas","position":"GK","rarity":"Standard","ovr":62,"stats":{"gk_diving":64,"gk_reflexes":63,"gk_handling":60,"gk_positioning":61,"gk_kicking":58,"physical":66,"stamina":55,"shooting":40,"passing":60,"dribbling":40,"ball_control":50,"defense":50,"speed":60},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_002","name":"Riko Valdan","position":"RB","rarity":"Standard","ovr":60,"stats":{"speed":64,"shooting":45,"passing":56,"ball_control":57,"dribbling":55,"defense":60,"physical":62,"stamina":65,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_003","name":"Maron Hexel","position":"CB","rarity":"Standard","ovr":61,"stats":{"speed":55,"shooting":42,"passing":54,"ball_control":52,"dribbling":50,"defense":64,"physical":68,"stamina":63,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_004","name":"Trevon Silas","position":"CB","rarity":"Standard","ovr":62,"stats":{"speed":56,"shooting":43,"passing":55,"ball_control":53,"dribbling":51,"defense":65,"physical":69,"stamina":64,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_005","name":"Lio Kendrix","position":"LB","rarity":"Standard","ovr":60,"stats":{"speed":63,"shooting":44,"passing":56,"ball_control":56,"dribbling":54,"defense":61,"physical":61,"stamina":66,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_006","name":"Nexo Barin","position":"DMF","rarity":"Standard","ovr":63,"stats":{"speed":58,"shooting":50,"passing":60,"ball_control":59,"dribbling":57,"defense":64,"physical":66,"stamina":68,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_007","name":"Arvid Molner","position":"CMF","rarity":"Standard","ovr":64,"stats":{"speed":61,"shooting":54,"passing":64,"ball_control":63,"dribbling":61,"defense":58,"physical":60,"stamina":69,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_008","name":"Cairo Venn","position":"AMF","rarity":"Standard","ovr":65,"stats":{"speed":63,"shooting":62,"passing":66,"ball_control":67,"dribbling":68,"defense":52,"physical":58,"stamina":67,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_009","name":"Zayn Morato","position":"RWF","rarity":"Standard","ovr":64,"stats":{"speed":70,"shooting":60,"passing":58,"ball_control":64,"dribbling":66,"defense":48,"physical":57,"stamina":68,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_010","name":"Eron Falco","position":"LWF","rarity":"Standard","ovr":64,"stats":{"speed":71,"shooting":61,"passing":59,"ball_control":65,"dribbling":67,"defense":47,"physical":56,"stamina":69,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_011","name":"Kiro Danex","position":"CF","rarity":"Standard","ovr":66,"stats":{"speed":68,"shooting":68,"passing":55,"ball_control":63,"dribbling":64,"defense":45,"physical":65,"stamina":67,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_012","name":"Vexo Larnic","position":"RMF","rarity":"Standard","ovr":63,"stats":{"speed":66,"shooting":56,"passing":62,"ball_control":61,"dribbling":63,"defense":50,"physical":58,"stamina":68,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_013","name":"Darin Solvek","position":"LMF","rarity":"Standard","ovr":62,"stats":{"speed":65,"shooting":55,"passing":60,"ball_control":60,"dribbling":62,"defense":51,"physical":57,"stamina":67,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_014","name":"Huron Calex","position":"CB","rarity":"Standard","ovr":60,"stats":{"speed":54,"shooting":40,"passing":52,"ball_control":50,"dribbling":48,"defense":63,"physical":67,"stamina":62,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_015","name":"Kavin Rosto","position":"RB","rarity":"Standard","ovr":61,"stats":{"speed":64,"shooting":46,"passing":57,"ball_control":56,"dribbling":55,"defense":62,"physical":63,"stamina":66,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_016","name":"Elmar Dovik","position":"LB","rarity":"Standard","ovr":61,"stats":{"speed":63,"shooting":45,"passing":58,"ball_control":57,"dribbling":56,"defense":61,"physical":62,"stamina":67,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_017","name":"Ryo Fenrik","position":"DMF","rarity":"Standard","ovr":62,"stats":{"speed":57,"shooting":49,"passing":59,"ball_control":58,"dribbling":56,"defense":63,"physical":65,"stamina":68,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_018","name":"Silan Varek","position":"CMF","rarity":"Standard","ovr":63,"stats":{"speed":60,"shooting":53,"passing":63,"ball_control":62,"dribbling":60,"defense":57,"physical":59,"stamina":69,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_019","name":"Timo Alrex","position":"AMF","rarity":"Standard","ovr":64,"stats":{"speed":62,"shooting":61,"passing":65,"ball_control":66,"dribbling":67,"defense":51,"physical":57,"stamina":66,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_020","name":"Joren Paxis","position":"RWF","rarity":"Standard","ovr":63,"stats":{"speed":69,"shooting":59,"passing":57,"ball_control":63,"dribbling":65,"defense":47,"physical":56,"stamina":68,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_021","name":"Leno Kryx","position":"LWF","rarity":"Standard","ovr":63,"stats":{"speed":70,"shooting":60,"passing":58,"ball_control":64,"dribbling":66,"defense":46,"physical":55,"stamina":69,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_022","name":"Breno Valt","position":"CF","rarity":"Standard","ovr":65,"stats":{"speed":67,"shooting":66,"passing":54,"ball_control":62,"dribbling":63,"defense":44,"physical":66,"stamina":67,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_023","name":"Orin Malvek","position":"GK","rarity":"Standard","ovr":61,"stats":{"gk_diving":63,"gk_reflexes":62,"gk_handling":59,"gk_positioning":60,"gk_kicking":57,"physical":65,"stamina":53,"shooting":40,"passing":60,"dribbling":40,"ball_control":50,"defense":50,"speed":60},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_024","name":"Cavin Durex","position":"CB","rarity":"Standard","ovr":62,"stats":{"speed":56,"shooting":41,"passing":53,"ball_control":51,"dribbling":49,"defense":65,"physical":68,"stamina":64,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_025","name":"Yaro Belix","position":"RB","rarity":"Standard","ovr":60,"stats":{"speed":62,"shooting":44,"passing":56,"ball_control":55,"dribbling":54,"defense":60,"physical":61,"stamina":66,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_026","name":"Evan Lorix","position":"LB","rarity":"Standard","ovr":61,"stats":{"speed":63,"shooting":45,"passing":57,"ball_control":56,"dribbling":55,"defense":61,"physical":62,"stamina":67,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_027","name":"Talen Dorvik","position":"DMF","rarity":"Standard","ovr":62,"stats":{"speed":58,"shooting":50,"passing":60,"ball_control":59,"dribbling":57,"defense":64,"physical":65,"stamina":68,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_028","name":"Rylan Vorix","position":"CMF","rarity":"Standard","ovr":63,"stats":{"speed":60,"shooting":52,"passing":62,"ball_control":61,"dribbling":60,"defense":58,"physical":60,"stamina":69,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_029","name":"Jaxen Molt","position":"AMF","rarity":"Standard","ovr":64,"stats":{"speed":63,"shooting":61,"passing":65,"ball_control":66,"dribbling":67,"defense":52,"physical":58,"stamina":67,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_030","name":"Kairo Bentos","position":"RWF","rarity":"Standard","ovr":64,"stats":{"speed":70,"shooting":60,"passing":58,"ball_control":64,"dribbling":66,"defense":48,"physical":57,"stamina":68,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_031","name":"Lucan Ferrox","position":"LWF","rarity":"Standard","ovr":63,"stats":{"speed":71,"shooting":61,"passing":59,"ball_control":65,"dribbling":67,"defense":47,"physical":56,"stamina":69,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_032","name":"Bran Kolmer","position":"CF","rarity":"Standard","ovr":65,"stats":{"speed":68,"shooting":68,"passing":55,"ball_control":63,"dribbling":64,"defense":45,"physical":65,"stamina":67,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_033","name":"Stefan Ryze","position":"GK","rarity":"Standard","ovr":61,"stats":{"gk_diving":63,"gk_reflexes":62,"gk_handling":59,"gk_positioning":60,"gk_kicking":57,"physical":65,"stamina":53,"shooting":40,"passing":60,"dribbling":40,"ball_control":50,"defense":50,"speed":60},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_034","name":"Oren Talvik","position":"CB","rarity":"Standard","ovr":62,"stats":{"speed":56,"shooting":41,"passing":53,"ball_control":51,"dribbling":49,"defense":65,"physical":68,"stamina":64,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_035","name":"Yanik Dorren","position":"RB","rarity":"Standard","ovr":60,"stats":{"speed":62,"shooting":44,"passing":56,"ball_control":55,"dribbling":54,"defense":60,"physical":61,"stamina":66,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_036","name":"Milo Kraven","position":"LB","rarity":"Standard","ovr":61,"stats":{"speed":63,"shooting":45,"passing":57,"ball_control":56,"dribbling":55,"defense":61,"physical":62,"stamina":67,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_037","name":"Arven Daxor","position":"DMF","rarity":"Standard","ovr":62,"stats":{"speed":58,"shooting":50,"passing":60,"ball_control":59,"dribbling":57,"defense":64,"physical":65,"stamina":68,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_038","name":"Felix Ronar","position":"CMF","rarity":"Standard","ovr":63,"stats":{"speed":60,"shooting":53,"passing":63,"ball_control":62,"dribbling":60,"defense":58,"physical":60,"stamina":69,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_039","name":"Noel Kintar","position":"AMF","rarity":"Standard","ovr":64,"stats":{"speed":63,"shooting":61,"passing":65,"ball_control":66,"dribbling":67,"defense":52,"physical":58,"stamina":67,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_040","name":"Sandro Lext","position":"RWF","rarity":"Standard","ovr":64,"stats":{"speed":70,"shooting":60,"passing":58,"ball_control":64,"dribbling":66,"defense":48,"physical":57,"stamina":68,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_041","name":"Ivaro Nems","position":"LWF","rarity":"Standard","ovr":63,"stats":{"speed":71,"shooting":61,"passing":59,"ball_control":65,"dribbling":67,"defense":47,"physical":56,"stamina":69,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_042","name":"Tomas Velro","position":"CF","rarity":"Standard","ovr":65,"stats":{"speed":68,"shooting":68,"passing":55,"ball_control":63,"dribbling":64,"defense":45,"physical":65,"stamina":67,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_043","name":"Ruben Axto","position":"GK","rarity":"Standard","ovr":61,"stats":{"gk_diving":63,"gk_reflexes":62,"gk_handling":59,"gk_positioning":60,"gk_kicking":57,"physical":65,"stamina":53,"shooting":40,"passing":60,"dribbling":40,"ball_control":50,"defense":50,"speed":60},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_044","name":"Jaxen Molto","position":"CB","rarity":"Standard","ovr":62,"stats":{"speed":56,"shooting":41,"passing":53,"ball_control":51,"dribbling":49,"defense":65,"physical":68,"stamina":64,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_045","name":"Piero Zanex","position":"RB","rarity":"Standard","ovr":60,"stats":{"speed":62,"shooting":44,"passing":56,"ball_control":55,"dribbling":54,"defense":60,"physical":61,"stamina":66,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_046","name":"Zorin Valeo","position":"LB","rarity":"Standard","ovr":61,"stats":{"speed":63,"shooting":45,"passing":57,"ball_control":56,"dribbling":55,"defense":61,"physical":62,"stamina":67,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_047","name":"Luan Corvic","position":"DMF","rarity":"Standard","ovr":62,"stats":{"speed":58,"shooting":50,"passing":60,"ball_control":59,"dribbling":57,"defense":64,"physical":65,"stamina":68,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_048","name":"Karel Mirox","position":"CMF","rarity":"Standard","ovr":63,"stats":{"speed":60,"shooting":53,"passing":63,"ball_control":62,"dribbling":60,"defense":58,"physical":60,"stamina":69,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_049","name":"Jonis Pelto","position":"AMF","rarity":"Standard","ovr":64,"stats":{"speed":63,"shooting":61,"passing":65,"ball_control":66,"dribbling":67,"defense":52,"physical":58,"stamina":67,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_050","name":"Ravel Dron","position":"CF","rarity":"Standard","ovr":65,"stats":{"speed":68,"shooting":68,"passing":55,"ball_control":63,"dribbling":64,"defense":45,"physical":65,"stamina":67,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_051","name":"Varko Lenth","position":"GK","rarity":"Rare","ovr":68,"stats":{"gk_diving":70,"gk_reflexes":69,"gk_handling":67,"gk_positioning":68,"gk_kicking":65,"physical":70,"stamina":60,"shooting":40,"passing":60,"dribbling":40,"ball_control":50,"defense":50,"speed":60},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_052","name":"Dario Vexel","position":"RB","rarity":"Rare","ovr":66,"stats":{"speed":70,"shooting":50,"passing":62,"ball_control":61,"dribbling":63,"defense":65,"physical":64,"stamina":70,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_053","name":"Marven Holix","position":"CB","rarity":"Rare","ovr":67,"stats":{"speed":60,"shooting":48,"passing":58,"ball_control":55,"dribbling":53,"defense":70,"physical":72,"stamina":68,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_054","name":"Tavon Zirel","position":"CB","rarity":"Rare","ovr":67,"stats":{"speed":61,"shooting":49,"passing":59,"ball_control":56,"dribbling":54,"defense":71,"physical":73,"stamina":69,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_055","name":"Liran Dexel","position":"LB","rarity":"Rare","ovr":66,"stats":{"speed":68,"shooting":48,"passing":60,"ball_control":59,"dribbling":61,"defense":65,"physical":63,"stamina":70,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_056","name":"Nylan Corvo","position":"DMF","rarity":"Rare","ovr":68,"stats":{"speed":62,"shooting":55,"passing":66,"ball_control":63,"dribbling":60,"defense":68,"physical":70,"stamina":72,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_057","name":"Arvin Zoltek","position":"CMF","rarity":"Rare","ovr":69,"stats":{"speed":64,"shooting":58,"passing":68,"ball_control":65,"dribbling":63,"defense":60,"physical":62,"stamina":73,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_058","name":"Cairo Valtrex","position":"AMF","rarity":"Rare","ovr":70,"stats":{"speed":66,"shooting":65,"passing":70,"ball_control":70,"dribbling":72,"defense":55,"physical":60,"stamina":71,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_059","name":"Zeno Marvik","position":"RWF","rarity":"Rare","ovr":69,"stats":{"speed":75,"shooting":65,"passing":62,"ball_control":68,"dribbling":70,"defense":50,"physical":60,"stamina":72,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_060","name":"Elios Ravin","position":"LWF","rarity":"Rare","ovr":69,"stats":{"speed":76,"shooting":66,"passing":63,"ball_control":69,"dribbling":71,"defense":49,"physical":59,"stamina":73,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_061","name":"Kiro Vonnel","position":"CF","rarity":"Rare","ovr":71,"stats":{"speed":72,"shooting":72,"passing":60,"ball_control":68,"dribbling":69,"defense":47,"physical":70,"stamina":71,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_062","name":"Raven Kolter","position":"GK","rarity":"Rare","ovr":68,"stats":{"gk_diving":70,"gk_reflexes":69,"gk_handling":67,"gk_positioning":68,"gk_kicking":65,"physical":70,"stamina":60,"shooting":40,"passing":60,"dribbling":40,"ball_control":50,"defense":50,"speed":60},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_063","name":"Talon Brevik","position":"CB","rarity":"Rare","ovr":67,"stats":{"speed":61,"shooting":48,"passing":59,"ball_control":56,"dribbling":54,"defense":71,"physical":73,"stamina":69,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_064","name":"Daxel Varon","position":"RB","rarity":"Rare","ovr":66,"stats":{"speed":70,"shooting":50,"passing":62,"ball_control":61,"dribbling":63,"defense":65,"physical":64,"stamina":70,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_065","name":"Zyren Kaltor","position":"LB","rarity":"Rare","ovr":66,"stats":{"speed":68,"shooting":48,"passing":60,"ball_control":59,"dribbling":61,"defense":65,"physical":63,"stamina":70,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_066","name":"Mavrix Dolven","position":"DMF","rarity":"Rare","ovr":68,"stats":{"speed":62,"shooting":55,"passing":66,"ball_control":63,"dribbling":60,"defense":68,"physical":70,"stamina":72,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_067","name":"Lior Tenrek","position":"CMF","rarity":"Rare","ovr":69,"stats":{"speed":64,"shooting":58,"passing":68,"ball_control":65,"dribbling":63,"defense":60,"physical":62,"stamina":73,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_068","name":"Kyran Velox","position":"AMF","rarity":"Rare","ovr":70,"stats":{"speed":66,"shooting":65,"passing":70,"ball_control":70,"dribbling":72,"defense":55,"physical":60,"stamina":71,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_069","name":"Jaren Falco","position":"RWF","rarity":"Rare","ovr":69,"stats":{"speed":75,"shooting":65,"passing":62,"ball_control":68,"dribbling":70,"defense":50,"physical":60,"stamina":72,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_070","name":"Eryx Malden","position":"LWF","rarity":"Rare","ovr":69,"stats":{"speed":76,"shooting":66,"passing":63,"ball_control":69,"dribbling":71,"defense":49,"physical":59,"stamina":73,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_071","name":"Torin Baxel","position":"CF","rarity":"Rare","ovr":71,"stats":{"speed":72,"shooting":72,"passing":60,"ball_control":68,"dribbling":69,"defense":47,"physical":70,"stamina":71,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_072","name":"Nero Valtis","position":"GK","rarity":"Rare","ovr":68,"stats":{"gk_diving":70,"gk_reflexes":69,"gk_handling":67,"gk_positioning":68,"gk_kicking":65,"physical":70,"stamina":60,"shooting":40,"passing":60,"dribbling":40,"ball_control":50,"defense":50,"speed":60},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_073","name":"Rylon Tarez","position":"CB","rarity":"Rare","ovr":67,"stats":{"speed":61,"shooting":48,"passing":59,"ball_control":56,"dribbling":54,"defense":71,"physical":73,"stamina":69,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_074","name":"Caden Lorik","position":"RB","rarity":"Rare","ovr":66,"stats":{"speed":70,"shooting":50,"passing":62,"ball_control":61,"dribbling":63,"defense":65,"physical":64,"stamina":70,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_075","name":"Alrik Venson","position":"LB","rarity":"Rare","ovr":66,"stats":{"speed":68,"shooting":48,"passing":60,"ball_control":59,"dribbling":61,"defense":65,"physical":63,"stamina":70,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_076","name":"Davor Tenrek","position":"DMF","rarity":"Rare","ovr":68,"stats":{"speed":62,"shooting":55,"passing":66,"ball_control":63,"dribbling":60,"defense":68,"physical":70,"stamina":72,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_077","name":"Lyor Vance","position":"CMF","rarity":"Rare","ovr":69,"stats":{"speed":64,"shooting":58,"passing":68,"ball_control":65,"dribbling":63,"defense":60,"physical":62,"stamina":73,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_078","name":"Rivan Dorel","position":"AMF","rarity":"Rare","ovr":70,"stats":{"speed":66,"shooting":65,"passing":70,"ball_control":70,"dribbling":72,"defense":55,"physical":60,"stamina":71,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_079","name":"Zyren Malto","position":"RWF","rarity":"Rare","ovr":69,"stats":{"speed":75,"shooting":65,"passing":62,"ball_control":68,"dribbling":70,"defense":50,"physical":60,"stamina":72,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_080","name":"Eron Valdex","position":"LWF","rarity":"Rare","ovr":69,"stats":{"speed":76,"shooting":66,"passing":63,"ball_control":69,"dribbling":71,"defense":49,"physical":59,"stamina":73,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_081","name":"Torval Nix","position":"CF","rarity":"Rare","ovr":71,"stats":{"speed":72,"shooting":72,"passing":60,"ball_control":68,"dribbling":69,"defense":47,"physical":70,"stamina":71,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_082","name":"Dax Venrol","position":"GK","rarity":"Rare","ovr":68,"stats":{"gk_diving":70,"gk_reflexes":69,"gk_handling":67,"gk_positioning":68,"gk_kicking":65,"physical":70,"stamina":60,"shooting":40,"passing":60,"dribbling":40,"ball_control":50,"defense":50,"speed":60},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_083","name":"Korin Veylo","position":"CB","rarity":"Rare","ovr":67,"stats":{"speed":61,"shooting":48,"passing":59,"ball_control":56,"dribbling":54,"defense":71,"physical":73,"stamina":69,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_084","name":"Loran Baxel","position":"RB","rarity":"Rare","ovr":66,"stats":{"speed":70,"shooting":50,"passing":62,"ball_control":61,"dribbling":63,"defense":65,"physical":64,"stamina":70,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_085","name":"Niran Dexel","position":"LB","rarity":"Rare","ovr":66,"stats":{"speed":68,"shooting":48,"passing":60,"ball_control":59,"dribbling":61,"defense":65,"physical":63,"stamina":70,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_086","name":"Talen Vorik","position":"DMF","rarity":"Rare","ovr":68,"stats":{"speed":62,"shooting":55,"passing":66,"ball_control":63,"dribbling":60,"defense":68,"physical":70,"stamina":72,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_087","name":"Javen Lorix","position":"CMF","rarity":"Rare","ovr":69,"stats":{"speed":64,"shooting":58,"passing":68,"ball_control":65,"dribbling":63,"defense":60,"physical":62,"stamina":73,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_088","name":"Rylan Dorvek","position":"AMF","rarity":"Rare","ovr":70,"stats":{"speed":66,"shooting":65,"passing":70,"ball_control":70,"dribbling":72,"defense":55,"physical":60,"stamina":71,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_089","name":"Kiran Valtor","position":"RWF","rarity":"Rare","ovr":69,"stats":{"speed":75,"shooting":65,"passing":62,"ball_control":68,"dribbling":70,"defense":50,"physical":60,"stamina":72,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_090","name":"Soren Malvik","position":"LWF","rarity":"Rare","ovr":69,"stats":{"speed":76,"shooting":66,"passing":63,"ball_control":69,"dribbling":71,"defense":49,"physical":59,"stamina":73,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_091","name":"Daven Korvik","position":"CF","rarity":"Rare","ovr":71,"stats":{"speed":72,"shooting":72,"passing":60,"ball_control":68,"dribbling":69,"defense":47,"physical":70,"stamina":71,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_092","name":"Eryx Falden","position":"GK","rarity":"Rare","ovr":68,"stats":{"gk_diving":70,"gk_reflexes":69,"gk_handling":67,"gk_positioning":68,"gk_kicking":65,"physical":70,"stamina":60,"shooting":40,"passing":60,"dribbling":40,"ball_control":50,"defense":50,"speed":60},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_093","name":"Talen Ruvik","position":"CB","rarity":"Rare","ovr":67,"stats":{"speed":61,"shooting":48,"passing":59,"ball_control":56,"dribbling":54,"defense":71,"physical":73,"stamina":69,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_094","name":"Liron Vaxel","position":"RB","rarity":"Rare","ovr":66,"stats":{"speed":70,"shooting":50,"passing":62,"ball_control":61,"dribbling":63,"defense":65,"physical":64,"stamina":70,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_095","name":"Kiro Malven","position":"LB","rarity":"Rare","ovr":66,"stats":{"speed":68,"shooting":48,"passing":60,"ball_control":59,"dribbling":61,"defense":65,"physical":63,"stamina":70,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_096","name":"Veyron Kaltas","position":"GK","rarity":"Epic","ovr":73,"stats":{"gk_diving":75,"gk_reflexes":74,"gk_handling":72,"gk_positioning":73,"gk_kicking":70,"physical":75,"stamina":65,"shooting":40,"passing":60,"dribbling":40,"ball_control":50,"defense":50,"speed":60},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_097","name":"Daxen Vorik","position":"RB","rarity":"Epic","ovr":71,"stats":{"speed":76,"shooting":58,"passing":66,"ball_control":65,"dribbling":67,"defense":71,"physical":69,"stamina":74,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_098","name":"Toren Valdex","position":"CB","rarity":"Epic","ovr":72,"stats":{"speed":63,"shooting":52,"passing":62,"ball_control":59,"dribbling":57,"defense":76,"physical":78,"stamina":73,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_099","name":"Liron Dexel","position":"CB","rarity":"Epic","ovr":72,"stats":{"speed":64,"shooting":53,"passing":63,"ball_control":60,"dribbling":58,"defense":77,"physical":79,"stamina":74,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_100","name":"Ravik Molten","position":"LB","rarity":"Epic","ovr":71,"stats":{"speed":74,"shooting":55,"passing":65,"ball_control":64,"dribbling":66,"defense":71,"physical":68,"stamina":74,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_101","name":"Cayron Dexis","position":"DMF","rarity":"Epic","ovr":73,"stats":{"speed":66,"shooting":60,"passing":70,"ball_control":68,"dribbling":65,"defense":74,"physical":75,"stamina":76,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_102","name":"Kiron Valtor","position":"CMF","rarity":"Epic","ovr":74,"stats":{"speed":68,"shooting":63,"passing":72,"ball_control":70,"dribbling":68,"defense":63,"physical":65,"stamina":77,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_103","name":"Tavon Krex","position":"AMF","rarity":"Epic","ovr":75,"stats":{"speed":70,"shooting":70,"passing":75,"ball_control":74,"dribbling":76,"defense":58,"physical":64,"stamina":75,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_104","name":"Zyren Valtrex","position":"RWF","rarity":"Epic","ovr":74,"stats":{"speed":80,"shooting":70,"passing":66,"ball_control":72,"dribbling":74,"defense":53,"physical":63,"stamina":76,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_105","name":"Eryx Falden","position":"LWF","rarity":"Epic","ovr":74,"stats":{"speed":81,"shooting":71,"passing":67,"ball_control":73,"dribbling":75,"defense":52,"physical":62,"stamina":77,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_106","name":"Torik Malven","position":"CF","rarity":"Epic","ovr":76,"stats":{"speed":78,"shooting":78,"passing":64,"ball_control":72,"dribbling":73,"defense":50,"physical":75,"stamina":74,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_107","name":"Ravik Norel","position":"GK","rarity":"Epic","ovr":73,"stats":{"gk_diving":75,"gk_reflexes":74,"gk_handling":72,"gk_positioning":73,"gk_kicking":70,"physical":75,"stamina":65,"shooting":40,"passing":60,"dribbling":40,"ball_control":50,"defense":50,"speed":60},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_108","name":"Darian Velox","position":"CB","rarity":"Epic","ovr":72,"stats":{"speed":64,"shooting":53,"passing":63,"ball_control":60,"dribbling":58,"defense":77,"physical":79,"stamina":74,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_109","name":"Milo Tarez","position":"RB","rarity":"Epic","ovr":71,"stats":{"speed":76,"shooting":58,"passing":66,"ball_control":65,"dribbling":67,"defense":71,"physical":69,"stamina":74,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_110","name":"Loren Baxel","position":"LB","rarity":"Epic","ovr":71,"stats":{"speed":74,"shooting":55,"passing":65,"ball_control":64,"dribbling":66,"defense":71,"physical":68,"stamina":74,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_111","name":"Rylon Vorik","position":"DMF","rarity":"Epic","ovr":73,"stats":{"speed":66,"shooting":60,"passing":70,"ball_control":68,"dribbling":65,"defense":74,"physical":75,"stamina":76,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_112","name":"Caylen Molt","position":"CMF","rarity":"Epic","ovr":74,"stats":{"speed":68,"shooting":63,"passing":72,"ball_control":70,"dribbling":68,"defense":63,"physical":65,"stamina":77,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_113","name":"Zylen Vorn","position":"AMF","rarity":"Epic","ovr":75,"stats":{"speed":70,"shooting":70,"passing":75,"ball_control":74,"dribbling":76,"defense":58,"physical":64,"stamina":75,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_114","name":"Talon Krex","position":"RWF","rarity":"Epic","ovr":74,"stats":{"speed":80,"shooting":70,"passing":66,"ball_control":72,"dribbling":74,"defense":53,"physical":63,"stamina":76,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_115","name":"Eron Malvek","position":"LWF","rarity":"Epic","ovr":74,"stats":{"speed":81,"shooting":71,"passing":67,"ball_control":73,"dribbling":75,"defense":52,"physical":62,"stamina":77,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_116","name":"Kiran Dovek","position":"CF","rarity":"Epic","ovr":76,"stats":{"speed":78,"shooting":78,"passing":64,"ball_control":72,"dribbling":73,"defense":50,"physical":75,"stamina":74,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_117","name":"Rivon Velix","position":"GK","rarity":"Epic","ovr":73,"stats":{"gk_diving":75,"gk_reflexes":74,"gk_handling":72,"gk_positioning":73,"gk_kicking":70,"physical":75,"stamina":65,"shooting":40,"passing":60,"dribbling":40,"ball_control":50,"defense":50,"speed":60},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_118","name":"Daven Talrik","position":"CB","rarity":"Epic","ovr":72,"stats":{"speed":64,"shooting":53,"passing":63,"ball_control":60,"dribbling":58,"defense":77,"physical":79,"stamina":74,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_119","name":"Lirax Vornel","position":"RB","rarity":"Epic","ovr":71,"stats":{"speed":76,"shooting":58,"passing":66,"ball_control":65,"dribbling":67,"defense":71,"physical":69,"stamina":74,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_120","name":"Toren Daxel","position":"LB","rarity":"Epic","ovr":71,"stats":{"speed":74,"shooting":55,"passing":65,"ball_control":64,"dribbling":66,"defense":71,"physical":68,"stamina":74,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_121","name":"Arvin Moltek","position":"DMF","rarity":"Epic","ovr":73,"stats":{"speed":66,"shooting":60,"passing":70,"ball_control":68,"dribbling":65,"defense":74,"physical":75,"stamina":76,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_122","name":"Caylen Valtor","position":"CMF","rarity":"Epic","ovr":74,"stats":{"speed":68,"shooting":63,"passing":72,"ball_control":70,"dribbling":68,"defense":63,"physical":65,"stamina":77,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_123","name":"Zyren Velox","position":"AMF","rarity":"Epic","ovr":75,"stats":{"speed":70,"shooting":70,"passing":75,"ball_control":74,"dribbling":76,"defense":58,"physical":64,"stamina":75,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_124","name":"Torik Veyro","position":"RWF","rarity":"Epic","ovr":74,"stats":{"speed":80,"shooting":70,"passing":66,"ball_control":72,"dribbling":74,"defense":53,"physical":63,"stamina":76,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_125","name":"Eryx Falden","position":"LWF","rarity":"Epic","ovr":74,"stats":{"speed":81,"shooting":71,"passing":67,"ball_control":73,"dribbling":75,"defense":52,"physical":62,"stamina":77,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_126","name":"Loran Krex","position":"CF","rarity":"Epic","ovr":76,"stats":{"speed":78,"shooting":78,"passing":64,"ball_control":72,"dribbling":73,"defense":50,"physical":75,"stamina":74,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_127","name":"Riven Talon","position":"GK","rarity":"Epic","ovr":73,"stats":{"gk_diving":75,"gk_reflexes":74,"gk_handling":72,"gk_positioning":73,"gk_kicking":70,"physical":75,"stamina":65,"shooting":40,"passing":60,"dribbling":40,"ball_control":50,"defense":50,"speed":60},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_128","name":"Daxel Vorin","position":"CB","rarity":"Epic","ovr":72,"stats":{"speed":64,"shooting":53,"passing":63,"ball_control":60,"dribbling":58,"defense":77,"physical":79,"stamina":74,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_129","name":"Cairon Velrik","position":"RB","rarity":"Epic","ovr":71,"stats":{"speed":76,"shooting":58,"passing":66,"ball_control":65,"dribbling":67,"defense":71,"physical":69,"stamina":74,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_130","name":"Lyron Maltek","position":"LB","rarity":"Epic","ovr":71,"stats":{"speed":74,"shooting":55,"passing":65,"ball_control":64,"dribbling":66,"defense":71,"physical":68,"stamina":74,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_131","name":"Torven Daxor","position":"DMF","rarity":"Epic","ovr":73,"stats":{"speed":66,"shooting":60,"passing":70,"ball_control":68,"dribbling":65,"defense":74,"physical":75,"stamina":76,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_132","name":"Zyron Velik","position":"CMF","rarity":"Epic","ovr":74,"stats":{"speed":68,"shooting":63,"passing":72,"ball_control":70,"dribbling":68,"defense":63,"physical":65,"stamina":77,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_133","name":"Kiron Vaxel","position":"AMF","rarity":"Epic","ovr":75,"stats":{"speed":70,"shooting":70,"passing":75,"ball_control":74,"dribbling":76,"defense":58,"physical":64,"stamina":75,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_134","name":"Eron Valdex","position":"RWF","rarity":"Epic","ovr":74,"stats":{"speed":80,"shooting":70,"passing":66,"ball_control":72,"dribbling":74,"defense":53,"physical":63,"stamina":76,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_135","name":"Tavon Malrix","position":"LWF","rarity":"Epic","ovr":74,"stats":{"speed":81,"shooting":71,"passing":67,"ball_control":73,"dribbling":75,"defense":52,"physical":62,"stamina":77,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_136","name":"Remy Storm","position":"DMF","rarity":"Rare","ovr":80,"stats":{"shooting":71,"passing":80,"dribbling":76,"ball_control":76,"defense":64,"speed":76,"physical":73,"stamina":87,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_137","name":"Phoenix Sterling","position":"CMF","rarity":"Rare","ovr":79,"stats":{"shooting":73,"passing":83,"dribbling":77,"ball_control":76,"defense":70,"speed":72,"physical":77,"stamina":89,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_138","name":"Titan Stone","position":"AMF","rarity":"Rare","ovr":81,"stats":{"shooting":82,"passing":70,"dribbling":76,"ball_control":78,"defense":50,"speed":85,"physical":79,"stamina":81,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_139","name":"Rocco Drake","position":"LWF","rarity":"Rare","ovr":77,"stats":{"shooting":81,"passing":75,"dribbling":81,"ball_control":72,"defense":51,"speed":78,"physical":71,"stamina":79,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_140","name":"Neo Gage","position":"RWF","rarity":"Rare","ovr":77,"stats":{"shooting":81,"passing":74,"dribbling":78,"ball_control":76,"defense":64,"speed":84,"physical":70,"stamina":79,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_141","name":"Atlas Mace","position":"CF","rarity":"Rare","ovr":83,"stats":{"shooting":84,"passing":78,"dribbling":82,"ball_control":80,"defense":58,"speed":84,"physical":76,"stamina":80,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_142","name":"Nova Duke","position":"SS","rarity":"Rare","ovr":82,"stats":{"shooting":87,"passing":79,"dribbling":82,"ball_control":77,"defense":62,"speed":77,"physical":80,"stamina":74,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_143","name":"Titan Stark","position":"GK","rarity":"Rare","ovr":80,"stats":{"shooting":47,"passing":52,"dribbling":31,"ball_control":57,"defense":50,"speed":71,"physical":75,"stamina":70,"gk_reflexes":77,"gk_handling":71,"gk_diving":80,"gk_positioning":73,"gk_kicking":80},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_144","name":"Neo Rook","position":"CB","rarity":"Rare","ovr":84,"stats":{"shooting":70,"passing":73,"dribbling":73,"ball_control":78,"defense":89,"speed":79,"physical":77,"stamina":85,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_145","name":"Jace Voss","position":"LB","rarity":"Rare","ovr":84,"stats":{"shooting":65,"passing":74,"dribbling":80,"ball_control":77,"defense":87,"speed":70,"physical":78,"stamina":80,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_146","name":"Pax Vane","position":"RB","rarity":"Rare","ovr":82,"stats":{"shooting":66,"passing":74,"dribbling":71,"ball_control":75,"defense":84,"speed":76,"physical":85,"stamina":72,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_147","name":"Pax Wilder","position":"DMF","rarity":"Rare","ovr":83,"stats":{"shooting":75,"passing":82,"dribbling":75,"ball_control":78,"defense":64,"speed":80,"physical":79,"stamina":87,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_148","name":"River Duke","position":"CMF","rarity":"Rare","ovr":83,"stats":{"shooting":70,"passing":85,"dribbling":72,"ball_control":72,"defense":73,"speed":77,"physical":70,"stamina":86,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_149","name":"Daxton Vane","position":"AMF","rarity":"Rare","ovr":75,"stats":{"shooting":82,"passing":70,"dribbling":85,"ball_control":78,"defense":60,"speed":84,"physical":72,"stamina":80,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_150","name":"Axel Hawk","position":"LWF","rarity":"Rare","ovr":77,"stats":{"shooting":85,"passing":79,"dribbling":75,"ball_control":79,"defense":64,"speed":82,"physical":75,"stamina":79,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_151","name":"Kael Frost","position":"RWF","rarity":"Rare","ovr":77,"stats":{"shooting":87,"passing":72,"dribbling":80,"ball_control":72,"defense":54,"speed":75,"physical":78,"stamina":75,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_152","name":"Cade Knight","position":"CF","rarity":"Rare","ovr":79,"stats":{"shooting":90,"passing":77,"dribbling":84,"ball_control":77,"defense":60,"speed":80,"physical":71,"stamina":74,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_153","name":"Enzo Volt","position":"SS","rarity":"Rare","ovr":75,"stats":{"shooting":88,"passing":72,"dribbling":83,"ball_control":79,"defense":65,"speed":83,"physical":78,"stamina":83,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_154","name":"Zade Frost","position":"GK","rarity":"Rare","ovr":84,"stats":{"shooting":38,"passing":62,"dribbling":44,"ball_control":58,"defense":41,"speed":80,"physical":79,"stamina":79,"gk_reflexes":71,"gk_handling":73,"gk_diving":73,"gk_positioning":79,"gk_kicking":71},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_155","name":"Nova Sterling","position":"CB","rarity":"Rare","ovr":79,"stats":{"shooting":62,"passing":80,"dribbling":75,"ball_control":70,"defense":90,"speed":76,"physical":79,"stamina":74,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_156","name":"Knox Steel","position":"LB","rarity":"Rare","ovr":82,"stats":{"shooting":66,"passing":79,"dribbling":71,"ball_control":75,"defense":87,"speed":74,"physical":75,"stamina":73,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_157","name":"River Thorne","position":"RB","rarity":"Rare","ovr":75,"stats":{"shooting":66,"passing":72,"dribbling":72,"ball_control":80,"defense":86,"speed":70,"physical":81,"stamina":74,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_158","name":"Jaxon Banks","position":"DMF","rarity":"Rare","ovr":76,"stats":{"shooting":72,"passing":85,"dribbling":70,"ball_control":73,"defense":66,"speed":80,"physical":75,"stamina":81,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_159","name":"River Wilder","position":"CMF","rarity":"Rare","ovr":75,"stats":{"shooting":80,"passing":84,"dribbling":75,"ball_control":80,"defense":62,"speed":71,"physical":71,"stamina":80,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_160","name":"Pax Rook","position":"AMF","rarity":"Rare","ovr":82,"stats":{"shooting":88,"passing":80,"dribbling":77,"ball_control":76,"defense":62,"speed":85,"physical":80,"stamina":80,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_161","name":"Atlas Storm","position":"LWF","rarity":"Rare","ovr":81,"stats":{"shooting":80,"passing":71,"dribbling":77,"ball_control":73,"defense":56,"speed":76,"physical":71,"stamina":83,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_162","name":"Axel Rook","position":"RWF","rarity":"Rare","ovr":80,"stats":{"shooting":86,"passing":71,"dribbling":75,"ball_control":75,"defense":63,"speed":84,"physical":72,"stamina":85,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_163","name":"Zion Drax","position":"CF","rarity":"Rare","ovr":83,"stats":{"shooting":84,"passing":76,"dribbling":76,"ball_control":71,"defense":65,"speed":82,"physical":80,"stamina":85,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_164","name":"Pax Gage","position":"SS","rarity":"Rare","ovr":78,"stats":{"shooting":86,"passing":77,"dribbling":75,"ball_control":78,"defense":65,"speed":80,"physical":73,"stamina":76,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_165","name":"Zade Baron","position":"GK","rarity":"Rare","ovr":84,"stats":{"shooting":50,"passing":61,"dribbling":33,"ball_control":55,"defense":58,"speed":72,"physical":73,"stamina":75,"gk_reflexes":76,"gk_handling":76,"gk_diving":70,"gk_positioning":77,"gk_kicking":75},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_166","name":"Axel Banks","position":"CB","rarity":"Rare","ovr":84,"stats":{"shooting":60,"passing":76,"dribbling":77,"ball_control":78,"defense":86,"speed":76,"physical":84,"stamina":80,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_167","name":"Dante Drake","position":"LB","rarity":"Rare","ovr":84,"stats":{"shooting":62,"passing":77,"dribbling":76,"ball_control":73,"defense":87,"speed":75,"physical":81,"stamina":70,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_168","name":"Pax Rane","position":"RB","rarity":"Rare","ovr":78,"stats":{"shooting":69,"passing":77,"dribbling":73,"ball_control":78,"defense":89,"speed":76,"physical":77,"stamina":72,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_169","name":"Titan Vane","position":"DMF","rarity":"Rare","ovr":80,"stats":{"shooting":78,"passing":84,"dribbling":78,"ball_control":70,"defense":71,"speed":78,"physical":78,"stamina":86,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_170","name":"Daxton Voss","position":"CMF","rarity":"Rare","ovr":78,"stats":{"shooting":80,"passing":81,"dribbling":77,"ball_control":79,"defense":62,"speed":77,"physical":72,"stamina":80,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_171","name":"Viggo Wilder","position":"AMF","rarity":"Rare","ovr":76,"stats":{"shooting":90,"passing":80,"dribbling":84,"ball_control":80,"defense":54,"speed":78,"physical":76,"stamina":80,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_172","name":"Zane Frost","position":"LWF","rarity":"Rare","ovr":79,"stats":{"shooting":87,"passing":77,"dribbling":83,"ball_control":77,"defense":52,"speed":82,"physical":73,"stamina":74,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_173","name":"Axel Steel","position":"RWF","rarity":"Rare","ovr":84,"stats":{"shooting":83,"passing":77,"dribbling":84,"ball_control":72,"defense":50,"speed":81,"physical":79,"stamina":85,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_174","name":"Kian Mercer","position":"CF","rarity":"Rare","ovr":84,"stats":{"shooting":82,"passing":77,"dribbling":85,"ball_control":77,"defense":57,"speed":85,"physical":77,"stamina":82,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_175","name":"Enzo Stark","position":"SS","rarity":"Rare","ovr":83,"stats":{"shooting":80,"passing":71,"dribbling":82,"ball_control":76,"defense":63,"speed":84,"physical":73,"stamina":79,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_176","name":"Nova Wolf","position":"GK","rarity":"Rare","ovr":78,"stats":{"shooting":42,"passing":68,"dribbling":43,"ball_control":45,"defense":44,"speed":72,"physical":75,"stamina":73,"gk_reflexes":70,"gk_handling":71,"gk_diving":74,"gk_positioning":76,"gk_kicking":80},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_177","name":"Zane Vane","position":"CB","rarity":"Rare","ovr":83,"stats":{"shooting":65,"passing":76,"dribbling":71,"ball_control":79,"defense":87,"speed":77,"physical":77,"stamina":70,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_178","name":"Axel Banks","position":"LB","rarity":"Rare","ovr":75,"stats":{"shooting":65,"passing":78,"dribbling":80,"ball_control":75,"defense":87,"speed":76,"physical":77,"stamina":78,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_179","name":"Pax Volt","position":"RB","rarity":"Rare","ovr":82,"stats":{"shooting":66,"passing":78,"dribbling":70,"ball_control":71,"defense":86,"speed":72,"physical":78,"stamina":77,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_180","name":"Knox Stone","position":"DMF","rarity":"Rare","ovr":77,"stats":{"shooting":70,"passing":84,"dribbling":77,"ball_control":78,"defense":63,"speed":72,"physical":71,"stamina":87,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_181","name":"Maddox Drax","position":"CMF","rarity":"Epic","ovr":86,"stats":{"shooting":85,"passing":90,"dribbling":82,"ball_control":80,"defense":76,"speed":81,"physical":88,"stamina":90,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_182","name":"Zane Voss","position":"AMF","rarity":"Epic","ovr":86,"stats":{"shooting":93,"passing":87,"dribbling":94,"ball_control":90,"defense":63,"speed":88,"physical":89,"stamina":85,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_183","name":"Jace Knight","position":"LWF","rarity":"Epic","ovr":85,"stats":{"shooting":94,"passing":84,"dribbling":85,"ball_control":83,"defense":63,"speed":89,"physical":89,"stamina":84,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_184","name":"Atlas Volt","position":"RWF","rarity":"Epic","ovr":93,"stats":{"shooting":92,"passing":89,"dribbling":86,"ball_control":90,"defense":60,"speed":91,"physical":87,"stamina":89,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_185","name":"Viggo Drax","position":"CF","rarity":"Epic","ovr":88,"stats":{"shooting":97,"passing":84,"dribbling":93,"ball_control":80,"defense":63,"speed":94,"physical":89,"stamina":94,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_186","name":"River Banks","position":"SS","rarity":"Epic","ovr":90,"stats":{"shooting":99,"passing":86,"dribbling":86,"ball_control":89,"defense":75,"speed":91,"physical":88,"stamina":87,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_187","name":"Rocco Knight","position":"GK","rarity":"Epic","ovr":91,"stats":{"shooting":50,"passing":52,"dribbling":44,"ball_control":57,"defense":51,"speed":88,"physical":87,"stamina":86,"gk_reflexes":87,"gk_handling":84,"gk_diving":87,"gk_positioning":83,"gk_kicking":81},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_188","name":"Viggo Steel","position":"CB","rarity":"Epic","ovr":91,"stats":{"shooting":71,"passing":84,"dribbling":80,"ball_control":80,"defense":91,"speed":88,"physical":94,"stamina":82,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_189","name":"Zane Wolf","position":"LB","rarity":"Epic","ovr":88,"stats":{"shooting":70,"passing":86,"dribbling":82,"ball_control":87,"defense":99,"speed":89,"physical":92,"stamina":91,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_190","name":"Kael Drax","position":"RB","rarity":"Epic","ovr":88,"stats":{"shooting":76,"passing":85,"dribbling":89,"ball_control":83,"defense":99,"speed":83,"physical":94,"stamina":93,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_191","name":"Nash Power","position":"DMF","rarity":"Epic","ovr":87,"stats":{"shooting":86,"passing":91,"dribbling":89,"ball_control":82,"defense":72,"speed":88,"physical":87,"stamina":96,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_192","name":"Phoenix Rook","position":"CMF","rarity":"Epic","ovr":93,"stats":{"shooting":90,"passing":92,"dribbling":82,"ball_control":82,"defense":76,"speed":86,"physical":83,"stamina":98,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_193","name":"Enzo Power","position":"AMF","rarity":"Epic","ovr":86,"stats":{"shooting":93,"passing":84,"dribbling":85,"ball_control":83,"defense":71,"speed":89,"physical":82,"stamina":86,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_194","name":"Cade Stone","position":"LWF","rarity":"Epic","ovr":85,"stats":{"shooting":90,"passing":86,"dribbling":89,"ball_control":81,"defense":72,"speed":88,"physical":80,"stamina":88,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_195","name":"Nova Mercer","position":"RWF","rarity":"Epic","ovr":92,"stats":{"shooting":96,"passing":85,"dribbling":86,"ball_control":82,"defense":74,"speed":89,"physical":81,"stamina":84,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_196","name":"Nash Sterling","position":"CF","rarity":"Epic","ovr":86,"stats":{"shooting":100,"passing":84,"dribbling":85,"ball_control":88,"defense":63,"speed":95,"physical":81,"stamina":91,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_197","name":"Nova Stone","position":"SS","rarity":"Epic","ovr":93,"stats":{"shooting":93,"passing":90,"dribbling":89,"ball_control":89,"defense":66,"speed":93,"physical":83,"stamina":95,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_198","name":"Dante Steel","position":"GK","rarity":"Epic","ovr":91,"stats":{"shooting":34,"passing":56,"dribbling":34,"ball_control":42,"defense":48,"speed":81,"physical":86,"stamina":89,"gk_reflexes":89,"gk_handling":84,"gk_diving":80,"gk_positioning":87,"gk_kicking":82},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_199","name":"Kai Mace","position":"CB","rarity":"Epic","ovr":92,"stats":{"shooting":72,"passing":89,"dribbling":81,"ball_control":82,"defense":97,"speed":86,"physical":86,"stamina":83,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_200","name":"Knox Frost","position":"LB","rarity":"Epic","ovr":92,"stats":{"shooting":71,"passing":86,"dribbling":90,"ball_control":89,"defense":98,"speed":85,"physical":88,"stamina":85,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_201","name":"NOR GT","position":"CF","rarity":"Premium Legend","ovr":150,"stats":{"speed":98,"shooting":98,"passing":92,"ball_control":96,"dribbling":97,"defense":65,"physical":95,"stamina":98,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_202","name":"NEBU DBX","position":"AMF","rarity":"Premium Legend","ovr":150,"stats":{"speed":97,"shooting":96,"passing":98,"ball_control":97,"dribbling":96,"defense":68,"physical":92,"stamina":97,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_203","name":"SREE HARII","position":"GK","rarity":"Premium Legend","ovr":150,"stats":{"gk_diving":98,"gk_reflexes":97,"gk_handling":96,"gk_positioning":95,"gk_kicking":94,"physical":92,"stamina":97,"shooting":40,"passing":60,"dribbling":40,"ball_control":50,"defense":50,"speed":60},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_204","name":"Massi Rondo","position":"RWF","rarity":"Premium","ovr":144,"stats":{"speed":96,"shooting":90,"passing":88,"ball_control":92,"dribbling":94,"defense":65,"physical":90,"stamina":93,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_205","name":"Ranoldo Vexel","position":"CF","rarity":"Premium","ovr":143,"stats":{"speed":95,"shooting":91,"passing":85,"ball_control":91,"dribbling":93,"defense":63,"physical":89,"stamina":92,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_206","name":"Nayamer Dexel","position":"LWF","rarity":"Premium","ovr":142,"stats":{"speed":97,"shooting":88,"passing":84,"ball_control":90,"dribbling":92,"defense":60,"physical":88,"stamina":91,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_207","name":"Mbabepe Lorik","position":"CF","rarity":"Premium","ovr":141,"stats":{"speed":96,"shooting":89,"passing":83,"ball_control":91,"dribbling":93,"defense":61,"physical":87,"stamina":90,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_208","name":"Albie Tolen","position":"AMF","rarity":"Premium","ovr":140,"stats":{"speed":92,"shooting":85,"passing":89,"ball_control":90,"dribbling":88,"defense":66,"physical":85,"stamina":88,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_209","name":"Joshwel Rocay","position":"CMF","rarity":"Premium","ovr":139,"stats":{"speed":91,"shooting":83,"passing":88,"ball_control":89,"dribbling":87,"defense":68,"physical":84,"stamina":87,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_210","name":"Yadhubub Lorvik","position":"DMF","rarity":"Premium","ovr":138,"stats":{"speed":88,"shooting":80,"passing":87,"ball_control":86,"dribbling":85,"defense":82,"physical":83,"stamina":88,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_211","name":"Tavrix Molven","position":"CB","rarity":"Premium","ovr":137,"stats":{"speed":78,"shooting":70,"passing":77,"ball_control":75,"dribbling":73,"defense":90,"physical":89,"stamina":82,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_212","name":"Cairon Vexel","position":"CB","rarity":"Premium","ovr":137,"stats":{"speed":77,"shooting":71,"passing":76,"ball_control":74,"dribbling":72,"defense":89,"physical":88,"stamina":82,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_213","name":"Daren Falvik","position":"RB","rarity":"Premium","ovr":136,"stats":{"speed":86,"shooting":72,"passing":78,"ball_control":79,"dribbling":81,"defense":85,"physical":84,"stamina":86,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_214","name":"Liron Veyron","position":"LB","rarity":"Premium","ovr":136,"stats":{"speed":85,"shooting":70,"passing":77,"ball_control":78,"dribbling":80,"defense":84,"physical":83,"stamina":85,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_215","name":"Rivon Klyne","position":"DMF","rarity":"Premium","ovr":135,"stats":{"speed":80,"shooting":74,"passing":82,"ball_control":81,"dribbling":79,"defense":88,"physical":86,"stamina":84,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_216","name":"Zyren Falden","position":"CMF","rarity":"Premium","ovr":135,"stats":{"speed":81,"shooting":75,"passing":83,"ball_control":82,"dribbling":80,"defense":85,"physical":84,"stamina":85,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_217","name":"Tavon Krex","position":"AMF","rarity":"Premium","ovr":134,"stats":{"speed":83,"shooting":77,"passing":86,"ball_control":85,"dribbling":84,"defense":80,"physical":82,"stamina":84,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_218","name":"Kiron Valtrex","position":"RWF","rarity":"Premium","ovr":134,"stats":{"speed":88,"shooting":79,"passing":81,"ball_control":83,"dribbling":85,"defense":70,"physical":81,"stamina":86,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_219","name":"Eryx Vornel","position":"LWF","rarity":"Premium","ovr":134,"stats":{"speed":89,"shooting":80,"passing":82,"ball_control":84,"dribbling":86,"defense":71,"physical":82,"stamina":87,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_220","name":"Torik Dexel","position":"CF","rarity":"Premium","ovr":133,"stats":{"speed":87,"shooting":83,"passing":78,"ball_control":82,"dribbling":85,"defense":65,"physical":83,"stamina":85,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_221","name":"Ravon Valtor","position":"GK","rarity":"Premium","ovr":133,"stats":{"gk_diving":88,"gk_reflexes":87,"gk_handling":86,"gk_positioning":85,"gk_kicking":83,"physical":84,"stamina":86,"shooting":40,"passing":60,"dribbling":40,"ball_control":50,"defense":50,"speed":60},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_222","name":"Daren Velix","position":"CB","rarity":"Premium","ovr":132,"stats":{"speed":75,"shooting":70,"passing":75,"ball_control":74,"dribbling":72,"defense":87,"physical":86,"stamina":82,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_223","name":"Lyron Vexel","position":"RB","rarity":"Premium","ovr":132,"stats":{"speed":85,"shooting":73,"passing":78,"ball_control":79,"dribbling":81,"defense":83,"physical":82,"stamina":84,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_224","name":"Mavrix Lorik","position":"LB","rarity":"Premium","ovr":132,"stats":{"speed":84,"shooting":72,"passing":77,"ball_control":78,"dribbling":80,"defense":82,"physical":81,"stamina":83,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_225","name":"Zylen Moltek","position":"DMF","rarity":"Premium","ovr":131,"stats":{"speed":79,"shooting":74,"passing":81,"ball_control":80,"dribbling":78,"defense":86,"physical":84,"stamina":82,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_226","name":"Cairon Veyro","position":"CMF","rarity":"Premium","ovr":131,"stats":{"speed":80,"shooting":75,"passing":82,"ball_control":81,"dribbling":79,"defense":83,"physical":82,"stamina":83,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_227","name":"Tavrix Daxon","position":"AMF","rarity":"Premium","ovr":130,"stats":{"speed":82,"shooting":77,"passing":84,"ball_control":83,"dribbling":82,"defense":79,"physical":81,"stamina":82,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_228","name":"Eryx Falden","position":"RWF","rarity":"Premium","ovr":130,"stats":{"speed":87,"shooting":79,"passing":80,"ball_control":82,"dribbling":84,"defense":68,"physical":80,"stamina":85,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_229","name":"Loran Dexel","position":"LWF","rarity":"Premium","ovr":130,"stats":{"speed":88,"shooting":80,"passing":81,"ball_control":83,"dribbling":85,"defense":69,"physical":81,"stamina":86,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_230","name":"Daxel Molvik","position":"CF","rarity":"Premium","ovr":129,"stats":{"speed":86,"shooting":82,"passing":77,"ball_control":81,"dribbling":84,"defense":64,"physical":82,"stamina":84,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_231","name":"Ravik Vorik","position":"GK","rarity":"Premium","ovr":129,"stats":{"gk_diving":86,"gk_reflexes":85,"gk_handling":84,"gk_positioning":83,"gk_kicking":81,"physical":82,"stamina":85,"shooting":40,"passing":60,"dribbling":40,"ball_control":50,"defense":50,"speed":60},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_232","name":"Cayden Valtor","position":"CB","rarity":"Premium","ovr":128,"stats":{"speed":74,"shooting":69,"passing":73,"ball_control":72,"dribbling":71,"defense":85,"physical":84,"stamina":80,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_233","name":"Tavrix Lorik","position":"RB","rarity":"Premium","ovr":128,"stats":{"speed":84,"shooting":72,"passing":77,"ball_control":78,"dribbling":80,"defense":81,"physical":80,"stamina":82,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_234","name":"Cairon Dexel","position":"LB","rarity":"Premium","ovr":128,"stats":{"speed":83,"shooting":71,"passing":76,"ball_control":77,"dribbling":79,"defense":80,"physical":79,"stamina":81,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_235","name":"Daren Valtor","position":"DMF","rarity":"Premium","ovr":127,"stats":{"speed":78,"shooting":73,"passing":79,"ball_control":78,"dribbling":76,"defense":83,"physical":82,"stamina":80,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_236","name":"Lyron Falden","position":"CMF","rarity":"Premium","ovr":127,"stats":{"speed":79,"shooting":74,"passing":80,"ball_control":79,"dribbling":77,"defense":81,"physical":80,"stamina":81,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_237","name":"Mavrix Dexel","position":"AMF","rarity":"Premium","ovr":126,"stats":{"speed":81,"shooting":76,"passing":82,"ball_control":81,"dribbling":80,"defense":78,"physical":79,"stamina":80,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_238","name":"Zyren Veyron","position":"RWF","rarity":"Premium","ovr":126,"stats":{"speed":86,"shooting":78,"passing":79,"ball_control":81,"dribbling":83,"defense":66,"physical":78,"stamina":82,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_239","name":"Eryx Lorvik","position":"LWF","rarity":"Premium","ovr":126,"stats":{"speed":87,"shooting":79,"passing":80,"ball_control":82,"dribbling":84,"defense":67,"physical":79,"stamina":83,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_240","name":"Torik Valtor","position":"CF","rarity":"Premium","ovr":125,"stats":{"speed":85,"shooting":81,"passing":76,"ball_control":80,"dribbling":83,"defense":63,"physical":80,"stamina":81,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_241","name":"Ravon Dexel","position":"GK","rarity":"Premium","ovr":125,"stats":{"gk_diving":84,"gk_reflexes":83,"gk_handling":82,"gk_positioning":81,"gk_kicking":79,"physical":80,"stamina":83,"shooting":40,"passing":60,"dribbling":40,"ball_control":50,"defense":50,"speed":60},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_242","name":"Daren Molvik","position":"CB","rarity":"Premium","ovr":124,"stats":{"speed":73,"shooting":68,"passing":72,"ball_control":71,"dribbling":70,"defense":83,"physical":82,"stamina":79,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_243","name":"Lyron Valtrex","position":"RB","rarity":"Premium","ovr":124,"stats":{"speed":83,"shooting":71,"passing":76,"ball_control":77,"dribbling":79,"defense":79,"physical":78,"stamina":80,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_244","name":"Mavrix Veyron","position":"LB","rarity":"Premium","ovr":124,"stats":{"speed":82,"shooting":70,"passing":75,"ball_control":76,"dribbling":78,"defense":78,"physical":77,"stamina":79,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_245","name":"Zylen Lorik","position":"DMF","rarity":"Premium","ovr":123,"stats":{"speed":77,"shooting":72,"passing":77,"ball_control":76,"dribbling":74,"defense":81,"physical":80,"stamina":78,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_246","name":"Cairon Dexel","position":"CMF","rarity":"Premium","ovr":123,"stats":{"speed":78,"shooting":73,"passing":78,"ball_control":77,"dribbling":75,"defense":79,"physical":78,"stamina":79,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_247","name":"Tavrix Valtor","position":"AMF","rarity":"Premium","ovr":122,"stats":{"speed":80,"shooting":75,"passing":80,"ball_control":79,"dribbling":78,"defense":76,"physical":77,"stamina":78,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_248","name":"Eryx Falven","position":"RWF","rarity":"Premium","ovr":122,"stats":{"speed":85,"shooting":77,"passing":78,"ball_control":80,"dribbling":82,"defense":64,"physical":76,"stamina":80,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_249","name":"Loran Veyron","position":"LWF","rarity":"Premium","ovr":122,"stats":{"speed":86,"shooting":78,"passing":79,"ball_control":81,"dribbling":83,"defense":65,"physical":77,"stamina":81,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_250","name":"Torik Dexel","position":"CF","rarity":"Premium","ovr":121,"stats":{"speed":84,"shooting":80,"passing":75,"ball_control":79,"dribbling":82,"defense":61,"physical":78,"stamina":79,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Heel Trick","First Time Shot","Fighting Spirit"]},{"id":"PLAYER_251","name":"Knox Banks","position":"CF","rarity":"Premium","ovr":64,"stats":{"shooting":74,"passing":62,"dribbling":66,"ball_control":67,"defense":51,"speed":71,"physical":65,"stamina":68,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]},{"id":"PLAYER_252","name":"Enzo Banks","position":"SS","rarity":"Premium","ovr":68,"stats":{"shooting":80,"passing":62,"dribbling":75,"ball_control":67,"defense":54,"speed":71,"physical":70,"stamina":75,"gk_reflexes":10,"gk_handling":10,"gk_diving":10,"gk_positioning":10,"gk_kicking":10},"skills":["Cut Behind","Step On Control"]}]'),um=()=>{};var Sc={};const Ah=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},hm=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=n[t++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=n[t++],a=n[t++],l=n[t++],c=((s&7)<<18|(r&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const r=n[t++],a=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return e.join("")},Ph={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const r=n[s],a=s+1<n.length,l=a?n[s+1]:0,c=s+2<n.length,h=c?n[s+2]:0,f=r>>2,p=(r&3)<<4|l>>4;let _=(l&15)<<2|h>>6,b=h&63;c||(b=64,a||(_=64)),i.push(t[f],t[p],t[_],t[b])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Ah(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):hm(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const r=t[n.charAt(s++)],l=s<n.length?t[n.charAt(s)]:0;++s;const h=s<n.length?t[n.charAt(s)]:64;++s;const p=s<n.length?t[n.charAt(s)]:64;if(++s,r==null||l==null||h==null||p==null)throw new dm;const _=r<<2|l>>4;if(i.push(_),h!==64){const b=l<<4&240|h>>2;if(i.push(b),p!==64){const R=h<<6&192|p;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class dm extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gm=function(n){const e=Ah(n);return Ph.encodeByteArray(e,!0)},Zs=function(n){return gm(n).replace(/\./g,"")},Ch=function(n){try{return Ph.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function fm(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const pm=()=>fm().__FIREBASE_DEFAULTS__,mm=()=>{if(typeof process>"u"||typeof Sc>"u")return;const n=Sc.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},_m=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Ch(n[1]);return e&&JSON.parse(e)},wr=()=>{try{return um()||pm()||mm()||_m()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Nh=n=>wr()?.emulatorHosts?.[n],ym=n=>{const e=Nh(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Lh=()=>wr()?.config,Dh=n=>wr()?.[`_${n}`];class km{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function yn(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ka(n){return(await fetch(n,{credentials:"include"})).ok}function vm(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,r=n.sub||n.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Zs(JSON.stringify(t)),Zs(JSON.stringify(a)),""].join(".")}const Si={};function bm(){const n={prod:[],emulator:[]};for(const e of Object.keys(Si))Si[e]?n.emulator.push(e):n.prod.push(e);return n}function Em(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Ic=!1;function Fh(n,e){if(typeof window>"u"||typeof document>"u"||!yn(window.location.host)||Si[n]===e||Si[n]||Ic)return;Si[n]=e;function t(_){return`__firebase__banner__${_}`}const i="__firebase__banner",r=bm().prod.length>0;function a(){const _=document.getElementById(i);_&&_.remove()}function l(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function c(_,b){_.setAttribute("width","24"),_.setAttribute("id",b),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function h(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Ic=!0,a()},_}function f(_,b){_.setAttribute("id",b),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function p(){const _=Em(i),b=t("text"),R=document.getElementById(b)||document.createElement("span"),A=t("learnmore"),I=document.getElementById(A)||document.createElement("a"),D=t("preprendIcon"),C=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const V=_.element;l(V),f(I,A);const U=h();c(C,D),V.append(C,R,I,U),document.body.appendChild(V)}r?(R.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function De(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(De())}function Tm(){const n=wr()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xm(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Rm(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Sm(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Im(){const n=De();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Am(){return!Tm()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pm(){try{return typeof indexedDB=="object"}catch{return!1}}function Cm(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}const Nm="FirebaseError";class Et extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Nm,Object.setPrototypeOf(this,Et.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,es.prototype.create)}}class es{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,r=this.errors[e],a=r?Lm(r,i):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Et(s,l,i)}}function Lm(n,e){return n.replace(Dm,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const Dm=/\{\$([^}]+)}/g;function Fm(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Yt(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const r=n[s],a=e[s];if(Ac(r)&&Ac(a)){if(!Yt(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function Ac(n){return n!==null&&typeof n=="object"}function ts(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function vi(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(r)}}),e}function bi(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Vm(n,e){const t=new Om(n,e);return t.subscribe.bind(t)}class Om{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Mm(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=Eo),s.error===void 0&&(s.error=Eo),s.complete===void 0&&(s.complete=Eo);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mm(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Eo(){}function ke(n){return n&&n._delegate?n._delegate:n}class fn{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const cn="[DEFAULT]";class jm{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new km;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Bm(e))try{this.getOrInitializeService({instanceIdentifier:cn})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=cn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cn){return this.instances.has(e)}getOptions(e=cn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[r,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);i===l&&a.resolve(s)}return s}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&e(r,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Um(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=cn){return this.component?this.component.multipleInstances?e:cn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Um(n){return n===cn?void 0:n}function Bm(n){return n.instantiationMode==="EAGER"}class Hm{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new jm(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Q;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Q||(Q={}));const qm={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},$m=Q.INFO,Ym={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},Wm=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=Ym[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class va{constructor(e){this.name=e,this._logLevel=$m,this._logHandler=Wm,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Q))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qm[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...e),this._logHandler(this,Q.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...e),this._logHandler(this,Q.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...e),this._logHandler(this,Q.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...e),this._logHandler(this,Q.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...e),this._logHandler(this,Q.ERROR,...e)}}const Gm=(n,e)=>e.some(t=>n instanceof t);let Pc,Cc;function zm(){return Pc||(Pc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Km(){return Cc||(Cc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vh=new WeakMap,jo=new WeakMap,Oh=new WeakMap,wo=new WeakMap,ba=new WeakMap;function Qm(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",r),n.removeEventListener("error",a)},r=()=>{t(jt(n.result)),s()},a=()=>{i(n.error),s()};n.addEventListener("success",r),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Vh.set(t,n)}).catch(()=>{}),ba.set(e,n),e}function Jm(n){if(jo.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",a),n.removeEventListener("abort",a)},r=()=>{t(),s()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",r),n.addEventListener("error",a),n.addEventListener("abort",a)});jo.set(n,e)}let Uo={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return jo.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Oh.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return jt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Xm(n){Uo=n(Uo)}function Zm(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(To(this),e,...t);return Oh.set(i,e.sort?e.sort():[e]),jt(i)}:Km().includes(n)?function(...e){return n.apply(To(this),e),jt(Vh.get(this))}:function(...e){return jt(n.apply(To(this),e))}}function e_(n){return typeof n=="function"?Zm(n):(n instanceof IDBTransaction&&Jm(n),Gm(n,zm())?new Proxy(n,Uo):n)}function jt(n){if(n instanceof IDBRequest)return Qm(n);if(wo.has(n))return wo.get(n);const e=e_(n);return e!==n&&(wo.set(n,e),ba.set(e,n)),e}const To=n=>ba.get(n);function t_(n,e,{blocked:t,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(n,e),l=jt(a);return i&&a.addEventListener("upgradeneeded",c=>{i(jt(a.result),c.oldVersion,c.newVersion,jt(a.transaction),c)}),t&&a.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),l.then(c=>{r&&c.addEventListener("close",()=>r()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const n_=["get","getKey","getAll","getAllKeys","count"],i_=["put","add","delete","clear"],xo=new Map;function Nc(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(xo.get(e))return xo.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=i_.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||n_.includes(t)))return;const r=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let h=c.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[t](...l),s&&c.done]))[0]};return xo.set(e,r),r}Xm(n=>({...n,get:(e,t,i)=>Nc(e,t)||n.get(e,t,i),has:(e,t)=>!!Nc(e,t)||n.has(e,t)}));class s_{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(r_(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function r_(n){return n.getComponent()?.type==="VERSION"}const Bo="@firebase/app",Lc="0.14.6";const yt=new va("@firebase/app"),o_="@firebase/app-compat",a_="@firebase/analytics-compat",l_="@firebase/analytics",c_="@firebase/app-check-compat",u_="@firebase/app-check",h_="@firebase/auth",d_="@firebase/auth-compat",g_="@firebase/database",f_="@firebase/data-connect",p_="@firebase/database-compat",m_="@firebase/functions",__="@firebase/functions-compat",y_="@firebase/installations",k_="@firebase/installations-compat",v_="@firebase/messaging",b_="@firebase/messaging-compat",E_="@firebase/performance",w_="@firebase/performance-compat",T_="@firebase/remote-config",x_="@firebase/remote-config-compat",R_="@firebase/storage",S_="@firebase/storage-compat",I_="@firebase/firestore",A_="@firebase/ai",P_="@firebase/firestore-compat",C_="firebase",N_="12.6.0";const Ho="[DEFAULT]",L_={[Bo]:"fire-core",[o_]:"fire-core-compat",[l_]:"fire-analytics",[a_]:"fire-analytics-compat",[u_]:"fire-app-check",[c_]:"fire-app-check-compat",[h_]:"fire-auth",[d_]:"fire-auth-compat",[g_]:"fire-rtdb",[f_]:"fire-data-connect",[p_]:"fire-rtdb-compat",[m_]:"fire-fn",[__]:"fire-fn-compat",[y_]:"fire-iid",[k_]:"fire-iid-compat",[v_]:"fire-fcm",[b_]:"fire-fcm-compat",[E_]:"fire-perf",[w_]:"fire-perf-compat",[T_]:"fire-rc",[x_]:"fire-rc-compat",[R_]:"fire-gcs",[S_]:"fire-gcs-compat",[I_]:"fire-fst",[P_]:"fire-fst-compat",[A_]:"fire-vertex","fire-js":"fire-js",[C_]:"fire-js-all"};const er=new Map,D_=new Map,qo=new Map;function Dc(n,e){try{n.container.addComponent(e)}catch(t){yt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Mn(n){const e=n.name;if(qo.has(e))return yt.debug(`There were multiple attempts to register component ${e}.`),!1;qo.set(e,n);for(const t of er.values())Dc(t,n);for(const t of D_.values())Dc(t,n);return!0}function Tr(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function He(n){return n==null?!1:n.settings!==void 0}const F_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ut=new es("app","Firebase",F_);class V_{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new fn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ut.create("app-deleted",{appName:this._name})}}const Kn=N_;function Mh(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Ho,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw Ut.create("bad-app-name",{appName:String(s)});if(t||(t=Lh()),!t)throw Ut.create("no-options");const r=er.get(s);if(r){if(Yt(t,r.options)&&Yt(i,r.config))return r;throw Ut.create("duplicate-app",{appName:s})}const a=new Hm(s);for(const c of qo.values())a.addComponent(c);const l=new V_(t,i,a);return er.set(s,l),l}function jh(n=Ho){const e=er.get(n);if(!e&&n===Ho&&Lh())return Mh();if(!e)throw Ut.create("no-app",{appName:n});return e}function Bt(n,e,t){let i=L_[n]??n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),r=e.match(/\s|\//);if(s||r){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&a.push("and"),r&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yt.warn(a.join(" "));return}Mn(new fn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const O_="firebase-heartbeat-database",M_=1,Vi="firebase-heartbeat-store";let Ro=null;function Uh(){return Ro||(Ro=t_(O_,M_,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Vi)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ut.create("idb-open",{originalErrorMessage:n.message})})),Ro}async function j_(n){try{const t=(await Uh()).transaction(Vi),i=await t.objectStore(Vi).get(Bh(n));return await t.done,i}catch(e){if(e instanceof Et)yt.warn(e.message);else{const t=Ut.create("idb-get",{originalErrorMessage:e?.message});yt.warn(t.message)}}}async function Fc(n,e){try{const i=(await Uh()).transaction(Vi,"readwrite");await i.objectStore(Vi).put(e,Bh(n)),await i.done}catch(t){if(t instanceof Et)yt.warn(t.message);else{const i=Ut.create("idb-set",{originalErrorMessage:t?.message});yt.warn(i.message)}}}function Bh(n){return`${n.name}!${n.options.appId}`}const U_=1024,B_=30;class H_{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new $_(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Vc();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>B_){const s=Y_(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){yt.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Vc(),{heartbeatsToSend:t,unsentEntries:i}=q_(this._heartbeatsCache.heartbeats),s=Zs(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return yt.warn(e),""}}}function Vc(){return new Date().toISOString().substring(0,10)}function q_(n,e=U_){const t=[];let i=n.slice();for(const s of n){const r=t.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),Oc(t)>e){r.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Oc(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class $_{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Pm()?Cm().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await j_(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Fc(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Fc(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Oc(n){return Zs(JSON.stringify({version:2,heartbeats:n})).length}function Y_(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function W_(n){Mn(new fn("platform-logger",e=>new s_(e),"PRIVATE")),Mn(new fn("heartbeat",e=>new H_(e),"PRIVATE")),Bt(Bo,Lc,n),Bt(Bo,Lc,"esm2020"),Bt("fire-js","")}W_("");var G_="firebase",z_="12.7.0";Bt(G_,z_,"app");function Hh(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const K_=Hh,qh=new es("auth","Firebase",Hh());const tr=new va("@firebase/auth");function Q_(n,...e){tr.logLevel<=Q.WARN&&tr.warn(`Auth (${Kn}): ${n}`,...e)}function Hs(n,...e){tr.logLevel<=Q.ERROR&&tr.error(`Auth (${Kn}): ${n}`,...e)}function ze(n,...e){throw wa(n,...e)}function Qe(n,...e){return wa(n,...e)}function Ea(n,e,t){const i={...K_(),[e]:t};return new es("auth","Firebase",i).create(e,{appName:n.name})}function mt(n){return Ea(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function J_(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&ze(n,"argument-error"),Ea(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wa(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return qh.create(n,...e)}function G(n,e,...t){if(!n)throw wa(e,...t)}function gt(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Hs(e),new Error(e)}function kt(n,e){n||gt(e)}function $o(){return typeof self<"u"&&self.location?.href||""}function X_(){return Mc()==="http:"||Mc()==="https:"}function Mc(){return typeof self<"u"&&self.location?.protocol||null}function Z_(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(X_()||Rm()||"connection"in navigator)?navigator.onLine:!0}function e0(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class ns{constructor(e,t){this.shortDelay=e,this.longDelay=t,kt(t>e,"Short delay should be less than long delay!"),this.isMobile=wm()||Sm()}get(){return Z_()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ta(n,e){kt(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class $h{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const t0={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const n0=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],i0=new ns(3e4,6e4);function wt(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Tt(n,e,t,i,s={}){return Yh(n,s,async()=>{let r={},a={};i&&(e==="GET"?a=i:r={body:JSON.stringify(i)});const l=ts({key:n.config.apiKey,...a}).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:c,...r};return xm()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&yn(n.emulatorConfig.host)&&(h.credentials="include"),$h.fetch()(await Wh(n,n.config.apiHost,t,l),h)})}async function Yh(n,e,t){n._canInitEmulator=!1;const i={...t0,...e};try{const s=new r0(n),r=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw Ns(n,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const l=r.ok?a.errorMessage:a.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ns(n,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Ns(n,"email-already-in-use",a);if(c==="USER_DISABLED")throw Ns(n,"user-disabled",a);const f=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Ea(n,f,h);ze(n,f)}}catch(s){if(s instanceof Et)throw s;ze(n,"network-request-failed",{message:String(s)})}}async function is(n,e,t,i,s={}){const r=await Tt(n,e,t,i,s);return"mfaPendingCredential"in r&&ze(n,"multi-factor-auth-required",{_serverResponse:r}),r}async function Wh(n,e,t,i){const s=`${e}${t}?${i}`,r=n,a=r.config.emulator?Ta(n.config,s):`${n.config.apiScheme}://${s}`;return n0.includes(t)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(a).toString():a}function s0(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class r0{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Qe(this.auth,"network-request-failed")),i0.get())})}}function Ns(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=Qe(n,e,i);return s.customData._tokenResponse=t,s}function jc(n){return n!==void 0&&n.enterprise!==void 0}class o0{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return s0(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function a0(n,e){return Tt(n,"GET","/v2/recaptchaConfig",wt(n,e))}async function l0(n,e){return Tt(n,"POST","/v1/accounts:delete",e)}async function nr(n,e){return Tt(n,"POST","/v1/accounts:lookup",e)}function Ii(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function c0(n,e=!1){const t=ke(n),i=await t.getIdToken(e),s=xa(i);G(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,a=r?.sign_in_provider;return{claims:s,token:i,authTime:Ii(So(s.auth_time)),issuedAtTime:Ii(So(s.iat)),expirationTime:Ii(So(s.exp)),signInProvider:a||null,signInSecondFactor:r?.sign_in_second_factor||null}}function So(n){return Number(n)*1e3}function xa(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Hs("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ch(t);return s?JSON.parse(s):(Hs("Failed to decode base64 JWT payload"),null)}catch(s){return Hs("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Uc(n){const e=xa(n);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Oi(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Et&&u0(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function u0({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class h0{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Yo{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ii(this.lastLoginAt),this.creationTime=Ii(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ir(n){const e=n.auth,t=await n.getIdToken(),i=await Oi(n,nr(e,{idToken:t}));G(i?.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const r=s.providerUserInfo?.length?Gh(s.providerUserInfo):[],a=g0(n.providerData,r),l=n.isAnonymous,c=!(n.email&&s.passwordHash)&&!a?.length,h=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Yo(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,f)}async function d0(n){const e=ke(n);await ir(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function g0(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function Gh(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function f0(n,e){const t=await Yh(n,{},async()=>{const i=ts({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=n.config,a=await Wh(n,s,"/v1/token",`key=${r}`),l=await n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:i};return n.emulatorConfig&&yn(n.emulatorConfig.host)&&(c.credentials="include"),$h.fetch()(a,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function p0(n,e){return Tt(n,"POST","/v2/accounts:revokeToken",wt(n,e))}class Ln{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Uc(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){G(e.length!==0,"internal-error");const t=Uc(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:r}=await f0(e,t);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:r}=t,a=new Ln;return i&&(G(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),s&&(G(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),r&&(G(typeof r=="number","internal-error",{appName:e}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ln,this.toJSON())}_performRefresh(){return gt("not implemented")}}function Dt(n,e){G(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ke{constructor({uid:e,auth:t,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new h0(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Yo(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Oi(this,this.stsTokenManager.getToken(this.auth,e));return G(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return c0(this,e)}reload(){return d0(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ke({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await ir(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(He(this.auth.app))return Promise.reject(mt(this.auth));const e=await this.getIdToken();return await Oi(this,l0(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,s=t.email??void 0,r=t.phoneNumber??void 0,a=t.photoURL??void 0,l=t.tenantId??void 0,c=t._redirectEventId??void 0,h=t.createdAt??void 0,f=t.lastLoginAt??void 0,{uid:p,emailVerified:_,isAnonymous:b,providerData:R,stsTokenManager:A}=t;G(p&&A,e,"internal-error");const I=Ln.fromJSON(this.name,A);G(typeof p=="string",e,"internal-error"),Dt(i,e.name),Dt(s,e.name),G(typeof _=="boolean",e,"internal-error"),G(typeof b=="boolean",e,"internal-error"),Dt(r,e.name),Dt(a,e.name),Dt(l,e.name),Dt(c,e.name),Dt(h,e.name),Dt(f,e.name);const D=new Ke({uid:p,auth:e,email:s,emailVerified:_,displayName:i,isAnonymous:b,photoURL:a,phoneNumber:r,tenantId:l,stsTokenManager:I,createdAt:h,lastLoginAt:f});return R&&Array.isArray(R)&&(D.providerData=R.map(C=>({...C}))),c&&(D._redirectEventId=c),D}static async _fromIdTokenResponse(e,t,i=!1){const s=new Ln;s.updateFromServerResponse(t);const r=new Ke({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await ir(r),r}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];G(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?Gh(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!r?.length,l=new Ln;l.updateFromIdToken(i);const c=new Ke({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new Yo(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!r?.length};return Object.assign(c,h),c}}const Bc=new Map;function ft(n){kt(n instanceof Function,"Expected a class definition");let e=Bc.get(n);return e?(kt(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Bc.set(n,e),e)}class zh{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}zh.type="NONE";const Hc=zh;function qs(n,e,t){return`firebase:${n}:${e}:${t}`}class Dn{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=qs(this.userKey,s.apiKey,r),this.fullPersistenceKey=qs("persistence",s.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await nr(this.auth,{idToken:e}).catch(()=>{});return t?Ke._fromGetAccountInfoResponse(this.auth,t,e):null}return Ke._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Dn(ft(Hc),e,i);const s=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let r=s[0]||ft(Hc);const a=qs(i,e.config.apiKey,e.name);let l=null;for(const h of t)try{const f=await h._get(a);if(f){let p;if(typeof f=="string"){const _=await nr(e,{idToken:f}).catch(()=>{});if(!_)break;p=await Ke._fromGetAccountInfoResponse(e,_,f)}else p=Ke._fromJSON(e,f);h!==r&&(l=p),r=h;break}}catch{}const c=s.filter(h=>h._shouldAllowMigration);return!r._shouldAllowMigration||!c.length?new Dn(r,e,i):(r=c[0],l&&await r._set(a,l.toJSON()),await Promise.all(t.map(async h=>{if(h!==r)try{await h._remove(a)}catch{}})),new Dn(r,e,i))}}function qc(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Xh(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Kh(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ed(e))return"Blackberry";if(td(e))return"Webos";if(Qh(e))return"Safari";if((e.includes("chrome/")||Jh(e))&&!e.includes("edge/"))return"Chrome";if(Zh(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function Kh(n=De()){return/firefox\//i.test(n)}function Qh(n=De()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Jh(n=De()){return/crios\//i.test(n)}function Xh(n=De()){return/iemobile/i.test(n)}function Zh(n=De()){return/android/i.test(n)}function ed(n=De()){return/blackberry/i.test(n)}function td(n=De()){return/webos/i.test(n)}function Ra(n=De()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function m0(n=De()){return Ra(n)&&!!window.navigator?.standalone}function _0(){return Im()&&document.documentMode===10}function nd(n=De()){return Ra(n)||Zh(n)||td(n)||ed(n)||/windows phone/i.test(n)||Xh(n)}function id(n,e=[]){let t;switch(n){case"Browser":t=qc(De());break;case"Worker":t=`${qc(De())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Kn}/${i}`}class y0{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=r=>new Promise((a,l)=>{try{const c=e(r);a(c)}catch(c){l(c)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function k0(n,e={}){return Tt(n,"GET","/v2/passwordPolicy",wt(n,e))}const v0=6;class b0{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??v0,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}class E0{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $c(this),this.idTokenSubscription=new $c(this),this.beforeStateQueue=new y0(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qh,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ft(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Dn.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await nr(this,{idToken:e}),i=await Ke._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(He(this.app)){const r=this.app.settings.authIdToken;return r?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(r).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=this.redirectUser?._redirectEventId,a=i?._redirectEventId,l=await this.tryRedirectSignIn(e);(!r||r===a)&&l?.user&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(r){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(r))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ir(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=e0()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(He(this.app))return Promise.reject(mt(this));const t=e?ke(e):null;return t&&G(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return He(this.app)?Promise.reject(mt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return He(this.app)?Promise.reject(mt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ft(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await k0(this),t=new b0(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new es("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await p0(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ft(e)||this._popupRedirectResolver;G(t,this,"argument-error"),this.redirectPersistenceManager=await Dn.create(this,[ft(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const r=typeof t=="function"?t:t.next.bind(t);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(l,this,"internal-error"),l.then(()=>{a||r(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,i,s);return()=>{a=!0,c()}}else{const c=e.addObserver(t);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=id(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(He(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Q_(`Error while retrieving App Check token: ${e.error}`),e?.token}}function xt(n){return ke(n)}class $c{constructor(e){this.auth=e,this.observer=null,this.addObserver=Vm(t=>this.observer=t)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let xr={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function w0(n){xr=n}function sd(n){return xr.loadJS(n)}function T0(){return xr.recaptchaEnterpriseScript}function x0(){return xr.gapiScript}function R0(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class S0{constructor(){this.enterprise=new I0}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class I0{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const A0="recaptcha-enterprise",rd="NO_RECAPTCHA";class P0{constructor(e){this.type=A0,this.auth=xt(e)}async verify(e="verify",t=!1){async function i(r){if(!t){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(a,l)=>{a0(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new o0(c);return r.tenantId==null?r._agentRecaptchaConfig=h:r._tenantRecaptchaConfigs[r.tenantId]=h,a(h.siteKey)}}).catch(c=>{l(c)})})}function s(r,a,l){const c=window.grecaptcha;jc(c)?c.enterprise.ready(()=>{c.enterprise.execute(r,{action:e}).then(h=>{a(h)}).catch(()=>{a(rd)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new S0().execute("siteKey",{action:"verify"}):new Promise((r,a)=>{i(this.auth).then(l=>{if(!t&&jc(window.grecaptcha))s(l,r,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=T0();c.length!==0&&(c+=l),sd(c).then(()=>{s(l,r,a)}).catch(h=>{a(h)})}}).catch(l=>{a(l)})})}}async function Yc(n,e,t,i=!1,s=!1){const r=new P0(n);let a;if(s)a=rd;else try{a=await r.verify(t)}catch{a=await r.verify(t,!0)}const l={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,h=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function sr(n,e,t,i,s){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Yc(n,e,t,t==="getOobCode");return i(n,r)}else return i(n,e).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Yc(n,e,t,t==="getOobCode");return i(n,a)}else return Promise.reject(r)})}function C0(n,e){const t=Tr(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),r=t.getOptions();if(Yt(r,e??{}))return s;ze(s,"already-initialized")}return t.initialize({options:e})}function N0(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(ft);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function L0(n,e,t){const i=xt(n);G(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,r=od(e),{host:a,port:l}=D0(e),c=l===null?"":`:${l}`,h={url:`${r}//${a}${c}/`},f=Object.freeze({host:a,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){G(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),G(Yt(h,i.config.emulator)&&Yt(f,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=f,i.settings.appVerificationDisabledForTesting=!0,yn(a)?(ka(`${r}//${a}${c}`),Fh("Auth",!0)):F0()}function od(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function D0(n){const e=od(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:Wc(i.substr(r.length+1))}}else{const[r,a]=i.split(":");return{host:r,port:Wc(a)}}}function Wc(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function F0(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class Sa{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gt("not implemented")}_getIdTokenResponse(e){return gt("not implemented")}_linkToIdToken(e,t){return gt("not implemented")}_getReauthenticationResolver(e){return gt("not implemented")}}async function V0(n,e){return Tt(n,"POST","/v1/accounts:signUp",e)}async function O0(n,e){return is(n,"POST","/v1/accounts:signInWithPassword",wt(n,e))}async function M0(n,e){return Tt(n,"POST","/v1/accounts:sendOobCode",wt(n,e))}async function j0(n,e){return M0(n,e)}async function U0(n,e){return is(n,"POST","/v1/accounts:signInWithEmailLink",wt(n,e))}async function B0(n,e){return is(n,"POST","/v1/accounts:signInWithEmailLink",wt(n,e))}class Mi extends Sa{constructor(e,t,i,s=null){super("password",i),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Mi(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Mi(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sr(e,t,"signInWithPassword",O0);case"emailLink":return U0(e,{email:this._email,oobCode:this._password});default:ze(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sr(e,i,"signUpPassword",V0);case"emailLink":return B0(e,{idToken:t,email:this._email,oobCode:this._password});default:ze(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Fn(n,e){return is(n,"POST","/v1/accounts:signInWithIdp",wt(n,e))}const H0="http://localhost";class pn extends Sa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new pn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ze("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...r}=t;if(!i||!s)return null;const a=new pn(i,s);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Fn(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Fn(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Fn(e,t)}buildRequest(){const e={requestUri:H0,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ts(t)}return e}}function q0(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $0(n){const e=vi(bi(n)).link,t=e?vi(bi(e)).deep_link_id:null,i=vi(bi(n)).deep_link_id;return(i?vi(bi(i)).link:null)||i||t||e||n}class Ia{constructor(e){const t=vi(bi(e)),i=t.apiKey??null,s=t.oobCode??null,r=q0(t.mode??null);G(i&&s&&r,"argument-error"),this.apiKey=i,this.operation=r,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=$0(e);try{return new Ia(t)}catch{return null}}}class Qn{constructor(){this.providerId=Qn.PROVIDER_ID}static credential(e,t){return Mi._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Ia.parseLink(t);return G(i,"argument-error"),Mi._fromEmailAndCode(e,i.code,i.tenantId)}}Qn.PROVIDER_ID="password";Qn.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Aa{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ss extends Aa{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ft extends ss{constructor(){super("facebook.com")}static credential(e){return pn._fromParams({providerId:Ft.PROVIDER_ID,signInMethod:Ft.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ft.credentialFromTaggedObject(e)}static credentialFromError(e){return Ft.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ft.credential(e.oauthAccessToken)}catch{return null}}}Ft.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ft.PROVIDER_ID="facebook.com";class dt extends ss{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return pn._fromParams({providerId:dt.PROVIDER_ID,signInMethod:dt.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return dt.credentialFromTaggedObject(e)}static credentialFromError(e){return dt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return dt.credential(t,i)}catch{return null}}}dt.GOOGLE_SIGN_IN_METHOD="google.com";dt.PROVIDER_ID="google.com";class Vt extends ss{constructor(){super("github.com")}static credential(e){return pn._fromParams({providerId:Vt.PROVIDER_ID,signInMethod:Vt.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vt.credentialFromTaggedObject(e)}static credentialFromError(e){return Vt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vt.credential(e.oauthAccessToken)}catch{return null}}}Vt.GITHUB_SIGN_IN_METHOD="github.com";Vt.PROVIDER_ID="github.com";class Ot extends ss{constructor(){super("twitter.com")}static credential(e,t){return pn._fromParams({providerId:Ot.PROVIDER_ID,signInMethod:Ot.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ot.credentialFromTaggedObject(e)}static credentialFromError(e){return Ot.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ot.credential(t,i)}catch{return null}}}Ot.TWITTER_SIGN_IN_METHOD="twitter.com";Ot.PROVIDER_ID="twitter.com";async function Y0(n,e){return is(n,"POST","/v1/accounts:signUp",wt(n,e))}class mn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const r=await Ke._fromIdTokenResponse(e,i,s),a=Gc(i);return new mn({user:r,providerId:a,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=Gc(i);return new mn({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function Gc(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class rr extends Et{constructor(e,t,i,s){super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,rr.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new rr(e,t,i,s)}}function ad(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?rr._fromErrorAndOperation(n,r,e,i):r})}async function W0(n,e,t=!1){const i=await Oi(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return mn._forOperation(n,"link",i)}async function G0(n,e,t=!1){const{auth:i}=n;if(He(i.app))return Promise.reject(mt(i));const s="reauthenticate";try{const r=await Oi(n,ad(i,s,e,n),t);G(r.idToken,i,"internal-error");const a=xa(r.idToken);G(a,i,"internal-error");const{sub:l}=a;return G(n.uid===l,i,"user-mismatch"),mn._forOperation(n,s,r)}catch(r){throw r?.code==="auth/user-not-found"&&ze(i,"user-mismatch"),r}}async function ld(n,e,t=!1){if(He(n.app))return Promise.reject(mt(n));const i="signIn",s=await ad(n,i,e),r=await mn._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(r.user),r}async function z0(n,e){return ld(xt(n),e)}async function cd(n){const e=xt(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function K0(n,e,t){const i=xt(n);await sr(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",j0)}async function Q0(n,e,t){if(He(n.app))return Promise.reject(mt(n));const i=xt(n),a=await sr(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Y0).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&cd(n),c}),l=await mn._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function J0(n,e,t){return He(n.app)?Promise.reject(mt(n)):z0(ke(n),Qn.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&cd(n),i})}function X0(n,e,t,i){return ke(n).onIdTokenChanged(e,t,i)}function Z0(n,e,t){return ke(n).beforeAuthStateChanged(e,t)}function ey(n){return ke(n).signOut()}const or="__sak";class ud{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(or,"1"),this.storage.removeItem(or),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const ty=1e3,ny=10;class hd extends ud{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nd(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!t&&this.localCache[i]===a||this.notifyListeners(i,a)},r=this.storage.getItem(i);_0()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,ny):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},ty)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}hd.type="LOCAL";const iy=hd;class dd extends ud{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}dd.type="SESSION";const gd=dd;function sy(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Rr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new Rr(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:r}=t.data,a=this.handlersMap[s];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(async h=>h(t.origin,r)),c=await sy(l);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rr.receivers=[];function Pa(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}class ry{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,a;return new Promise((l,c)=>{const h=Pa("",20);s.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(p){const _=p;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(f),r=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(_.data.response);break;default:clearTimeout(f),clearTimeout(r),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function it(){return window}function oy(n){it().location.href=n}function fd(){return typeof it().WorkerGlobalScope<"u"&&typeof it().importScripts=="function"}async function ay(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ly(){return navigator?.serviceWorker?.controller||null}function cy(){return fd()?self:null}const pd="firebaseLocalStorageDb",uy=1,ar="firebaseLocalStorage",md="fbase_key";class rs{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Sr(n,e){return n.transaction([ar],e?"readwrite":"readonly").objectStore(ar)}function hy(){const n=indexedDB.deleteDatabase(pd);return new rs(n).toPromise()}function Wo(){const n=indexedDB.open(pd,uy);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(ar,{keyPath:md})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(ar)?e(i):(i.close(),await hy(),e(await Wo()))})})}async function zc(n,e,t){const i=Sr(n,!0).put({[md]:e,value:t});return new rs(i).toPromise()}async function dy(n,e){const t=Sr(n,!1).get(e),i=await new rs(t).toPromise();return i===void 0?null:i.value}function Kc(n,e){const t=Sr(n,!0).delete(e);return new rs(t).toPromise()}const gy=800,fy=3;class _d{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wo(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>fy)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fd()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rr._getInstance(cy()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await ay(),!this.activeServiceWorker)return;this.sender=new ry(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ly()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wo();return await zc(e,or,"1"),await Kc(e,or),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>zc(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>dy(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Kc(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=Sr(s,!1).getAll();return new rs(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gy)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_d.type="LOCAL";const py=_d;new ns(3e4,6e4);function yd(n,e){return e?ft(e):(G(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Ca extends Sa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Fn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Fn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function my(n){return ld(n.auth,new Ca(n),n.bypassAuthState)}function _y(n){const{auth:e,user:t}=n;return G(t,e,"internal-error"),G0(t,new Ca(n),n.bypassAuthState)}async function yy(n){const{auth:e,user:t}=n;return G(t,e,"internal-error"),W0(t,new Ca(n),n.bypassAuthState)}class kd{constructor(e,t,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:r,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:t,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return my;case"linkViaPopup":case"linkViaRedirect":return yy;case"reauthViaPopup":case"reauthViaRedirect":return _y;default:ze(this.auth,"internal-error")}}resolve(e){kt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){kt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ky=new ns(2e3,1e4);async function vy(n,e,t){if(He(n.app))return Promise.reject(Qe(n,"operation-not-supported-in-this-environment"));const i=xt(n);J_(n,e,Aa);const s=yd(i,t);return new hn(i,"signInViaPopup",e,s).executeNotNull()}class hn extends kd{constructor(e,t,i,s,r){super(e,t,s,r),this.provider=i,this.authWindow=null,this.pollId=null,hn.currentPopupAction&&hn.currentPopupAction.cancel(),hn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return G(e,this.auth,"internal-error"),e}async onExecution(){kt(this.filter.length===1,"Popup operations only handle one event");const e=Pa();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Qe(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Qe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hn.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qe(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ky.get())};e()}}hn.currentPopupAction=null;const by="pendingRedirect",$s=new Map;class Ey extends kd{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=$s.get(this.auth._key());if(!e){try{const i=await wy(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}$s.set(this.auth._key(),e)}return this.bypassAuthState||$s.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wy(n,e){const t=Ry(e),i=xy(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function Ty(n,e){$s.set(n._key(),e)}function xy(n){return ft(n._redirectPersistence)}function Ry(n){return qs(by,n.config.apiKey,n.name)}async function Sy(n,e,t=!1){if(He(n.app))return Promise.reject(mt(n));const i=xt(n),s=yd(i,e),a=await new Ey(i,s,t).execute();return a&&!t&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}const Iy=600*1e3;class Ay{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Py(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!vd(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Qe(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Iy&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qc(e))}saveEventToCache(e){this.cachedEventUids.add(Qc(e)),this.lastProcessedEventTime=Date.now()}}function Qc(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function vd({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Py(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vd(n);default:return!1}}async function Cy(n,e={}){return Tt(n,"GET","/v1/projects",e)}const Ny=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ly=/^https?/;async function Dy(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Cy(n);for(const t of e)try{if(Fy(t))return}catch{}ze(n,"unauthorized-domain")}function Fy(n){const e=$o(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===i}if(!Ly.test(t))return!1;if(Ny.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const Vy=new ns(3e4,6e4);function Jc(){const n=it().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Oy(n){return new Promise((e,t)=>{function i(){Jc(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Jc(),t(Qe(n,"network-request-failed"))},timeout:Vy.get()})}if(it().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(it().gapi?.load)i();else{const s=R0("iframefcb");return it()[s]=()=>{gapi.load?i():t(Qe(n,"network-request-failed"))},sd(`${x0()}?onload=${s}`).catch(r=>t(r))}}).catch(e=>{throw Ys=null,e})}let Ys=null;function My(n){return Ys=Ys||Oy(n),Ys}const jy=new ns(5e3,15e3),Uy="__/auth/iframe",By="emulator/auth/iframe",Hy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $y(n){const e=n.config;G(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Ta(e,By):`https://${n.config.authDomain}/${Uy}`,i={apiKey:e.apiKey,appName:n.name,v:Kn},s=qy.get(n.config.apiHost);s&&(i.eid=s);const r=n._getFrameworks();return r.length&&(i.fw=r.join(",")),`${t}?${ts(i).slice(1)}`}async function Yy(n){const e=await My(n),t=it().gapi;return G(t,n,"internal-error"),e.open({where:document.body,url:$y(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hy,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const a=Qe(n,"network-request-failed"),l=it().setTimeout(()=>{r(a)},jy.get());function c(){it().clearTimeout(l),s(i)}i.ping(c).then(c,()=>{r(a)})}))}const Wy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Gy=500,zy=600,Ky="_blank",Qy="http://localhost";class Xc{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Jy(n,e,t,i=Gy,s=zy){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const c={...Wy,width:i.toString(),height:s.toString(),top:r,left:a},h=De().toLowerCase();t&&(l=Jh(h)?Ky:t),Kh(h)&&(e=e||Qy,c.scrollbars="yes");const f=Object.entries(c).reduce((_,[b,R])=>`${_}${b}=${R},`,"");if(m0(h)&&l!=="_self")return Xy(e||"",l),new Xc(null);const p=window.open(e||"",l,f);G(p,n,"popup-blocked");try{p.focus()}catch{}return new Xc(p)}function Xy(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const Zy="__/auth/handler",ek="emulator/auth/handler",tk=encodeURIComponent("fac");async function Zc(n,e,t,i,s,r){G(n.config.authDomain,n,"auth-domain-config-required"),G(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Kn,eventId:s};if(e instanceof Aa){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",Fm(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))a[f]=p}if(e instanceof ss){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(a.scopes=f.join(","))}n.tenantId&&(a.tid=n.tenantId);const l=a;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await n._getAppCheckToken(),h=c?`#${tk}=${encodeURIComponent(c)}`:"";return`${nk(n)}?${ts(l).slice(1)}${h}`}function nk({config:n}){return n.emulator?Ta(n,ek):`https://${n.authDomain}/${Zy}`}const Io="webStorageSupport";class ik{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gd,this._completeRedirectFn=Sy,this._overrideRedirectResult=Ty}async _openPopup(e,t,i,s){kt(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const r=await Zc(e,t,i,$o(),s);return Jy(e,r,Pa())}async _openRedirect(e,t,i,s){await this._originValidation(e);const r=await Zc(e,t,i,$o(),s);return oy(r),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:r}=this.eventManagers[t];return s?Promise.resolve(s):(kt(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await Yy(e),i=new Ay(e);return t.register("authEvent",s=>(G(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Io,{type:Io},s=>{const r=s?.[0]?.[Io];r!==void 0&&t(!!r),ze(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Dy(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return nd()||Qh()||Ra()}}const sk=ik;var eu="@firebase/auth",tu="1.12.0";class rk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ok(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ak(n){Mn(new fn("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;G(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:a,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:id(n)},h=new E0(i,s,r,c);return N0(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Mn(new fn("auth-internal",e=>{const t=xt(e.getProvider("auth").getImmediate());return(i=>new rk(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bt(eu,tu,ok(n)),Bt(eu,tu,"esm2020")}const lk=300,ck=Dh("authIdTokenMaxAge")||lk;let nu=null;const uk=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>ck)return;const s=t?.token;nu!==s&&(nu=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function hk(n=jh()){const e=Tr(n,"auth");if(e.isInitialized())return e.getImmediate();const t=C0(n,{popupRedirectResolver:sk,persistence:[py,iy,gd]}),i=Dh("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const a=uk(r.toString());Z0(t,a,()=>a(t.currentUser)),X0(t,l=>a(l))}}const s=Nh("auth");return s&&L0(t,`http://${s}`),t}function dk(){return document.getElementsByTagName("head")?.[0]??document}w0({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const r=Qe("internal-error");r.customData=s,t(r)},i.type="text/javascript",i.charset="UTF-8",dk().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ak("Browser");var iu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ht,bd;(function(){var n;function e(E,k){function v(){}v.prototype=k.prototype,E.F=k.prototype,E.prototype=new v,E.prototype.constructor=E,E.D=function(T,w,S){for(var y=Array(arguments.length-2),$=2;$<arguments.length;$++)y[$-2]=arguments[$];return k.prototype[w].apply(T,y)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,k,v){v||(v=0);const T=Array(16);if(typeof k=="string")for(var w=0;w<16;++w)T[w]=k.charCodeAt(v++)|k.charCodeAt(v++)<<8|k.charCodeAt(v++)<<16|k.charCodeAt(v++)<<24;else for(w=0;w<16;++w)T[w]=k[v++]|k[v++]<<8|k[v++]<<16|k[v++]<<24;k=E.g[0],v=E.g[1],w=E.g[2];let S=E.g[3],y;y=k+(S^v&(w^S))+T[0]+3614090360&4294967295,k=v+(y<<7&4294967295|y>>>25),y=S+(w^k&(v^w))+T[1]+3905402710&4294967295,S=k+(y<<12&4294967295|y>>>20),y=w+(v^S&(k^v))+T[2]+606105819&4294967295,w=S+(y<<17&4294967295|y>>>15),y=v+(k^w&(S^k))+T[3]+3250441966&4294967295,v=w+(y<<22&4294967295|y>>>10),y=k+(S^v&(w^S))+T[4]+4118548399&4294967295,k=v+(y<<7&4294967295|y>>>25),y=S+(w^k&(v^w))+T[5]+1200080426&4294967295,S=k+(y<<12&4294967295|y>>>20),y=w+(v^S&(k^v))+T[6]+2821735955&4294967295,w=S+(y<<17&4294967295|y>>>15),y=v+(k^w&(S^k))+T[7]+4249261313&4294967295,v=w+(y<<22&4294967295|y>>>10),y=k+(S^v&(w^S))+T[8]+1770035416&4294967295,k=v+(y<<7&4294967295|y>>>25),y=S+(w^k&(v^w))+T[9]+2336552879&4294967295,S=k+(y<<12&4294967295|y>>>20),y=w+(v^S&(k^v))+T[10]+4294925233&4294967295,w=S+(y<<17&4294967295|y>>>15),y=v+(k^w&(S^k))+T[11]+2304563134&4294967295,v=w+(y<<22&4294967295|y>>>10),y=k+(S^v&(w^S))+T[12]+1804603682&4294967295,k=v+(y<<7&4294967295|y>>>25),y=S+(w^k&(v^w))+T[13]+4254626195&4294967295,S=k+(y<<12&4294967295|y>>>20),y=w+(v^S&(k^v))+T[14]+2792965006&4294967295,w=S+(y<<17&4294967295|y>>>15),y=v+(k^w&(S^k))+T[15]+1236535329&4294967295,v=w+(y<<22&4294967295|y>>>10),y=k+(w^S&(v^w))+T[1]+4129170786&4294967295,k=v+(y<<5&4294967295|y>>>27),y=S+(v^w&(k^v))+T[6]+3225465664&4294967295,S=k+(y<<9&4294967295|y>>>23),y=w+(k^v&(S^k))+T[11]+643717713&4294967295,w=S+(y<<14&4294967295|y>>>18),y=v+(S^k&(w^S))+T[0]+3921069994&4294967295,v=w+(y<<20&4294967295|y>>>12),y=k+(w^S&(v^w))+T[5]+3593408605&4294967295,k=v+(y<<5&4294967295|y>>>27),y=S+(v^w&(k^v))+T[10]+38016083&4294967295,S=k+(y<<9&4294967295|y>>>23),y=w+(k^v&(S^k))+T[15]+3634488961&4294967295,w=S+(y<<14&4294967295|y>>>18),y=v+(S^k&(w^S))+T[4]+3889429448&4294967295,v=w+(y<<20&4294967295|y>>>12),y=k+(w^S&(v^w))+T[9]+568446438&4294967295,k=v+(y<<5&4294967295|y>>>27),y=S+(v^w&(k^v))+T[14]+3275163606&4294967295,S=k+(y<<9&4294967295|y>>>23),y=w+(k^v&(S^k))+T[3]+4107603335&4294967295,w=S+(y<<14&4294967295|y>>>18),y=v+(S^k&(w^S))+T[8]+1163531501&4294967295,v=w+(y<<20&4294967295|y>>>12),y=k+(w^S&(v^w))+T[13]+2850285829&4294967295,k=v+(y<<5&4294967295|y>>>27),y=S+(v^w&(k^v))+T[2]+4243563512&4294967295,S=k+(y<<9&4294967295|y>>>23),y=w+(k^v&(S^k))+T[7]+1735328473&4294967295,w=S+(y<<14&4294967295|y>>>18),y=v+(S^k&(w^S))+T[12]+2368359562&4294967295,v=w+(y<<20&4294967295|y>>>12),y=k+(v^w^S)+T[5]+4294588738&4294967295,k=v+(y<<4&4294967295|y>>>28),y=S+(k^v^w)+T[8]+2272392833&4294967295,S=k+(y<<11&4294967295|y>>>21),y=w+(S^k^v)+T[11]+1839030562&4294967295,w=S+(y<<16&4294967295|y>>>16),y=v+(w^S^k)+T[14]+4259657740&4294967295,v=w+(y<<23&4294967295|y>>>9),y=k+(v^w^S)+T[1]+2763975236&4294967295,k=v+(y<<4&4294967295|y>>>28),y=S+(k^v^w)+T[4]+1272893353&4294967295,S=k+(y<<11&4294967295|y>>>21),y=w+(S^k^v)+T[7]+4139469664&4294967295,w=S+(y<<16&4294967295|y>>>16),y=v+(w^S^k)+T[10]+3200236656&4294967295,v=w+(y<<23&4294967295|y>>>9),y=k+(v^w^S)+T[13]+681279174&4294967295,k=v+(y<<4&4294967295|y>>>28),y=S+(k^v^w)+T[0]+3936430074&4294967295,S=k+(y<<11&4294967295|y>>>21),y=w+(S^k^v)+T[3]+3572445317&4294967295,w=S+(y<<16&4294967295|y>>>16),y=v+(w^S^k)+T[6]+76029189&4294967295,v=w+(y<<23&4294967295|y>>>9),y=k+(v^w^S)+T[9]+3654602809&4294967295,k=v+(y<<4&4294967295|y>>>28),y=S+(k^v^w)+T[12]+3873151461&4294967295,S=k+(y<<11&4294967295|y>>>21),y=w+(S^k^v)+T[15]+530742520&4294967295,w=S+(y<<16&4294967295|y>>>16),y=v+(w^S^k)+T[2]+3299628645&4294967295,v=w+(y<<23&4294967295|y>>>9),y=k+(w^(v|~S))+T[0]+4096336452&4294967295,k=v+(y<<6&4294967295|y>>>26),y=S+(v^(k|~w))+T[7]+1126891415&4294967295,S=k+(y<<10&4294967295|y>>>22),y=w+(k^(S|~v))+T[14]+2878612391&4294967295,w=S+(y<<15&4294967295|y>>>17),y=v+(S^(w|~k))+T[5]+4237533241&4294967295,v=w+(y<<21&4294967295|y>>>11),y=k+(w^(v|~S))+T[12]+1700485571&4294967295,k=v+(y<<6&4294967295|y>>>26),y=S+(v^(k|~w))+T[3]+2399980690&4294967295,S=k+(y<<10&4294967295|y>>>22),y=w+(k^(S|~v))+T[10]+4293915773&4294967295,w=S+(y<<15&4294967295|y>>>17),y=v+(S^(w|~k))+T[1]+2240044497&4294967295,v=w+(y<<21&4294967295|y>>>11),y=k+(w^(v|~S))+T[8]+1873313359&4294967295,k=v+(y<<6&4294967295|y>>>26),y=S+(v^(k|~w))+T[15]+4264355552&4294967295,S=k+(y<<10&4294967295|y>>>22),y=w+(k^(S|~v))+T[6]+2734768916&4294967295,w=S+(y<<15&4294967295|y>>>17),y=v+(S^(w|~k))+T[13]+1309151649&4294967295,v=w+(y<<21&4294967295|y>>>11),y=k+(w^(v|~S))+T[4]+4149444226&4294967295,k=v+(y<<6&4294967295|y>>>26),y=S+(v^(k|~w))+T[11]+3174756917&4294967295,S=k+(y<<10&4294967295|y>>>22),y=w+(k^(S|~v))+T[2]+718787259&4294967295,w=S+(y<<15&4294967295|y>>>17),y=v+(S^(w|~k))+T[9]+3951481745&4294967295,E.g[0]=E.g[0]+k&4294967295,E.g[1]=E.g[1]+(w+(y<<21&4294967295|y>>>11))&4294967295,E.g[2]=E.g[2]+w&4294967295,E.g[3]=E.g[3]+S&4294967295}i.prototype.v=function(E,k){k===void 0&&(k=E.length);const v=k-this.blockSize,T=this.C;let w=this.h,S=0;for(;S<k;){if(w==0)for(;S<=v;)s(this,E,S),S+=this.blockSize;if(typeof E=="string"){for(;S<k;)if(T[w++]=E.charCodeAt(S++),w==this.blockSize){s(this,T),w=0;break}}else for(;S<k;)if(T[w++]=E[S++],w==this.blockSize){s(this,T),w=0;break}}this.h=w,this.o+=k},i.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var k=1;k<E.length-8;++k)E[k]=0;k=this.o*8;for(var v=E.length-8;v<E.length;++v)E[v]=k&255,k/=256;for(this.v(E),E=Array(16),k=0,v=0;v<4;++v)for(let T=0;T<32;T+=8)E[k++]=this.g[v]>>>T&255;return E};function r(E,k){var v=l;return Object.prototype.hasOwnProperty.call(v,E)?v[E]:v[E]=k(E)}function a(E,k){this.h=k;const v=[];let T=!0;for(let w=E.length-1;w>=0;w--){const S=E[w]|0;T&&S==k||(v[w]=S,T=!1)}this.g=v}var l={};function c(E){return-128<=E&&E<128?r(E,function(k){return new a([k|0],k<0?-1:0)}):new a([E|0],E<0?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return p;if(E<0)return I(h(-E));const k=[];let v=1;for(let T=0;E>=v;T++)k[T]=E/v|0,v*=4294967296;return new a(k,0)}function f(E,k){if(E.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(E.charAt(0)=="-")return I(f(E.substring(1),k));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const v=h(Math.pow(k,8));let T=p;for(let S=0;S<E.length;S+=8){var w=Math.min(8,E.length-S);const y=parseInt(E.substring(S,S+w),k);w<8?(w=h(Math.pow(k,w)),T=T.j(w).add(h(y))):(T=T.j(v),T=T.add(h(y)))}return T}var p=c(0),_=c(1),b=c(16777216);n=a.prototype,n.m=function(){if(A(this))return-I(this).m();let E=0,k=1;for(let v=0;v<this.g.length;v++){const T=this.i(v);E+=(T>=0?T:4294967296+T)*k,k*=4294967296}return E},n.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(R(this))return"0";if(A(this))return"-"+I(this).toString(E);const k=h(Math.pow(E,6));var v=this;let T="";for(;;){const w=U(v,k).g;v=D(v,w.j(k));let S=((v.g.length>0?v.g[0]:v.h)>>>0).toString(E);if(v=w,R(v))return S+T;for(;S.length<6;)S="0"+S;T=S+T}},n.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function R(E){if(E.h!=0)return!1;for(let k=0;k<E.g.length;k++)if(E.g[k]!=0)return!1;return!0}function A(E){return E.h==-1}n.l=function(E){return E=D(this,E),A(E)?-1:R(E)?0:1};function I(E){const k=E.g.length,v=[];for(let T=0;T<k;T++)v[T]=~E.g[T];return new a(v,~E.h).add(_)}n.abs=function(){return A(this)?I(this):this},n.add=function(E){const k=Math.max(this.g.length,E.g.length),v=[];let T=0;for(let w=0;w<=k;w++){let S=T+(this.i(w)&65535)+(E.i(w)&65535),y=(S>>>16)+(this.i(w)>>>16)+(E.i(w)>>>16);T=y>>>16,S&=65535,y&=65535,v[w]=y<<16|S}return new a(v,v[v.length-1]&-2147483648?-1:0)};function D(E,k){return E.add(I(k))}n.j=function(E){if(R(this)||R(E))return p;if(A(this))return A(E)?I(this).j(I(E)):I(I(this).j(E));if(A(E))return I(this.j(I(E)));if(this.l(b)<0&&E.l(b)<0)return h(this.m()*E.m());const k=this.g.length+E.g.length,v=[];for(var T=0;T<2*k;T++)v[T]=0;for(T=0;T<this.g.length;T++)for(let w=0;w<E.g.length;w++){const S=this.i(T)>>>16,y=this.i(T)&65535,$=E.i(w)>>>16,re=E.i(w)&65535;v[2*T+2*w]+=y*re,C(v,2*T+2*w),v[2*T+2*w+1]+=S*re,C(v,2*T+2*w+1),v[2*T+2*w+1]+=y*$,C(v,2*T+2*w+1),v[2*T+2*w+2]+=S*$,C(v,2*T+2*w+2)}for(E=0;E<k;E++)v[E]=v[2*E+1]<<16|v[2*E];for(E=k;E<2*k;E++)v[E]=0;return new a(v,0)};function C(E,k){for(;(E[k]&65535)!=E[k];)E[k+1]+=E[k]>>>16,E[k]&=65535,k++}function V(E,k){this.g=E,this.h=k}function U(E,k){if(R(k))throw Error("division by zero");if(R(E))return new V(p,p);if(A(E))return k=U(I(E),k),new V(I(k.g),I(k.h));if(A(k))return k=U(E,I(k)),new V(I(k.g),k.h);if(E.g.length>30){if(A(E)||A(k))throw Error("slowDivide_ only works with positive integers.");for(var v=_,T=k;T.l(E)<=0;)v=q(v),T=q(T);var w=B(v,1),S=B(T,1);for(T=B(T,2),v=B(v,2);!R(T);){var y=S.add(T);y.l(E)<=0&&(w=w.add(v),S=y),T=B(T,1),v=B(v,1)}return k=D(E,w.j(k)),new V(w,k)}for(w=p;E.l(k)>=0;){for(v=Math.max(1,Math.floor(E.m()/k.m())),T=Math.ceil(Math.log(v)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),S=h(v),y=S.j(k);A(y)||y.l(E)>0;)v-=T,S=h(v),y=S.j(k);R(S)&&(S=_),w=w.add(S),E=D(E,y)}return new V(w,E)}n.B=function(E){return U(this,E).h},n.and=function(E){const k=Math.max(this.g.length,E.g.length),v=[];for(let T=0;T<k;T++)v[T]=this.i(T)&E.i(T);return new a(v,this.h&E.h)},n.or=function(E){const k=Math.max(this.g.length,E.g.length),v=[];for(let T=0;T<k;T++)v[T]=this.i(T)|E.i(T);return new a(v,this.h|E.h)},n.xor=function(E){const k=Math.max(this.g.length,E.g.length),v=[];for(let T=0;T<k;T++)v[T]=this.i(T)^E.i(T);return new a(v,this.h^E.h)};function q(E){const k=E.g.length+1,v=[];for(let T=0;T<k;T++)v[T]=E.i(T)<<1|E.i(T-1)>>>31;return new a(v,E.h)}function B(E,k){const v=k>>5;k%=32;const T=E.g.length-v,w=[];for(let S=0;S<T;S++)w[S]=k>0?E.i(S+v)>>>k|E.i(S+v+1)<<32-k:E.i(S+v);return new a(w,E.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,bd=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,Ht=a}).apply(typeof iu<"u"?iu:typeof self<"u"?self:typeof window<"u"?window:{});var Ls=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ed,Ei,wd,Ws,Go,Td,xd,Rd;(function(){var n,e=Object.defineProperty;function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ls=="object"&&Ls];for(var u=0;u<o.length;++u){var g=o[u];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=t(this);function s(o,u){if(u)e:{var g=i;o=o.split(".");for(var m=0;m<o.length-1;m++){var P=o[m];if(!(P in g))break e;g=g[P]}o=o[o.length-1],m=g[o],u=u(m),u!=m&&u!=null&&e(g,o,{configurable:!0,writable:!0,value:u})}}s("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(o){return o||function(u){var g=[],m;for(m in u)Object.prototype.hasOwnProperty.call(u,m)&&g.push([m,u[m]]);return g}});var r=r||{},a=this||self;function l(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function c(o,u,g){return o.call.apply(o.bind,arguments)}function h(o,u,g){return h=c,h.apply(null,arguments)}function f(o,u){var g=Array.prototype.slice.call(arguments,1);return function(){var m=g.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function p(o,u){function g(){}g.prototype=u.prototype,o.Z=u.prototype,o.prototype=new g,o.prototype.constructor=o,o.Ob=function(m,P,N){for(var O=Array(arguments.length-2),K=2;K<arguments.length;K++)O[K-2]=arguments[K];return u.prototype[P].apply(m,O)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function b(o){const u=o.length;if(u>0){const g=Array(u);for(let m=0;m<u;m++)g[m]=o[m];return g}return[]}function R(o,u){for(let m=1;m<arguments.length;m++){const P=arguments[m];var g=typeof P;if(g=g!="object"?g:P?Array.isArray(P)?"array":g:"null",g=="array"||g=="object"&&typeof P.length=="number"){g=o.length||0;const N=P.length||0;o.length=g+N;for(let O=0;O<N;O++)o[g+O]=P[O]}else o.push(P)}}class A{constructor(u,g){this.i=u,this.j=g,this.h=0,this.g=null}get(){let u;return this.h>0?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function I(o){a.setTimeout(()=>{throw o},0)}function D(){var o=E;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class C{constructor(){this.h=this.g=null}add(u,g){const m=V.get();m.set(u,g),this.h?this.h.next=m:this.g=m,this.h=m}}var V=new A(()=>new U,o=>o.reset());class U{constructor(){this.next=this.g=this.h=null}set(u,g){this.h=u,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let q,B=!1,E=new C,k=()=>{const o=Promise.resolve(void 0);q=()=>{o.then(v)}};function v(){for(var o;o=D();){try{o.h.call(o.g)}catch(g){I(g)}var u=V;u.j(o),u.h<100&&(u.h++,o.next=u.g,u.g=o)}B=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var S=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const g=()=>{};a.addEventListener("test",g,u),a.removeEventListener("test",g,u)}catch{}return o})();function y(o){return/^[\s\xa0]*$/.test(o)}function $(o,u){w.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,u)}p($,w),$.prototype.init=function(o,u){const g=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget,u||(g=="mouseover"?u=o.fromElement:g=="mouseout"&&(u=o.toElement)),this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&$.Z.h.call(this)},$.prototype.h=function(){$.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var re="closure_listenable_"+(Math.random()*1e6|0),Re=0;function bn(o,u,g,m,P){this.listener=o,this.proxy=null,this.src=u,this.type=g,this.capture=!!m,this.ha=P,this.key=++Re,this.da=this.fa=!1}function St(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function ht(o,u,g){for(const m in o)u.call(g,o[m],m,o)}function _s(o,u){for(const g in o)u.call(void 0,o[g],g,o)}function En(o){const u={};for(const g in o)u[g]=o[g];return u}const vl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bl(o,u){let g,m;for(let P=1;P<arguments.length;P++){m=arguments[P];for(g in m)o[g]=m[g];for(let N=0;N<vl.length;N++)g=vl[N],Object.prototype.hasOwnProperty.call(m,g)&&(o[g]=m[g])}}function ys(o){this.src=o,this.g={},this.h=0}ys.prototype.add=function(o,u,g,m,P){const N=o.toString();o=this.g[N],o||(o=this.g[N]=[],this.h++);const O=Kr(o,u,m,P);return O>-1?(u=o[O],g||(u.fa=!1)):(u=new bn(u,this.src,N,!!m,P),u.fa=g,o.push(u)),u};function zr(o,u){const g=u.type;if(g in o.g){var m=o.g[g],P=Array.prototype.indexOf.call(m,u,void 0),N;(N=P>=0)&&Array.prototype.splice.call(m,P,1),N&&(St(u),o.g[g].length==0&&(delete o.g[g],o.h--))}}function Kr(o,u,g,m){for(let P=0;P<o.length;++P){const N=o[P];if(!N.da&&N.listener==u&&N.capture==!!g&&N.ha==m)return P}return-1}var Qr="closure_lm_"+(Math.random()*1e6|0),Jr={};function El(o,u,g,m,P){if(Array.isArray(u)){for(let N=0;N<u.length;N++)El(o,u[N],g,m,P);return null}return g=xl(g),o&&o[re]?o.J(u,g,l(m)?!!m.capture:!1,P):nf(o,u,g,!1,m,P)}function nf(o,u,g,m,P,N){if(!u)throw Error("Invalid event type");const O=l(P)?!!P.capture:!!P;let K=Zr(o);if(K||(o[Qr]=K=new ys(o)),g=K.add(u,g,m,O,N),g.proxy)return g;if(m=sf(),g.proxy=m,m.src=o,m.listener=g,o.addEventListener)S||(P=O),P===void 0&&(P=!1),o.addEventListener(u.toString(),m,P);else if(o.attachEvent)o.attachEvent(Tl(u.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return g}function sf(){function o(g){return u.call(o.src,o.listener,g)}const u=rf;return o}function wl(o,u,g,m,P){if(Array.isArray(u))for(var N=0;N<u.length;N++)wl(o,u[N],g,m,P);else m=l(m)?!!m.capture:!!m,g=xl(g),o&&o[re]?(o=o.i,N=String(u).toString(),N in o.g&&(u=o.g[N],g=Kr(u,g,m,P),g>-1&&(St(u[g]),Array.prototype.splice.call(u,g,1),u.length==0&&(delete o.g[N],o.h--)))):o&&(o=Zr(o))&&(u=o.g[u.toString()],o=-1,u&&(o=Kr(u,g,m,P)),(g=o>-1?u[o]:null)&&Xr(g))}function Xr(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[re])zr(u.i,o);else{var g=o.type,m=o.proxy;u.removeEventListener?u.removeEventListener(g,m,o.capture):u.detachEvent?u.detachEvent(Tl(g),m):u.addListener&&u.removeListener&&u.removeListener(m),(g=Zr(u))?(zr(g,o),g.h==0&&(g.src=null,u[Qr]=null)):St(o)}}}function Tl(o){return o in Jr?Jr[o]:Jr[o]="on"+o}function rf(o,u){if(o.da)o=!0;else{u=new $(u,this);const g=o.listener,m=o.ha||o.src;o.fa&&Xr(o),o=g.call(m,u)}return o}function Zr(o){return o=o[Qr],o instanceof ys?o:null}var eo="__closure_events_fn_"+(Math.random()*1e9>>>0);function xl(o){return typeof o=="function"?o:(o[eo]||(o[eo]=function(u){return o.handleEvent(u)}),o[eo])}function Ce(){T.call(this),this.i=new ys(this),this.M=this,this.G=null}p(Ce,T),Ce.prototype[re]=!0,Ce.prototype.removeEventListener=function(o,u,g,m){wl(this,o,u,g,m)};function Fe(o,u){var g,m=o.G;if(m)for(g=[];m;m=m.G)g.push(m);if(o=o.M,m=u.type||u,typeof u=="string")u=new w(u,o);else if(u instanceof w)u.target=u.target||o;else{var P=u;u=new w(m,o),bl(u,P)}P=!0;let N,O;if(g)for(O=g.length-1;O>=0;O--)N=u.g=g[O],P=ks(N,m,!0,u)&&P;if(N=u.g=o,P=ks(N,m,!0,u)&&P,P=ks(N,m,!1,u)&&P,g)for(O=0;O<g.length;O++)N=u.g=g[O],P=ks(N,m,!1,u)&&P}Ce.prototype.N=function(){if(Ce.Z.N.call(this),this.i){var o=this.i;for(const u in o.g){const g=o.g[u];for(let m=0;m<g.length;m++)St(g[m]);delete o.g[u],o.h--}}this.G=null},Ce.prototype.J=function(o,u,g,m){return this.i.add(String(o),u,!1,g,m)},Ce.prototype.K=function(o,u,g,m){return this.i.add(String(o),u,!0,g,m)};function ks(o,u,g,m){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();let P=!0;for(let N=0;N<u.length;++N){const O=u[N];if(O&&!O.da&&O.capture==g){const K=O.listener,ve=O.ha||O.src;O.fa&&zr(o.i,O),P=K.call(ve,m)!==!1&&P}}return P&&!m.defaultPrevented}function of(o,u){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=h(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(u)>2147483647?-1:a.setTimeout(o,u||0)}function Rl(o){o.g=of(()=>{o.g=null,o.i&&(o.i=!1,Rl(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class af extends T{constructor(u,g){super(),this.m=u,this.l=g,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Rl(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ni(o){T.call(this),this.h=o,this.g={}}p(ni,T);var Sl=[];function Il(o){ht(o.g,function(u,g){this.g.hasOwnProperty(g)&&Xr(u)},o),o.g={}}ni.prototype.N=function(){ni.Z.N.call(this),Il(this)},ni.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var to=a.JSON.stringify,lf=a.JSON.parse,cf=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function Al(){}function Pl(){}var ii={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function no(){w.call(this,"d")}p(no,w);function io(){w.call(this,"c")}p(io,w);var nn={},Cl=null;function vs(){return Cl=Cl||new Ce}nn.Ia="serverreachability";function Nl(o){w.call(this,nn.Ia,o)}p(Nl,w);function si(o){const u=vs();Fe(u,new Nl(u))}nn.STAT_EVENT="statevent";function Ll(o,u){w.call(this,nn.STAT_EVENT,o),this.stat=u}p(Ll,w);function Ve(o){const u=vs();Fe(u,new Ll(u,o))}nn.Ja="timingevent";function Dl(o,u){w.call(this,nn.Ja,o),this.size=u}p(Dl,w);function ri(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},u)}function oi(){this.g=!0}oi.prototype.ua=function(){this.g=!1};function uf(o,u,g,m,P,N){o.info(function(){if(o.g)if(N){var O="",K=N.split("&");for(let se=0;se<K.length;se++){var ve=K[se].split("=");if(ve.length>1){const we=ve[0];ve=ve[1];const tt=we.split("_");O=tt.length>=2&&tt[1]=="type"?O+(we+"="+ve+"&"):O+(we+"=redacted&")}}}else O=null;else O=N;return"XMLHTTP REQ ("+m+") [attempt "+P+"]: "+u+`
`+g+`
`+O})}function hf(o,u,g,m,P,N,O){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+P+"]: "+u+`
`+g+`
`+N+" "+O})}function wn(o,u,g,m){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+gf(o,g)+(m?" "+m:"")})}function df(o,u){o.info(function(){return"TIMEOUT: "+u})}oi.prototype.info=function(){};function gf(o,u){if(!o.g)return u;if(!u)return null;try{const N=JSON.parse(u);if(N){for(o=0;o<N.length;o++)if(Array.isArray(N[o])){var g=N[o];if(!(g.length<2)){var m=g[1];if(Array.isArray(m)&&!(m.length<1)){var P=m[0];if(P!="noop"&&P!="stop"&&P!="close")for(let O=1;O<m.length;O++)m[O]=""}}}}return to(N)}catch{return u}}var bs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Fl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Vl;function so(){}p(so,Al),so.prototype.g=function(){return new XMLHttpRequest},Vl=new so;function ai(o){return encodeURIComponent(String(o))}function ff(o){var u=1;o=o.split(":");const g=[];for(;u>0&&o.length;)g.push(o.shift()),u--;return o.length&&g.push(o.join(":")),g}function It(o,u,g,m){this.j=o,this.i=u,this.l=g,this.S=m||1,this.V=new ni(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ol}function Ol(){this.i=null,this.g="",this.h=!1}var Ml={},ro={};function oo(o,u,g){o.M=1,o.A=ws(et(u)),o.u=g,o.R=!0,jl(o,null)}function jl(o,u){o.F=Date.now(),Es(o),o.B=et(o.A);var g=o.B,m=o.S;Array.isArray(m)||(m=[String(m)]),Xl(g.i,"t",m),o.C=0,g=o.j.L,o.h=new Ol,o.g=mc(o.j,g?u:null,!o.u),o.P>0&&(o.O=new af(h(o.Y,o,o.g),o.P)),u=o.V,g=o.g,m=o.ba;var P="readystatechange";Array.isArray(P)||(P&&(Sl[0]=P.toString()),P=Sl);for(let N=0;N<P.length;N++){const O=El(g,P[N],m||u.handleEvent,!1,u.h||u);if(!O)break;u.g[O.key]=O}u=o.J?En(o.J):{},o.u?(o.v||(o.v="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,u)):(o.v="GET",o.g.ea(o.B,o.v,null,u)),si(),uf(o.i,o.v,o.B,o.l,o.S,o.u)}It.prototype.ba=function(o){o=o.target;const u=this.O;u&&Ct(o)==3?u.j():this.Y(o)},It.prototype.Y=function(o){try{if(o==this.g)e:{const K=Ct(this.g),ve=this.g.ya(),se=this.g.ca();if(!(K<3)&&(K!=3||this.g&&(this.h.h||this.g.la()||rc(this.g)))){this.K||K!=4||ve==7||(ve==8||se<=0?si(3):si(2)),ao(this);var u=this.g.ca();this.X=u;var g=pf(this);if(this.o=u==200,hf(this.i,this.v,this.B,this.l,this.S,K,u),this.o){if(this.U&&!this.L){t:{if(this.g){var m,P=this.g;if((m=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(m)){var N=m;break t}}N=null}if(o=N)wn(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,lo(this,o);else{this.o=!1,this.m=3,Ve(12),sn(this),li(this);break e}}if(this.R){o=!0;let we;for(;!this.K&&this.C<g.length;)if(we=mf(this,g),we==ro){K==4&&(this.m=4,Ve(14),o=!1),wn(this.i,this.l,null,"[Incomplete Response]");break}else if(we==Ml){this.m=4,Ve(15),wn(this.i,this.l,g,"[Invalid Chunk]"),o=!1;break}else wn(this.i,this.l,we,null),lo(this,we);if(Ul(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),K!=4||g.length!=0||this.h.h||(this.m=1,Ve(16),o=!1),this.o=this.o&&o,!o)wn(this.i,this.l,g,"[Invalid Chunked Response]"),sn(this),li(this);else if(g.length>0&&!this.W){this.W=!0;var O=this.j;O.g==this&&O.aa&&!O.P&&(O.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),_o(O),O.P=!0,Ve(11))}}else wn(this.i,this.l,g,null),lo(this,g);K==4&&sn(this),this.o&&!this.K&&(K==4?dc(this.j,this):(this.o=!1,Es(this)))}else Pf(this.g),u==400&&g.indexOf("Unknown SID")>0?(this.m=3,Ve(12)):(this.m=0,Ve(13)),sn(this),li(this)}}}catch{}};function pf(o){if(!Ul(o))return o.g.la();const u=rc(o.g);if(u==="")return"";let g="";const m=u.length,P=Ct(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return sn(o),li(o),"";o.h.i=new a.TextDecoder}for(let N=0;N<m;N++)o.h.h=!0,g+=o.h.i.decode(u[N],{stream:!(P&&N==m-1)});return u.length=0,o.h.g+=g,o.C=0,o.h.g}function Ul(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function mf(o,u){var g=o.C,m=u.indexOf(`
`,g);return m==-1?ro:(g=Number(u.substring(g,m)),isNaN(g)?Ml:(m+=1,m+g>u.length?ro:(u=u.slice(m,m+g),o.C=m+g,u)))}It.prototype.cancel=function(){this.K=!0,sn(this)};function Es(o){o.T=Date.now()+o.H,Bl(o,o.H)}function Bl(o,u){if(o.D!=null)throw Error("WatchDog timer not null");o.D=ri(h(o.aa,o),u)}function ao(o){o.D&&(a.clearTimeout(o.D),o.D=null)}It.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(df(this.i,this.B),this.M!=2&&(si(),Ve(17)),sn(this),this.m=2,li(this)):Bl(this,this.T-o)};function li(o){o.j.I==0||o.K||dc(o.j,o)}function sn(o){ao(o);var u=o.O;u&&typeof u.dispose=="function"&&u.dispose(),o.O=null,Il(o.V),o.g&&(u=o.g,o.g=null,u.abort(),u.dispose())}function lo(o,u){try{var g=o.j;if(g.I!=0&&(g.g==o||co(g.h,o))){if(!o.L&&co(g.h,o)&&g.I==3){try{var m=g.Ba.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var P=m;if(P[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<o.F)Is(g),Rs(g);else break e;mo(g),Ve(18)}}else g.xa=P[1],0<g.xa-g.K&&P[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=ri(h(g.Va,g),6e3));$l(g.h)<=1&&g.ta&&(g.ta=void 0)}else on(g,11)}else if((o.L||g.g==o)&&Is(g),!y(u))for(P=g.Ba.g.parse(u),u=0;u<P.length;u++){let se=P[u];const we=se[0];if(!(we<=g.K))if(g.K=we,se=se[1],g.I==2)if(se[0]=="c"){g.M=se[1],g.ba=se[2];const tt=se[3];tt!=null&&(g.ka=tt,g.j.info("VER="+g.ka));const an=se[4];an!=null&&(g.za=an,g.j.info("SVER="+g.za));const Nt=se[5];Nt!=null&&typeof Nt=="number"&&Nt>0&&(m=1.5*Nt,g.O=m,g.j.info("backChannelRequestTimeoutMs_="+m)),m=g;const Lt=o.g;if(Lt){const Ps=Lt.g?Lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ps){var N=m.h;N.g||Ps.indexOf("spdy")==-1&&Ps.indexOf("quic")==-1&&Ps.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(uo(N,N.h),N.h=null))}if(m.G){const yo=Lt.g?Lt.g.getResponseHeader("X-HTTP-Session-Id"):null;yo&&(m.wa=yo,ae(m.J,m.G,yo))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-o.F,g.j.info("Handshake RTT: "+g.T+"ms")),m=g;var O=o;if(m.na=pc(m,m.L?m.ba:null,m.W),O.L){Yl(m.h,O);var K=O,ve=m.O;ve&&(K.H=ve),K.D&&(ao(K),Es(K)),m.g=O}else uc(m);g.i.length>0&&Ss(g)}else se[0]!="stop"&&se[0]!="close"||on(g,7);else g.I==3&&(se[0]=="stop"||se[0]=="close"?se[0]=="stop"?on(g,7):po(g):se[0]!="noop"&&g.l&&g.l.qa(se),g.A=0)}}si(4)}catch{}}var _f=class{constructor(o,u){this.g=o,this.map=u}};function Hl(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ql(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function $l(o){return o.h?1:o.g?o.g.size:0}function co(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function uo(o,u){o.g?o.g.add(u):o.h=u}function Yl(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}Hl.prototype.cancel=function(){if(this.i=Wl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Wl(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const g of o.g.values())u=u.concat(g.G);return u}return b(o.i)}var Gl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yf(o,u){if(o){o=o.split("&");for(let g=0;g<o.length;g++){const m=o[g].indexOf("=");let P,N=null;m>=0?(P=o[g].substring(0,m),N=o[g].substring(m+1)):P=o[g],u(P,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function At(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let u;o instanceof At?(this.l=o.l,ci(this,o.j),this.o=o.o,this.g=o.g,ui(this,o.u),this.h=o.h,ho(this,Zl(o.i)),this.m=o.m):o&&(u=String(o).match(Gl))?(this.l=!1,ci(this,u[1]||"",!0),this.o=hi(u[2]||""),this.g=hi(u[3]||"",!0),ui(this,u[4]),this.h=hi(u[5]||"",!0),ho(this,u[6]||"",!0),this.m=hi(u[7]||"")):(this.l=!1,this.i=new gi(null,this.l))}At.prototype.toString=function(){const o=[];var u=this.j;u&&o.push(di(u,zl,!0),":");var g=this.g;return(g||u=="file")&&(o.push("//"),(u=this.o)&&o.push(di(u,zl,!0),"@"),o.push(ai(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&o.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&o.push("/"),o.push(di(g,g.charAt(0)=="/"?bf:vf,!0))),(g=this.i.toString())&&o.push("?",g),(g=this.m)&&o.push("#",di(g,wf)),o.join("")},At.prototype.resolve=function(o){const u=et(this);let g=!!o.j;g?ci(u,o.j):g=!!o.o,g?u.o=o.o:g=!!o.g,g?u.g=o.g:g=o.u!=null;var m=o.h;if(g)ui(u,o.u);else if(g=!!o.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var P=u.h.lastIndexOf("/");P!=-1&&(m=u.h.slice(0,P+1)+m)}if(P=m,P==".."||P==".")m="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){m=P.lastIndexOf("/",0)==0,P=P.split("/");const N=[];for(let O=0;O<P.length;){const K=P[O++];K=="."?m&&O==P.length&&N.push(""):K==".."?((N.length>1||N.length==1&&N[0]!="")&&N.pop(),m&&O==P.length&&N.push("")):(N.push(K),m=!0)}m=N.join("/")}else m=P}return g?u.h=m:g=o.i.toString()!=="",g?ho(u,Zl(o.i)):g=!!o.m,g&&(u.m=o.m),u};function et(o){return new At(o)}function ci(o,u,g){o.j=g?hi(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function ui(o,u){if(u){if(u=Number(u),isNaN(u)||u<0)throw Error("Bad port number "+u);o.u=u}else o.u=null}function ho(o,u,g){u instanceof gi?(o.i=u,Tf(o.i,o.l)):(g||(u=di(u,Ef)),o.i=new gi(u,o.l))}function ae(o,u,g){o.i.set(u,g)}function ws(o){return ae(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function hi(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function di(o,u,g){return typeof o=="string"?(o=encodeURI(o).replace(u,kf),g&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function kf(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var zl=/[#\/\?@]/g,vf=/[#\?:]/g,bf=/[#\?]/g,Ef=/[#\?@]/g,wf=/#/g;function gi(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function rn(o){o.g||(o.g=new Map,o.h=0,o.i&&yf(o.i,function(u,g){o.add(decodeURIComponent(u.replace(/\+/g," ")),g)}))}n=gi.prototype,n.add=function(o,u){rn(this),this.i=null,o=Tn(this,o);let g=this.g.get(o);return g||this.g.set(o,g=[]),g.push(u),this.h+=1,this};function Kl(o,u){rn(o),u=Tn(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function Ql(o,u){return rn(o),u=Tn(o,u),o.g.has(u)}n.forEach=function(o,u){rn(this),this.g.forEach(function(g,m){g.forEach(function(P){o.call(u,P,m,this)},this)},this)};function Jl(o,u){rn(o);let g=[];if(typeof u=="string")Ql(o,u)&&(g=g.concat(o.g.get(Tn(o,u))));else for(o=Array.from(o.g.values()),u=0;u<o.length;u++)g=g.concat(o[u]);return g}n.set=function(o,u){return rn(this),this.i=null,o=Tn(this,o),Ql(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},n.get=function(o,u){return o?(o=Jl(this,o),o.length>0?String(o[0]):u):u};function Xl(o,u,g){Kl(o,u),g.length>0&&(o.i=null,o.g.set(Tn(o,u),b(g)),o.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(let m=0;m<u.length;m++){var g=u[m];const P=ai(g);g=Jl(this,g);for(let N=0;N<g.length;N++){let O=P;g[N]!==""&&(O+="="+ai(g[N])),o.push(O)}}return this.i=o.join("&")};function Zl(o){const u=new gi;return u.i=o.i,o.g&&(u.g=new Map(o.g),u.h=o.h),u}function Tn(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function Tf(o,u){u&&!o.j&&(rn(o),o.i=null,o.g.forEach(function(g,m){const P=m.toLowerCase();m!=P&&(Kl(this,m),Xl(this,P,g))},o)),o.j=u}function xf(o,u){const g=new oi;if(a.Image){const m=new Image;m.onload=f(Pt,g,"TestLoadImage: loaded",!0,u,m),m.onerror=f(Pt,g,"TestLoadImage: error",!1,u,m),m.onabort=f(Pt,g,"TestLoadImage: abort",!1,u,m),m.ontimeout=f(Pt,g,"TestLoadImage: timeout",!1,u,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else u(!1)}function Rf(o,u){const g=new oi,m=new AbortController,P=setTimeout(()=>{m.abort(),Pt(g,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:m.signal}).then(N=>{clearTimeout(P),N.ok?Pt(g,"TestPingServer: ok",!0,u):Pt(g,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(P),Pt(g,"TestPingServer: error",!1,u)})}function Pt(o,u,g,m,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),m(g)}catch{}}function Sf(){this.g=new cf}function go(o){this.i=o.Sb||null,this.h=o.ab||!1}p(go,Al),go.prototype.g=function(){return new Ts(this.i,this.h)};function Ts(o,u){Ce.call(this),this.H=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Ts,Ce),n=Ts.prototype,n.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=u,this.readyState=1,pi(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const u={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(u.body=o),(this.H||a).fetch(new Request(this.D,u)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,fi(this)),this.readyState=0},n.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,pi(this)),this.g&&(this.readyState=3,pi(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ec(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function ec(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}n.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.B.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?fi(this):pi(this),this.readyState==3&&ec(this)}},n.Oa=function(o){this.g&&(this.response=this.responseText=o,fi(this))},n.Na=function(o){this.g&&(this.response=o,fi(this))},n.ga=function(){this.g&&fi(this)};function fi(o){o.readyState=4,o.l=null,o.j=null,o.B=null,pi(o)}n.setRequestHeader=function(o,u){this.A.append(o,u)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var g=u.next();!g.done;)g=g.value,o.push(g[0]+": "+g[1]),g=u.next();return o.join(`\r
`)};function pi(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ts.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function tc(o){let u="";return ht(o,function(g,m){u+=m,u+=":",u+=g,u+=`\r
`}),u}function fo(o,u,g){e:{for(m in g){var m=!1;break e}m=!0}m||(g=tc(g),typeof o=="string"?g!=null&&ai(g):ae(o,u,g))}function ge(o){Ce.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(ge,Ce);var If=/^https?$/i,Af=["POST","PUT"];n=ge.prototype,n.Fa=function(o){this.H=o},n.ea=function(o,u,g,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Vl.g(),this.g.onreadystatechange=_(h(this.Ca,this));try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(N){nc(this,N);return}if(o=g||"",g=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var P in m)g.set(P,m[P]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const N of m.keys())g.set(N,m.get(N));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(g.keys()).find(N=>N.toLowerCase()=="content-type"),P=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(Af,u,void 0)>=0)||m||P||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,O]of g)this.g.setRequestHeader(N,O);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(N){nc(this,N)}};function nc(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.o=5,ic(o),xs(o)}function ic(o){o.A||(o.A=!0,Fe(o,"complete"),Fe(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,Fe(this,"complete"),Fe(this,"abort"),xs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xs(this,!0)),ge.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?sc(this):this.Xa())},n.Xa=function(){sc(this)};function sc(o){if(o.h&&typeof r<"u"){if(o.v&&Ct(o)==4)setTimeout(o.Ca.bind(o),0);else if(Fe(o,"readystatechange"),Ct(o)==4){o.h=!1;try{const N=o.ca();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var g;if(!(g=u)){var m;if(m=N===0){let O=String(o.D).match(Gl)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),m=!If.test(O?O.toLowerCase():"")}g=m}if(g)Fe(o,"complete"),Fe(o,"success");else{o.o=6;try{var P=Ct(o)>2?o.g.statusText:""}catch{P=""}o.l=P+" ["+o.ca()+"]",ic(o)}}finally{xs(o)}}}}function xs(o,u){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const g=o.g;o.g=null,u||Fe(o,"ready");try{g.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ct(o){return o.g?o.g.readyState:0}n.ca=function(){try{return Ct(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),lf(u)}};function rc(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Pf(o){const u={};o=(o.g&&Ct(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(y(o[m]))continue;var g=ff(o[m]);const P=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const N=u[P]||[];u[P]=N,N.push(g)}_s(u,function(m){return m.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function mi(o,u,g){return g&&g.internalChannelParams&&g.internalChannelParams[o]||u}function oc(o){this.za=0,this.i=[],this.j=new oi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=mi("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=mi("baseRetryDelayMs",5e3,o),this.Za=mi("retryDelaySeedMs",1e4,o),this.Ta=mi("forwardChannelMaxRetries",2,o),this.va=mi("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new Hl(o&&o.concurrentRequestLimit),this.Ba=new Sf,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=oc.prototype,n.ka=8,n.I=1,n.connect=function(o,u,g,m){Ve(0),this.W=o,this.H=u||{},g&&m!==void 0&&(this.H.OSID=g,this.H.OAID=m),this.F=this.X,this.J=pc(this,null,this.W),Ss(this)};function po(o){if(ac(o),o.I==3){var u=o.V++,g=et(o.J);if(ae(g,"SID",o.M),ae(g,"RID",u),ae(g,"TYPE","terminate"),_i(o,g),u=new It(o,o.j,u),u.M=2,u.A=ws(et(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(u.A.toString(),"")}catch{}!g&&a.Image&&(new Image().src=u.A,g=!0),g||(u.g=mc(u.j,null),u.g.ea(u.A)),u.F=Date.now(),Es(u)}fc(o)}function Rs(o){o.g&&(_o(o),o.g.cancel(),o.g=null)}function ac(o){Rs(o),o.v&&(a.clearTimeout(o.v),o.v=null),Is(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function Ss(o){if(!ql(o.h)&&!o.m){o.m=!0;var u=o.Ea;q||k(),B||(q(),B=!0),E.add(u,o),o.D=0}}function Cf(o,u){return $l(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=u.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=ri(h(o.Ea,o,u),gc(o,o.D)),o.D++,!0)}n.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const P=new It(this,this.j,o);let N=this.o;if(this.U&&(N?(N=En(N),bl(N,this.U)):N=this.U),this.u!==null||this.R||(P.J=N,N=null),this.S)e:{for(var u=0,g=0;g<this.i.length;g++){t:{var m=this.i[g];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(u+=m,u>4096){u=g;break e}if(u===4096||g===this.i.length-1){u=g+1;break e}}u=1e3}else u=1e3;u=cc(this,P,u),g=et(this.J),ae(g,"RID",o),ae(g,"CVER",22),this.G&&ae(g,"X-HTTP-Session-Id",this.G),_i(this,g),N&&(this.R?u="headers="+ai(tc(N))+"&"+u:this.u&&fo(g,this.u,N)),uo(this.h,P),this.Ra&&ae(g,"TYPE","init"),this.S?(ae(g,"$req",u),ae(g,"SID","null"),P.U=!0,oo(P,g,null)):oo(P,g,u),this.I=2}}else this.I==3&&(o?lc(this,o):this.i.length==0||ql(this.h)||lc(this))};function lc(o,u){var g;u?g=u.l:g=o.V++;const m=et(o.J);ae(m,"SID",o.M),ae(m,"RID",g),ae(m,"AID",o.K),_i(o,m),o.u&&o.o&&fo(m,o.u,o.o),g=new It(o,o.j,g,o.D+1),o.u===null&&(g.J=o.o),u&&(o.i=u.G.concat(o.i)),u=cc(o,g,1e3),g.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),uo(o.h,g),oo(g,m,u)}function _i(o,u){o.H&&ht(o.H,function(g,m){ae(u,m,g)}),o.l&&ht({},function(g,m){ae(u,m,g)})}function cc(o,u,g){g=Math.min(o.i.length,g);const m=o.l?h(o.l.Ka,o.l,o):null;e:{var P=o.i;let K=-1;for(;;){const ve=["count="+g];K==-1?g>0?(K=P[0].g,ve.push("ofs="+K)):K=0:ve.push("ofs="+K);let se=!0;for(let we=0;we<g;we++){var N=P[we].g;const tt=P[we].map;if(N-=K,N<0)K=Math.max(0,P[we].g-100),se=!1;else try{N="req"+N+"_"||"";try{var O=tt instanceof Map?tt:Object.entries(tt);for(const[an,Nt]of O){let Lt=Nt;l(Nt)&&(Lt=to(Nt)),ve.push(N+an+"="+encodeURIComponent(Lt))}}catch(an){throw ve.push(N+"type="+encodeURIComponent("_badmap")),an}}catch{m&&m(tt)}}if(se){O=ve.join("&");break e}}O=void 0}return o=o.i.splice(0,g),u.G=o,O}function uc(o){if(!o.g&&!o.v){o.Y=1;var u=o.Da;q||k(),B||(q(),B=!0),E.add(u,o),o.A=0}}function mo(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=ri(h(o.Da,o),gc(o,o.A)),o.A++,!0)}n.Da=function(){if(this.v=null,hc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=ri(h(this.Wa,this),o)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ve(10),Rs(this),hc(this))};function _o(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function hc(o){o.g=new It(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var u=et(o.na);ae(u,"RID","rpc"),ae(u,"SID",o.M),ae(u,"AID",o.K),ae(u,"CI",o.F?"0":"1"),!o.F&&o.ia&&ae(u,"TO",o.ia),ae(u,"TYPE","xmlhttp"),_i(o,u),o.u&&o.o&&fo(u,o.u,o.o),o.O&&(o.g.H=o.O);var g=o.g;o=o.ba,g.M=1,g.A=ws(et(u)),g.u=null,g.R=!0,jl(g,o)}n.Va=function(){this.C!=null&&(this.C=null,Rs(this),mo(this),Ve(19))};function Is(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function dc(o,u){var g=null;if(o.g==u){Is(o),_o(o),o.g=null;var m=2}else if(co(o.h,u))g=u.G,Yl(o.h,u),m=1;else return;if(o.I!=0){if(u.o)if(m==1){g=u.u?u.u.length:0,u=Date.now()-u.F;var P=o.D;m=vs(),Fe(m,new Dl(m,g)),Ss(o)}else uc(o);else if(P=u.m,P==3||P==0&&u.X>0||!(m==1&&Cf(o,u)||m==2&&mo(o)))switch(g&&g.length>0&&(u=o.h,u.i=u.i.concat(g)),P){case 1:on(o,5);break;case 4:on(o,10);break;case 3:on(o,6);break;default:on(o,2)}}}function gc(o,u){let g=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(g*=2),g*u}function on(o,u){if(o.j.info("Error code "+u),u==2){var g=h(o.bb,o),m=o.Ua;const P=!m;m=new At(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ci(m,"https"),ws(m),P?xf(m.toString(),g):Rf(m.toString(),g)}else Ve(2);o.I=0,o.l&&o.l.pa(u),fc(o),ac(o)}n.bb=function(o){o?(this.j.info("Successfully pinged google.com"),Ve(2)):(this.j.info("Failed to ping google.com"),Ve(1))};function fc(o){if(o.I=0,o.ja=[],o.l){const u=Wl(o.h);(u.length!=0||o.i.length!=0)&&(R(o.ja,u),R(o.ja,o.i),o.h.i.length=0,b(o.i),o.i.length=0),o.l.oa()}}function pc(o,u,g){var m=g instanceof At?et(g):new At(g);if(m.g!="")u&&(m.g=u+"."+m.g),ui(m,m.u);else{var P=a.location;m=P.protocol,u=u?u+"."+P.hostname:P.hostname,P=+P.port;const N=new At(null);m&&ci(N,m),u&&(N.g=u),P&&ui(N,P),g&&(N.h=g),m=N}return g=o.G,u=o.wa,g&&u&&ae(m,g,u),ae(m,"VER",o.ka),_i(o,m),m}function mc(o,u,g){if(u&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Aa&&!o.ma?new ge(new go({ab:g})):new ge(o.ma),u.Fa(o.L),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function _c(){}n=_c.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function As(){}As.prototype.g=function(o,u){return new Be(o,u)};function Be(o,u){Ce.call(this),this.g=new oc(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.sa&&(o?o["X-WebChannel-Client-Profile"]=u.sa:o={"X-WebChannel-Client-Profile":u.sa}),this.g.U=o,(o=u&&u.Qb)&&!y(o)&&(this.g.u=o),this.A=u&&u.supportsCrossDomainXhr||!1,this.v=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!y(u)&&(this.g.G=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new xn(this)}p(Be,Ce),Be.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Be.prototype.close=function(){po(this.g)},Be.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var g={};g.__data__=o,o=g}else this.v&&(g={},g.__data__=to(o),o=g);u.i.push(new _f(u.Ya++,o)),u.I==3&&Ss(u)},Be.prototype.N=function(){this.g.l=null,delete this.j,po(this.g),delete this.g,Be.Z.N.call(this)};function yc(o){no.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(const g in u){o=g;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}p(yc,no);function kc(){io.call(this),this.status=1}p(kc,io);function xn(o){this.g=o}p(xn,_c),xn.prototype.ra=function(){Fe(this.g,"a")},xn.prototype.qa=function(o){Fe(this.g,new yc(o))},xn.prototype.pa=function(o){Fe(this.g,new kc)},xn.prototype.oa=function(){Fe(this.g,"b")},As.prototype.createWebChannel=As.prototype.g,Be.prototype.send=Be.prototype.o,Be.prototype.open=Be.prototype.m,Be.prototype.close=Be.prototype.close,Rd=function(){return new As},xd=function(){return vs()},Td=nn,Go={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},bs.NO_ERROR=0,bs.TIMEOUT=8,bs.HTTP_ERROR=6,Ws=bs,Fl.COMPLETE="complete",wd=Fl,Pl.EventType=ii,ii.OPEN="a",ii.CLOSE="b",ii.ERROR="c",ii.MESSAGE="d",Ce.prototype.listen=Ce.prototype.J,Ei=Pl,ge.prototype.listenOnce=ge.prototype.K,ge.prototype.getLastError=ge.prototype.Ha,ge.prototype.getLastErrorCode=ge.prototype.ya,ge.prototype.getStatus=ge.prototype.ca,ge.prototype.getResponseJson=ge.prototype.La,ge.prototype.getResponseText=ge.prototype.la,ge.prototype.send=ge.prototype.ea,ge.prototype.setWithCredentials=ge.prototype.Fa,Ed=ge}).apply(typeof Ls<"u"?Ls:typeof self<"u"?self:typeof window<"u"?window:{});const su="@firebase/firestore",ru="4.9.3";class Le{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Le.UNAUTHENTICATED=new Le(null),Le.GOOGLE_CREDENTIALS=new Le("google-credentials-uid"),Le.FIRST_PARTY=new Le("first-party-uid"),Le.MOCK_USER=new Le("mock-user");let Jn="12.7.0";const Wt=new va("@firebase/firestore");function Sn(){return Wt.logLevel}function gk(n){Wt.setLogLevel(n)}function j(n,...e){if(Wt.logLevel<=Q.DEBUG){const t=e.map(Na);Wt.debug(`Firestore (${Jn}): ${n}`,...t)}}function vt(n,...e){if(Wt.logLevel<=Q.ERROR){const t=e.map(Na);Wt.error(`Firestore (${Jn}): ${n}`,...t)}}function jn(n,...e){if(Wt.logLevel<=Q.WARN){const t=e.map(Na);Wt.warn(`Firestore (${Jn}): ${n}`,...t)}}function Na(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Y(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Sd(n,i,t)}function Sd(n,e,t){let i=`FIRESTORE (${Jn}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw vt(i),new Error(i)}function ee(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||Sd(e,s,i)}function z(n,e){return n}const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class M extends Et{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class st{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Id{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Le.UNAUTHENTICATED)))}shutdown(){}}class pk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class mk{constructor(e){this.t=e,this.currentUser=Le.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ee(this.o===void 0,42304);let i=this.i;const s=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let r=new st;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new st,e.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const c=r;e.enqueueRetryable((async()=>{await c.promise,await s(this.currentUser)}))},l=c=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new st)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ee(typeof i.accessToken=="string",31837,{l:i}),new Id(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ee(e===null||typeof e=="string",2055,{h:e}),new Le(e)}}class _k{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Le.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yk{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new _k(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Le.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ou{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kk{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,He(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ee(this.o===void 0,3512);const i=r=>{r.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.m;return this.m=r.token,j("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable((()=>i(r)))};const s=r=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((r=>s(r))),setTimeout((()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ou(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ee(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ou(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function vk(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class La{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=vk(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<t&&(i+=e.charAt(s[r]%62))}return i}}function J(n,e){return n<e?-1:n>e?1:0}function zo(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const s=n.charAt(i),r=e.charAt(i);if(s!==r)return Ao(s)===Ao(r)?J(s,r):Ao(s)?1:-1}return J(n.length,e.length)}const bk=55296,Ek=57343;function Ao(n){const e=n.charCodeAt(0);return e>=bk&&e<=Ek}function Un(n,e,t){return n.length===e.length&&n.every(((i,s)=>t(i,e[s])))}const au="__name__";class nt{constructor(e,t,i){t===void 0?t=0:t>e.length&&Y(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Y(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return nt.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof nt?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const r=nt.compareSegments(e.get(s),t.get(s));if(r!==0)return r}return J(e.length,t.length)}static compareSegments(e,t){const i=nt.isNumericId(e),s=nt.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?nt.extractNumericId(e).compare(nt.extractNumericId(t)):zo(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ht.fromString(e.substring(4,e.length-2))}}class ie extends nt{construct(e,t,i){return new ie(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new M(L.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((s=>s.length>0)))}return new ie(t)}static emptyPath(){return new ie([])}}const wk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ie extends nt{construct(e,t,i){return new Ie(e,t,i)}static isValidIdentifier(e){return wk.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ie.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===au}static keyField(){return new Ie([au])}static fromServerFormat(e){const t=[];let i="",s=0;const r=()=>{if(i.length===0)throw new M(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new M(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new M(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(i+=l,s++):(r(),s++)}if(r(),a)throw new M(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ie(t)}static emptyPath(){return new Ie([])}}class H{constructor(e){this.path=e}static fromPath(e){return new H(ie.fromString(e))}static fromName(e){return new H(ie.fromString(e).popFirst(5))}static empty(){return new H(ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ie.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new H(new ie(e.slice()))}}function Ad(n,e,t){if(!t)throw new M(L.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Tk(n,e,t,i){if(e===!0&&i===!0)throw new M(L.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function lu(n){if(!H.isDocumentKey(n))throw new M(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function cu(n){if(H.isDocumentKey(n))throw new M(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Pd(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ir(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Y(12329,{type:typeof n})}function Me(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new M(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ir(n);throw new M(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ye(n,e){const t={typeString:n};return e&&(t.value=e),t}function os(n,e){if(!Pd(n))throw new M(L.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const s=e[i].typeString,r="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const a=n[i];if(s&&typeof a!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&a!==r.value){t=`Expected '${i}' field to equal '${r.value}'`;break}}if(t)throw new M(L.INVALID_ARGUMENT,t);return!0}const uu=-62135596800,hu=1e6;class le{static now(){return le.fromMillis(Date.now())}static fromDate(e){return le.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*hu);return new le(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new M(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new M(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<uu)throw new M(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new M(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hu}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(os(e,le._jsonSchema))return new le(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-uu;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}le._jsonSchemaVersion="firestore/timestamp/1.0",le._jsonSchema={type:ye("string",le._jsonSchemaVersion),seconds:ye("number"),nanoseconds:ye("number")};class W{static fromTimestamp(e){return new W(e)}static min(){return new W(new le(0,0))}static max(){return new W(new le(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ji=-1;function xk(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=W.fromTimestamp(i===1e9?new le(t+1,0):new le(t,i));return new Gt(s,H.empty(),e)}function Rk(n){return new Gt(n.readTime,n.key,ji)}class Gt{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Gt(W.min(),H.empty(),ji)}static max(){return new Gt(W.max(),H.empty(),ji)}}function Sk(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=H.comparator(n.documentKey,e.documentKey),t!==0?t:J(n.largestBatchId,e.largestBatchId))}const Ik="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ak{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Xn(n){if(n.code!==L.FAILED_PRECONDITION||n.message!==Ik)throw n;j("LocalStore","Unexpectedly lost primary lease")}class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new F(((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(t,r).next(i,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof F?t:F.resolve(t)}catch(t){return F.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):F.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):F.reject(t)}static resolve(e){return new F(((t,i)=>{t(e)}))}static reject(e){return new F(((t,i)=>{i(e)}))}static waitFor(e){return new F(((t,i)=>{let s=0,r=0,a=!1;e.forEach((l=>{++s,l.next((()=>{++r,a&&r===s&&t()}),(c=>i(c)))})),a=!0,r===s&&t()}))}static or(e){let t=F.resolve(!1);for(const i of e)t=t.next((s=>s?F.resolve(s):i()));return t}static forEach(e,t){const i=[];return e.forEach(((s,r)=>{i.push(t.call(this,s,r))})),this.waitFor(i)}static mapArray(e,t){return new F(((i,s)=>{const r=e.length,a=new Array(r);let l=0;for(let c=0;c<r;c++){const h=c;t(e[h]).next((f=>{a[h]=f,++l,l===r&&i(a)}),(f=>s(f)))}}))}static doWhile(e,t){return new F(((i,s)=>{const r=()=>{e()===!0?t().next((()=>{r()}),s):i()};r()}))}}function Pk(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Zn(n){return n.name==="IndexedDbTransactionError"}class Ar{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ar.ce=-1;const Da=-1;function as(n){return n==null}function lr(n){return n===0&&1/n==-1/0}function Ck(n){return typeof n=="number"&&Number.isInteger(n)&&!lr(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Cd="";function Nk(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=du(e)),e=Lk(n.get(t),e);return du(e)}function Lk(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const r=n.charAt(s);switch(r){case"\0":t+="";break;case Cd:t+="";break;default:t+=r}}return t}function du(n){return n+Cd+""}function gu(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function en(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Nd(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class de{constructor(e,t){this.comparator=e,this.root=t||Se.EMPTY}insert(e,t){return new de(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Se.BLACK,null,null))}remove(e){return new de(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Se.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ds(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ds(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ds(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ds(this.root,e,this.comparator,!0)}}class Ds{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?i(e.key,t):1,t&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Se{constructor(e,t,i,s,r){this.key=e,this.value=t,this.color=i??Se.RED,this.left=s??Se.EMPTY,this.right=r??Se.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,r){return new Se(e??this.key,t??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,t,i),null):r===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Se.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Se.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Se.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Se.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Y(27949);return e+(this.isRed()?0:1)}}Se.EMPTY=null,Se.RED=!0,Se.BLACK=!1;Se.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(e,t,i,s,r){return this}insert(e,t,i){return new Se(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ee{constructor(e){this.comparator=e,this.data=new de(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fu(this.data.getIterator())}getIteratorFrom(e){return new fu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ee)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ee(this.comparator);return t.data=e,t}}class fu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class $e{constructor(e){this.fields=e,e.sort(Ie.comparator)}static empty(){return new $e([])}unionWith(e){let t=new Ee(Ie.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new $e(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Un(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class Ld extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Pe{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Ld("Invalid base64 string: "+r):r}})(e);return new Pe(t)}static fromUint8Array(e){const t=(function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r})(e);return new Pe(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pe.EMPTY_BYTE_STRING=new Pe("");const Dk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zt(n){if(ee(!!n,39018),typeof n=="string"){let e=0;const t=Dk.exec(n);if(ee(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:pe(n.seconds),nanos:pe(n.nanos)}}function pe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Kt(n){return typeof n=="string"?Pe.fromBase64String(n):Pe.fromUint8Array(n)}const Dd="server_timestamp",Fd="__type__",Vd="__previous_value__",Od="__local_write_time__";function Fa(n){return(n?.mapValue?.fields||{})[Fd]?.stringValue===Dd}function Pr(n){const e=n.mapValue.fields[Vd];return Fa(e)?Pr(e):e}function Ui(n){const e=zt(n.mapValue.fields[Od].timestampValue);return new le(e.seconds,e.nanos)}class Fk{constructor(e,t,i,s,r,a,l,c,h,f){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=f}}const Bi="(default)";class Hi{constructor(e,t){this.projectId=e,this.database=t||Bi}static empty(){return new Hi("","")}get isDefaultDatabase(){return this.database===Bi}isEqual(e){return e instanceof Hi&&e.projectId===this.projectId&&e.database===this.database}}const Md="__type__",Vk="__max__",Fs={mapValue:{}},jd="__vector__",cr="value";function Qt(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Fa(n)?4:Mk(n)?9007199254740991:Ok(n)?10:11:Y(28295,{value:n})}function lt(n,e){if(n===e)return!0;const t=Qt(n);if(t!==Qt(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ui(n).isEqual(Ui(e));case 3:return(function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=zt(s.timestampValue),l=zt(r.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,r){return Kt(s.bytesValue).isEqual(Kt(r.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,r){return pe(s.geoPointValue.latitude)===pe(r.geoPointValue.latitude)&&pe(s.geoPointValue.longitude)===pe(r.geoPointValue.longitude)})(n,e);case 2:return(function(s,r){if("integerValue"in s&&"integerValue"in r)return pe(s.integerValue)===pe(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=pe(s.doubleValue),l=pe(r.doubleValue);return a===l?lr(a)===lr(l):isNaN(a)&&isNaN(l)}return!1})(n,e);case 9:return Un(n.arrayValue.values||[],e.arrayValue.values||[],lt);case 10:case 11:return(function(s,r){const a=s.mapValue.fields||{},l=r.mapValue.fields||{};if(gu(a)!==gu(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!lt(a[c],l[c])))return!1;return!0})(n,e);default:return Y(52216,{left:n})}}function qi(n,e){return(n.values||[]).find((t=>lt(t,e)))!==void 0}function Bn(n,e){if(n===e)return 0;const t=Qt(n),i=Qt(e);if(t!==i)return J(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return J(n.booleanValue,e.booleanValue);case 2:return(function(r,a){const l=pe(r.integerValue||r.doubleValue),c=pe(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(n,e);case 3:return pu(n.timestampValue,e.timestampValue);case 4:return pu(Ui(n),Ui(e));case 5:return zo(n.stringValue,e.stringValue);case 6:return(function(r,a){const l=Kt(r),c=Kt(a);return l.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(r,a){const l=r.split("/"),c=a.split("/");for(let h=0;h<l.length&&h<c.length;h++){const f=J(l[h],c[h]);if(f!==0)return f}return J(l.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(r,a){const l=J(pe(r.latitude),pe(a.latitude));return l!==0?l:J(pe(r.longitude),pe(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return mu(n.arrayValue,e.arrayValue);case 10:return(function(r,a){const l=r.fields||{},c=a.fields||{},h=l[cr]?.arrayValue,f=c[cr]?.arrayValue,p=J(h?.values?.length||0,f?.values?.length||0);return p!==0?p:mu(h,f)})(n.mapValue,e.mapValue);case 11:return(function(r,a){if(r===Fs.mapValue&&a===Fs.mapValue)return 0;if(r===Fs.mapValue)return 1;if(a===Fs.mapValue)return-1;const l=r.fields||{},c=Object.keys(l),h=a.fields||{},f=Object.keys(h);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const _=zo(c[p],f[p]);if(_!==0)return _;const b=Bn(l[c[p]],h[f[p]]);if(b!==0)return b}return J(c.length,f.length)})(n.mapValue,e.mapValue);default:throw Y(23264,{he:t})}}function pu(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return J(n,e);const t=zt(n),i=zt(e),s=J(t.seconds,i.seconds);return s!==0?s:J(t.nanos,i.nanos)}function mu(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const r=Bn(t[s],i[s]);if(r)return r}return J(t.length,i.length)}function Hn(n){return Ko(n)}function Ko(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=zt(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Kt(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return H.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",s=!0;for(const r of t.values||[])s?s=!1:i+=",",i+=Ko(r);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let s="{",r=!0;for(const a of i)r?r=!1:s+=",",s+=`${a}:${Ko(t.fields[a])}`;return s+"}"})(n.mapValue):Y(61005,{value:n})}function Gs(n){switch(Qt(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pr(n);return e?16+Gs(e):16;case 5:return 2*n.stringValue.length;case 6:return Kt(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,r)=>s+Gs(r)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return en(i.fields,((r,a)=>{s+=r.length+Gs(a)})),s})(n.mapValue);default:throw Y(13486,{value:n})}}function _u(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Qo(n){return!!n&&"integerValue"in n}function Va(n){return!!n&&"arrayValue"in n}function yu(n){return!!n&&"nullValue"in n}function ku(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zs(n){return!!n&&"mapValue"in n}function Ok(n){return(n?.mapValue?.fields||{})[Md]?.stringValue===jd}function Ai(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return en(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Ai(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ai(n.arrayValue.values[t]);return e}return{...n}}function Mk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Vk}class Oe{constructor(e){this.value=e}static empty(){return new Oe({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!zs(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ai(t)}setAll(e){let t=Ie.emptyPath(),i={},s=[];e.forEach(((a,l)=>{if(!t.isImmediateParentOf(l)){const c=this.getFieldsMap(t);this.applyChanges(c,i,s),i={},s=[],t=l.popLast()}a?i[l.lastSegment()]=Ai(a):s.push(l.lastSegment())}));const r=this.getFieldsMap(t);this.applyChanges(r,i,s)}delete(e){const t=this.field(e.popLast());zs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return lt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];zs(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){en(t,((s,r)=>e[s]=r));for(const s of i)delete e[s]}clone(){return new Oe(Ai(this.value))}}function Ud(n){const e=[];return en(n.fields,((t,i)=>{const s=new Ie([t]);if(zs(i)){const r=Ud(i.mapValue).fields;if(r.length===0)e.push(s);else for(const a of r)e.push(s.child(a))}else e.push(s)})),new $e(e)}class xe{constructor(e,t,i,s,r,a,l){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=r,this.data=a,this.documentState=l}static newInvalidDocument(e){return new xe(e,0,W.min(),W.min(),W.min(),Oe.empty(),0)}static newFoundDocument(e,t,i,s){return new xe(e,1,t,W.min(),i,s,0)}static newNoDocument(e,t){return new xe(e,2,t,W.min(),W.min(),Oe.empty(),0)}static newUnknownDocument(e,t){return new xe(e,3,t,W.min(),W.min(),Oe.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(W.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oe.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=W.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ur{constructor(e,t){this.position=e,this.inclusive=t}}function vu(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const r=e[s],a=n.position[s];if(r.field.isKeyField()?i=H.comparator(H.fromName(a.referenceValue),t.key):i=Bn(a,t.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function bu(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!lt(n.position[t],e.position[t]))return!1;return!0}class $i{constructor(e,t="asc"){this.field=e,this.dir=t}}function jk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Bd{}class _e extends Bd{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Bk(e,t,i):t==="array-contains"?new $k(e,i):t==="in"?new Yk(e,i):t==="not-in"?new Wk(e,i):t==="array-contains-any"?new Gk(e,i):new _e(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Hk(e,i):new qk(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Bn(t,this.value)):t!==null&&Qt(this.value)===Qt(t)&&this.matchesComparison(Bn(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xe extends Bd{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Xe(e,t)}matches(e){return Hd(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Hd(n){return n.op==="and"}function qd(n){return Uk(n)&&Hd(n)}function Uk(n){for(const e of n.filters)if(e instanceof Xe)return!1;return!0}function Jo(n){if(n instanceof _e)return n.field.canonicalString()+n.op.toString()+Hn(n.value);if(qd(n))return n.filters.map((e=>Jo(e))).join(",");{const e=n.filters.map((t=>Jo(t))).join(",");return`${n.op}(${e})`}}function $d(n,e){return n instanceof _e?(function(i,s){return s instanceof _e&&i.op===s.op&&i.field.isEqual(s.field)&&lt(i.value,s.value)})(n,e):n instanceof Xe?(function(i,s){return s instanceof Xe&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((r,a,l)=>r&&$d(a,s.filters[l])),!0):!1})(n,e):void Y(19439)}function Yd(n){return n instanceof _e?(function(t){return`${t.field.canonicalString()} ${t.op} ${Hn(t.value)}`})(n):n instanceof Xe?(function(t){return t.op.toString()+" {"+t.getFilters().map(Yd).join(" ,")+"}"})(n):"Filter"}class Bk extends _e{constructor(e,t,i){super(e,t,i),this.key=H.fromName(i.referenceValue)}matches(e){const t=H.comparator(e.key,this.key);return this.matchesComparison(t)}}class Hk extends _e{constructor(e,t){super(e,"in",t),this.keys=Wd("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class qk extends _e{constructor(e,t){super(e,"not-in",t),this.keys=Wd("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Wd(n,e){return(e.arrayValue?.values||[]).map((t=>H.fromName(t.referenceValue)))}class $k extends _e{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Va(t)&&qi(t.arrayValue,this.value)}}class Yk extends _e{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&qi(this.value.arrayValue,t)}}class Wk extends _e{constructor(e,t){super(e,"not-in",t)}matches(e){if(qi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!qi(this.value.arrayValue,t)}}class Gk extends _e{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Va(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>qi(this.value.arrayValue,i)))}}class zk{constructor(e,t=null,i=[],s=[],r=null,a=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=l,this.Te=null}}function Eu(n,e=null,t=[],i=[],s=null,r=null,a=null){return new zk(n,e,t,i,s,r,a)}function Oa(n){const e=z(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Jo(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(r){return r.field.canonicalString()+r.dir})(i))).join(","),as(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Hn(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Hn(i))).join(",")),e.Te=t}return e.Te}function Ma(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!jk(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$d(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!bu(n.startAt,e.startAt)&&bu(n.endAt,e.endAt)}function Xo(n){return H.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class ei{constructor(e,t=null,i=[],s=[],r=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Kk(n,e,t,i,s,r,a,l){return new ei(n,e,t,i,s,r,a,l)}function Cr(n){return new ei(n)}function wu(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Gd(n){return n.collectionGroup!==null}function Pi(n){const e=z(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),t.add(r.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Ee(Ie.comparator);return a.filters.forEach((c=>{c.getFlattenedFilters().forEach((h=>{h.isInequality()&&(l=l.add(h.field))}))})),l})(e).forEach((r=>{t.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new $i(r,i))})),t.has(Ie.keyField().canonicalString())||e.Ie.push(new $i(Ie.keyField(),i))}return e.Ie}function rt(n){const e=z(n);return e.Ee||(e.Ee=Qk(e,Pi(n))),e.Ee}function Qk(n,e){if(n.limitType==="F")return Eu(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const r=s.dir==="desc"?"asc":"desc";return new $i(s.field,r)}));const t=n.endAt?new ur(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new ur(n.startAt.position,n.startAt.inclusive):null;return Eu(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Zo(n,e){const t=n.filters.concat([e]);return new ei(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function hr(n,e,t){return new ei(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Nr(n,e){return Ma(rt(n),rt(e))&&n.limitType===e.limitType}function zd(n){return`${Oa(rt(n))}|lt:${n.limitType}`}function In(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((s=>Yd(s))).join(", ")}]`),as(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((s=>Hn(s))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((s=>Hn(s))).join(",")),`Target(${i})`})(rt(n))}; limitType=${n.limitType})`}function Lr(n,e){return e.isFoundDocument()&&(function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):H.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)})(n,e)&&(function(i,s){for(const r of Pi(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0})(n,e)&&(function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0})(n,e)&&(function(i,s){return!(i.startAt&&!(function(a,l,c){const h=vu(a,l,c);return a.inclusive?h<=0:h<0})(i.startAt,Pi(i),s)||i.endAt&&!(function(a,l,c){const h=vu(a,l,c);return a.inclusive?h>=0:h>0})(i.endAt,Pi(i),s))})(n,e)}function Jk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Kd(n){return(e,t)=>{let i=!1;for(const s of Pi(n)){const r=Xk(s,e,t);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function Xk(n,e,t){const i=n.field.isKeyField()?H.comparator(e.key,t.key):(function(r,a,l){const c=a.data.field(r),h=l.data.field(r);return c!==null&&h!==null?Bn(c,h):Y(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Y(19790,{direction:n.dir})}}class kn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){en(this.inner,((t,i)=>{for(const[s,r]of i)e(s,r)}))}isEmpty(){return Nd(this.inner)}size(){return this.innerSize}}const Zk=new de(H.comparator);function bt(){return Zk}const Qd=new de(H.comparator);function wi(...n){let e=Qd;for(const t of n)e=e.insert(t.key,t);return e}function Jd(n){let e=Qd;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function dn(){return Ci()}function Xd(){return Ci()}function Ci(){return new kn((n=>n.toString()),((n,e)=>n.isEqual(e)))}const ev=new de(H.comparator),tv=new Ee(H.comparator);function X(...n){let e=tv;for(const t of n)e=e.add(t);return e}const nv=new Ee(J);function iv(){return nv}function ja(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lr(e)?"-0":e}}function Zd(n){return{integerValue:""+n}}function sv(n,e){return Ck(e)?Zd(e):ja(n,e)}class Dr{constructor(){this._=void 0}}function rv(n,e,t){return n instanceof Yi?(function(s,r){const a={fields:{[Fd]:{stringValue:Dd},[Od]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&Fa(r)&&(r=Pr(r)),r&&(a.fields[Vd]=r),{mapValue:a}})(t,e):n instanceof Wi?tg(n,e):n instanceof Gi?ng(n,e):(function(s,r){const a=eg(s,r),l=Tu(a)+Tu(s.Ae);return Qo(a)&&Qo(s.Ae)?Zd(l):ja(s.serializer,l)})(n,e)}function ov(n,e,t){return n instanceof Wi?tg(n,e):n instanceof Gi?ng(n,e):t}function eg(n,e){return n instanceof dr?(function(i){return Qo(i)||(function(r){return!!r&&"doubleValue"in r})(i)})(e)?e:{integerValue:0}:null}class Yi extends Dr{}class Wi extends Dr{constructor(e){super(),this.elements=e}}function tg(n,e){const t=ig(e);for(const i of n.elements)t.some((s=>lt(s,i)))||t.push(i);return{arrayValue:{values:t}}}class Gi extends Dr{constructor(e){super(),this.elements=e}}function ng(n,e){let t=ig(e);for(const i of n.elements)t=t.filter((s=>!lt(s,i)));return{arrayValue:{values:t}}}class dr extends Dr{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Tu(n){return pe(n.integerValue||n.doubleValue)}function ig(n){return Va(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class av{constructor(e,t){this.field=e,this.transform=t}}function lv(n,e){return n.field.isEqual(e.field)&&(function(i,s){return i instanceof Wi&&s instanceof Wi||i instanceof Gi&&s instanceof Gi?Un(i.elements,s.elements,lt):i instanceof dr&&s instanceof dr?lt(i.Ae,s.Ae):i instanceof Yi&&s instanceof Yi})(n.transform,e.transform)}class cv{constructor(e,t){this.version=e,this.transformResults=t}}class Ae{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ae}static exists(e){return new Ae(void 0,e)}static updateTime(e){return new Ae(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ks(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Fr{}function sg(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Vr(n.key,Ae.none()):new ls(n.key,n.data,Ae.none());{const t=n.data,i=Oe.empty();let s=new Ee(Ie.comparator);for(let r of e.fields)if(!s.has(r)){let a=t.field(r);a===null&&r.length>1&&(r=r.popLast(),a=t.field(r)),a===null?i.delete(r):i.set(r,a),s=s.add(r)}return new tn(n.key,i,new $e(s.toArray()),Ae.none())}}function uv(n,e,t){n instanceof ls?(function(s,r,a){const l=s.value.clone(),c=Ru(s.fieldTransforms,r,a.transformResults);l.setAll(c),r.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,e,t):n instanceof tn?(function(s,r,a){if(!Ks(s.precondition,r))return void r.convertToUnknownDocument(a.version);const l=Ru(s.fieldTransforms,r,a.transformResults),c=r.data;c.setAll(rg(s)),c.setAll(l),r.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(n,e,t):(function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function Ni(n,e,t,i){return n instanceof ls?(function(r,a,l,c){if(!Ks(r.precondition,a))return l;const h=r.value.clone(),f=Su(r.fieldTransforms,c,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof tn?(function(r,a,l,c){if(!Ks(r.precondition,a))return l;const h=Su(r.fieldTransforms,c,a),f=a.data;return f.setAll(rg(r)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map((p=>p.field)))})(n,e,t,i):(function(r,a,l){return Ks(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l})(n,e,t)}function hv(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),r=eg(i.transform,s||null);r!=null&&(t===null&&(t=Oe.empty()),t.set(i.field,r))}return t||null}function xu(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Un(i,s,((r,a)=>lv(r,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ls extends Fr{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class tn extends Fr{constructor(e,t,i,s,r=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function rg(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Ru(n,e,t){const i=new Map;ee(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const r=n[s],a=r.transform,l=e.data.field(r.field);i.set(r.field,ov(a,l,t[s]))}return i}function Su(n,e,t){const i=new Map;for(const s of n){const r=s.transform,a=t.data.field(s.field);i.set(s.field,rv(r,a,e))}return i}class Vr extends Fr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class og extends Fr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class dv{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&uv(r,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ni(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ni(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Xd();return this.mutations.forEach((s=>{const r=e.get(s.key),a=r.overlayedDocument;let l=this.applyToLocalView(a,r.mutatedFields);l=t.has(s.key)?null:l;const c=sg(a,l);c!==null&&i.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(W.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),X())}isEqual(e){return this.batchId===e.batchId&&Un(this.mutations,e.mutations,((t,i)=>xu(t,i)))&&Un(this.baseMutations,e.baseMutations,((t,i)=>xu(t,i)))}}class Ua{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){ee(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return ev})();const r=e.mutations;for(let a=0;a<r.length;a++)s=s.insert(r[a].key,i[a].version);return new Ua(e,t,i,s)}}class gv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class fv{constructor(e,t){this.count=e,this.unchangedNames=t}}var me,Z;function ag(n){switch(n){case L.OK:return Y(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return Y(15467,{code:n})}}function lg(n){if(n===void 0)return vt("GRPC error has no .code"),L.UNKNOWN;switch(n){case me.OK:return L.OK;case me.CANCELLED:return L.CANCELLED;case me.UNKNOWN:return L.UNKNOWN;case me.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case me.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case me.INTERNAL:return L.INTERNAL;case me.UNAVAILABLE:return L.UNAVAILABLE;case me.UNAUTHENTICATED:return L.UNAUTHENTICATED;case me.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case me.NOT_FOUND:return L.NOT_FOUND;case me.ALREADY_EXISTS:return L.ALREADY_EXISTS;case me.PERMISSION_DENIED:return L.PERMISSION_DENIED;case me.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case me.ABORTED:return L.ABORTED;case me.OUT_OF_RANGE:return L.OUT_OF_RANGE;case me.UNIMPLEMENTED:return L.UNIMPLEMENTED;case me.DATA_LOSS:return L.DATA_LOSS;default:return Y(39323,{code:n})}}(Z=me||(me={}))[Z.OK=0]="OK",Z[Z.CANCELLED=1]="CANCELLED",Z[Z.UNKNOWN=2]="UNKNOWN",Z[Z.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Z[Z.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Z[Z.NOT_FOUND=5]="NOT_FOUND",Z[Z.ALREADY_EXISTS=6]="ALREADY_EXISTS",Z[Z.PERMISSION_DENIED=7]="PERMISSION_DENIED",Z[Z.UNAUTHENTICATED=16]="UNAUTHENTICATED",Z[Z.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Z[Z.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Z[Z.ABORTED=10]="ABORTED",Z[Z.OUT_OF_RANGE=11]="OUT_OF_RANGE",Z[Z.UNIMPLEMENTED=12]="UNIMPLEMENTED",Z[Z.INTERNAL=13]="INTERNAL",Z[Z.UNAVAILABLE=14]="UNAVAILABLE",Z[Z.DATA_LOSS=15]="DATA_LOSS";function pv(){return new TextEncoder}const mv=new Ht([4294967295,4294967295],0);function Iu(n){const e=pv().encode(n),t=new bd;return t.update(e),new Uint8Array(t.digest())}function Au(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new Ht([t,i],0),new Ht([s,r],0)]}class Ba{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ti(`Invalid padding: ${t}`);if(i<0)throw new Ti(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ti(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ti(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ht.fromNumber(this.ge)}ye(e,t,i){let s=e.add(t.multiply(Ht.fromNumber(i)));return s.compare(mv)===1&&(s=new Ht([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Iu(e),[i,s]=Au(t);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);if(!this.we(a))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),a=new Ba(r,s,t);return i.forEach((l=>a.insert(l))),a}insert(e){if(this.ge===0)return;const t=Iu(e),[i,s]=Au(t);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);this.Se(a)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ti extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Or{constructor(e,t,i,s,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,cs.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Or(W.min(),s,new de(J),bt(),X())}}class cs{constructor(e,t,i,s,r){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new cs(i,t,X(),X(),X())}}class Qs{constructor(e,t,i,s){this.be=e,this.removedTargetIds=t,this.key=i,this.De=s}}class cg{constructor(e,t){this.targetId=e,this.Ce=t}}class ug{constructor(e,t,i=Pe.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class Pu{constructor(){this.ve=0,this.Fe=Cu(),this.Me=Pe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=X(),t=X(),i=X();return this.Fe.forEach(((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:Y(38017,{changeType:r})}})),new cs(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Cu()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ee(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class _v{constructor(e){this.Ge=e,this.ze=new Map,this.je=bt(),this.Je=Vs(),this.He=Vs(),this.Ye=new de(J)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Y(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,i=e.Ce.count,s=this.ot(t);if(s){const r=s.target;if(Xo(r))if(i===0){const a=new H(r.path);this.et(t,a,xe.newNoDocument(a,W.min()))}else ee(i===1,20013,{expectedCount:i});else{const a=this._t(t);if(a!==i){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(t);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=t;let a,l;try{a=Kt(i).toUint8Array()}catch(c){if(c instanceof Ld)return jn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Ba(a,s,r)}catch(c){return jn(c instanceof Ti?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let s=0;return i.forEach((r=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;e.mightContain(l)||(this.et(t,r,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((r,a)=>{const l=this.ot(a);if(l){if(r.current&&Xo(l.target)){const c=new H(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,xe.newNoDocument(c,e))}r.Be&&(t.set(a,r.ke()),r.qe())}}));let i=X();this.He.forEach(((r,a)=>{let l=!0;a.forEachWhile((c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(i=i.add(r))})),this.je.forEach(((r,a)=>a.setReadTime(e)));const s=new Or(e,t,this.Ye,this.je,i);return this.je=bt(),this.Je=Vs(),this.He=Vs(),this.Ye=new de(J),s}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Pu,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ee(J),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ee(J),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||j("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Pu),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Vs(){return new de(H.comparator)}function Cu(){return new de(H.comparator)}const yv={asc:"ASCENDING",desc:"DESCENDING"},kv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vv={and:"AND",or:"OR"};class bv{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ea(n,e){return n.useProto3Json||as(e)?e:{value:e}}function gr(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hg(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ev(n,e){return gr(n,e.toTimestamp())}function Ye(n){return ee(!!n,49232),W.fromTimestamp((function(t){const i=zt(t);return new le(i.seconds,i.nanos)})(n))}function Ha(n,e){return ta(n,e).canonicalString()}function ta(n,e){const t=(function(s){return new ie(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function dg(n){const e=ie.fromString(n);return ee(yg(e),10190,{key:e.toString()}),e}function fr(n,e){return Ha(n.databaseId,e.path)}function Li(n,e){const t=dg(e);if(t.get(1)!==n.databaseId.projectId)throw new M(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new M(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new H(fg(t))}function gg(n,e){return Ha(n.databaseId,e)}function wv(n){const e=dg(n);return e.length===4?ie.emptyPath():fg(e)}function na(n){return new ie(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function fg(n){return ee(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Nu(n,e,t){return{name:fr(n,e),fields:t.value.mapValue.fields}}function Tv(n,e){return"found"in e?(function(i,s){ee(!!s.found,43571),s.found.name,s.found.updateTime;const r=Li(i,s.found.name),a=Ye(s.found.updateTime),l=s.found.createTime?Ye(s.found.createTime):W.min(),c=new Oe({mapValue:{fields:s.found.fields}});return xe.newFoundDocument(r,a,l,c)})(n,e):"missing"in e?(function(i,s){ee(!!s.missing,3894),ee(!!s.readTime,22933);const r=Li(i,s.missing),a=Ye(s.readTime);return xe.newNoDocument(r,a)})(n,e):Y(7234,{result:e})}function xv(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Y(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=(function(h,f){return h.useProto3Json?(ee(f===void 0||typeof f=="string",58123),Pe.fromBase64String(f||"")):(ee(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Pe.fromUint8Array(f||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&(function(h){const f=h.code===void 0?L.UNKNOWN:lg(h.code);return new M(f,h.message||"")})(a);t=new ug(i,s,r,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Li(n,i.document.name),r=Ye(i.document.updateTime),a=i.document.createTime?Ye(i.document.createTime):W.min(),l=new Oe({mapValue:{fields:i.document.fields}}),c=xe.newFoundDocument(s,r,a,l),h=i.targetIds||[],f=i.removedTargetIds||[];t=new Qs(h,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Li(n,i.document),r=i.readTime?Ye(i.readTime):W.min(),a=xe.newNoDocument(s,r),l=i.removedTargetIds||[];t=new Qs([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Li(n,i.document),r=i.removedTargetIds||[];t=new Qs([],r,s,null)}else{if(!("filter"in e))return Y(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,a=new fv(s,r),l=i.targetId;t=new cg(l,a)}}return t}function pg(n,e){let t;if(e instanceof ls)t={update:Nu(n,e.key,e.value)};else if(e instanceof Vr)t={delete:fr(n,e.key)};else if(e instanceof tn)t={update:Nu(n,e.key,e.data),updateMask:Dv(e.fieldMask)};else{if(!(e instanceof og))return Y(16599,{Vt:e.type});t={verify:fr(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(r,a){const l=a.transform;if(l instanceof Yi)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Wi)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Gi)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof dr)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw Y(20930,{transform:a.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(s,r){return r.updateTime!==void 0?{updateTime:Ev(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Y(27497)})(n,e.precondition)),t}function Rv(n,e){return n&&n.length>0?(ee(e!==void 0,14353),n.map((t=>(function(s,r){let a=s.updateTime?Ye(s.updateTime):Ye(r);return a.isEqual(W.min())&&(a=Ye(r)),new cv(a,s.transformResults||[])})(t,e)))):[]}function Sv(n,e){return{documents:[gg(n,e.path)]}}function Iv(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=gg(n,s);const r=(function(h){if(h.length!==0)return _g(Xe.create(h,"and"))})(e.filters);r&&(t.structuredQuery.where=r);const a=(function(h){if(h.length!==0)return h.map((f=>(function(_){return{field:An(_.field),direction:Cv(_.dir)}})(f)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=ea(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:s}}function Av(n){let e=wv(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){ee(i===1,65062);const f=t.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let r=[];t.where&&(r=(function(p){const _=mg(p);return _ instanceof Xe&&qd(_)?_.getFilters():[_]})(t.where));let a=[];t.orderBy&&(a=(function(p){return p.map((_=>(function(R){return new $i(Pn(R.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(_)))})(t.orderBy));let l=null;t.limit&&(l=(function(p){let _;return _=typeof p=="object"?p.value:p,as(_)?null:_})(t.limit));let c=null;t.startAt&&(c=(function(p){const _=!!p.before,b=p.values||[];return new ur(b,_)})(t.startAt));let h=null;return t.endAt&&(h=(function(p){const _=!p.before,b=p.values||[];return new ur(b,_)})(t.endAt)),Kk(e,s,a,r,l,"F",c,h)}function Pv(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function mg(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Pn(t.unaryFilter.field);return _e.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Pn(t.unaryFilter.field);return _e.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Pn(t.unaryFilter.field);return _e.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Pn(t.unaryFilter.field);return _e.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}})(n):n.fieldFilter!==void 0?(function(t){return _e.create(Pn(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Xe.create(t.compositeFilter.filters.map((i=>mg(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Y(1026)}})(t.compositeFilter.op))})(n):Y(30097,{filter:n})}function Cv(n){return yv[n]}function Nv(n){return kv[n]}function Lv(n){return vv[n]}function An(n){return{fieldPath:n.canonicalString()}}function Pn(n){return Ie.fromServerFormat(n.fieldPath)}function _g(n){return n instanceof _e?(function(t){if(t.op==="=="){if(ku(t.value))return{unaryFilter:{field:An(t.field),op:"IS_NAN"}};if(yu(t.value))return{unaryFilter:{field:An(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ku(t.value))return{unaryFilter:{field:An(t.field),op:"IS_NOT_NAN"}};if(yu(t.value))return{unaryFilter:{field:An(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:An(t.field),op:Nv(t.op),value:t.value}}})(n):n instanceof Xe?(function(t){const i=t.getFilters().map((s=>_g(s)));return i.length===1?i[0]:{compositeFilter:{op:Lv(t.op),filters:i}}})(n):Y(54877,{filter:n})}function Dv(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function yg(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Mt{constructor(e,t,i,s,r=W.min(),a=W.min(),l=Pe.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Mt(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Mt(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mt(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mt(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Fv{constructor(e){this.yt=e}}function Vv(n){const e=Av({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?hr(e,e.limit,"L"):e}class Ov{constructor(){this.Cn=new Mv}addToCollectionParentIndex(e,t){return this.Cn.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(Gt.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(Gt.min())}updateCollectionGroup(e,t,i){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}}class Mv{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new Ee(ie.comparator),r=!s.has(i);return this.index[t]=s.add(i),r}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Ee(ie.comparator)).toArray()}}const Lu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kg=41943040;class Ue{static withCacheSize(e){return new Ue(e,Ue.DEFAULT_COLLECTION_PERCENTILE,Ue.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}Ue.DEFAULT_COLLECTION_PERCENTILE=10,Ue.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ue.DEFAULT=new Ue(kg,Ue.DEFAULT_COLLECTION_PERCENTILE,Ue.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ue.DISABLED=new Ue(-1,0,0);class qn{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new qn(0)}static cr(){return new qn(-1)}}const Du="LruGarbageCollector",vg=1048576;function Fu([n,e],[t,i]){const s=J(n,t);return s===0?J(e,i):s}class jv{constructor(e){this.Ir=e,this.buffer=new Ee(Fu),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Fu(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Uv{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){j(Du,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Zn(t)?j(Du,"Ignoring IndexedDB error during garbage collection: ",t):await Xn(t)}await this.Vr(3e5)}))}}class Bv{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return F.resolve(Ar.ce);const i=new jv(t);return this.mr.forEachTarget(e,(s=>i.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>i.Ar(s))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(Lu)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lu):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,s,r,a,l,c,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(e,s)))).next((p=>(i=p,l=Date.now(),this.removeTargets(e,i,t)))).next((p=>(r=p,c=Date.now(),this.removeOrphanedDocuments(e,i)))).next((p=>(h=Date.now(),Sn()<=Q.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${r} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-f}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:p}))))}}function Hv(n,e){return new Bv(n,e)}class qv{constructor(){this.changes=new kn((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xe.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?F.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $v{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Yv{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(i!==null&&Ni(i.mutation,s,$e.empty(),le.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,X()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=X()){const s=dn();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,i).next((r=>{let a=wi();return r.forEach(((l,c)=>{a=a.insert(l,c.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const i=dn();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,X())))}populateOverlays(e,t,i){const s=[];return i.forEach((r=>{t.has(r)||s.push(r)})),this.documentOverlayCache.getOverlays(e,s).next((r=>{r.forEach(((a,l)=>{t.set(a,l)}))}))}computeViews(e,t,i,s){let r=bt();const a=Ci(),l=(function(){return Ci()})();return t.forEach(((c,h)=>{const f=i.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof tn)?r=r.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),Ni(f.mutation,h,f.mutation.getFieldMask(),le.now())):a.set(h.key,$e.empty())})),this.recalculateAndSaveOverlays(e,r).next((c=>(c.forEach(((h,f)=>a.set(h,f))),t.forEach(((h,f)=>l.set(h,new $v(f,a.get(h)??null)))),l)))}recalculateAndSaveOverlays(e,t){const i=Ci();let s=new de(((a,l)=>a-l)),r=X();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const l of a)l.keys().forEach((c=>{const h=t.get(c);if(h===null)return;let f=i.get(c)||$e.empty();f=l.applyToLocalView(h,f),i.set(c,f);const p=(s.get(l.batchId)||X()).add(c);s=s.insert(l.batchId,p)}))})).next((()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,f=c.value,p=Xd();f.forEach((_=>{if(!r.has(_)){const b=sg(t.get(_),i.get(_));b!==null&&p.set(_,b),r=r.add(_)}})),a.push(this.documentOverlayCache.saveOverlays(e,h,p))}return F.waitFor(a)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,s){return(function(a){return H.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Gd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next((r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-r.size):F.resolve(dn());let l=ji,c=r;return a.next((h=>F.forEach(h,((f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),r.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next((_=>{c=c.insert(f,_)}))))).next((()=>this.populateOverlays(e,h,r))).next((()=>this.computeViews(e,c,h,X()))).next((f=>({batchId:l,changes:Jd(f)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new H(t)).next((i=>{let s=wi();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const r=t.collectionGroup;let a=wi();return this.indexManager.getCollectionParents(e,r).next((l=>F.forEach(l,(c=>{const h=(function(p,_){return new ei(_,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(r));return this.getDocumentsMatchingCollectionQuery(e,h,i,s).next((f=>{f.forEach(((p,_)=>{a=a.insert(p,_)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,r,s)))).next((a=>{r.forEach(((c,h)=>{const f=h.getKey();a.get(f)===null&&(a=a.insert(f,xe.newInvalidDocument(f)))}));let l=wi();return a.forEach(((c,h)=>{const f=r.get(c);f!==void 0&&Ni(f.mutation,h,$e.empty(),le.now()),Lr(t,h)&&(l=l.insert(c,h))})),l}))}}class Wv{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return F.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Ye(s.createTime)}})(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:Vv(s.bundledQuery),readTime:Ye(s.readTime)}})(t)),F.resolve()}}class Gv{constructor(){this.overlays=new de(H.comparator),this.qr=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){const i=dn();return F.forEach(t,(s=>this.getOverlay(e,s).next((r=>{r!==null&&i.set(s,r)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((s,r)=>{this.St(e,t,r)})),F.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach((r=>this.overlays=this.overlays.remove(r))),this.qr.delete(i)),F.resolve()}getOverlaysForCollection(e,t,i){const s=dn(),r=t.length+1,a=new H(t.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===r&&c.largestBatchId>i&&s.set(c.getKey(),c)}return F.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let r=new de(((h,f)=>h-f));const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let f=r.get(h.largestBatchId);f===null&&(f=dn(),r=r.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=dn(),c=r.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((h,f)=>l.set(h,f))),!(l.size()>=s)););return F.resolve(l)}St(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new gv(t,i));let r=this.qr.get(t);r===void 0&&(r=X(),this.qr.set(t,r)),this.qr.set(t,r.add(i.key))}}class zv{constructor(){this.sessionToken=Pe.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}}class qa{constructor(){this.Qr=new Ee(Te.$r),this.Ur=new Ee(Te.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Te(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Te(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new H(new ie([])),i=new Te(t,e),s=new Te(t,e+1),r=[];return this.Ur.forEachInRange([i,s],(a=>{this.Gr(a),r.push(a.key)})),r}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new H(new ie([])),i=new Te(t,e),s=new Te(t,e+1);let r=X();return this.Ur.forEachInRange([i,s],(a=>{r=r.add(a.key)})),r}containsKey(e){const t=new Te(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Te{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return H.comparator(e.key,t.key)||J(e.Yr,t.Yr)}static Kr(e,t){return J(e.Yr,t.Yr)||H.comparator(e.key,t.key)}}class Kv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ee(Te.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new dv(r,t,i,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new Te(l.key,r)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(a)}lookupMutationBatch(e,t){return F.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.ei(i),r=s<0?0:s;return F.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?Da:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Te(t,0),s=new Te(t,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([i,s],(a=>{const l=this.Xr(a.Yr);r.push(l)})),F.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ee(J);return t.forEach((s=>{const r=new Te(s,0),a=new Te(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,a],(l=>{i=i.add(l.Yr)}))})),F.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let r=i;H.isDocumentKey(r)||(r=r.child(""));const a=new Te(new H(r),0);let l=new Ee(J);return this.Zr.forEachWhile((c=>{const h=c.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(l=l.add(c.Yr)),!0)}),a),F.resolve(this.ti(l))}ti(e){const t=[];return e.forEach((i=>{const s=this.Xr(i);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){ee(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return F.forEach(t.mutations,(s=>{const r=new Te(s.key,t.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Te(t,0),s=this.Zr.firstAfterOrEqual(i);return F.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Qv{constructor(e){this.ri=e,this.docs=(function(){return new de(H.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),r=s?s.size:0,a=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return F.resolve(i?i.document.mutableCopy():xe.newInvalidDocument(t))}getEntries(e,t){let i=bt();return t.forEach((s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():xe.newInvalidDocument(s))})),F.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let r=bt();const a=t.path,l=new H(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:f}}=c.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||Sk(Rk(f),i)<=0||(s.has(f.key)||Lr(t,f))&&(r=r.insert(f.key,f.mutableCopy()))}return F.resolve(r)}getAllFromCollectionGroup(e,t,i,s){Y(9500)}ii(e,t){return F.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new Jv(this)}getSize(e){return F.resolve(this.size)}}class Jv extends qv{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)})),F.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Xv{constructor(e){this.persistence=e,this.si=new kn((t=>Oa(t)),Ma),this.lastRemoteSnapshotVersion=W.min(),this.highestTargetId=0,this.oi=0,this._i=new qa,this.targetCount=0,this.ai=qn.ur()}forEachTarget(e,t){return this.si.forEach(((i,s)=>t(s))),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),F.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new qn(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.Pr(t),F.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,i){let s=0;const r=[];return this.si.forEach(((a,l)=>{l.sequenceNumber<=t&&i.get(l.targetId)===null&&(this.si.delete(a),r.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)})),F.waitFor(r).next((()=>s))}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return F.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),F.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const s=this.persistence.referenceDelegate,r=[];return s&&t.forEach((a=>{r.push(s.markPotentiallyOrphaned(e,a))})),F.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),F.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return F.resolve(i)}containsKey(e,t){return F.resolve(this._i.containsKey(t))}}class bg{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ar(0),this.li=!1,this.li=!0,this.hi=new zv,this.referenceDelegate=e(this),this.Pi=new Xv(this),this.indexManager=new Ov,this.remoteDocumentCache=(function(s){return new Qv(s)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new Fv(t),this.Ii=new Wv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Gv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new Kv(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){j("MemoryPersistence","Starting transaction:",e);const s=new Zv(this.ci.next());return this.referenceDelegate.Ei(),i(s).next((r=>this.referenceDelegate.di(s).next((()=>r)))).toPromise().then((r=>(s.raiseOnCommittedEvent(),r)))}Ai(e,t){return F.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class Zv extends Ak{constructor(e){super(),this.currentSequenceNumber=e}}class $a{constructor(e){this.persistence=e,this.Ri=new qa,this.Vi=null}static mi(e){return new $a(e)}get fi(){if(this.Vi)return this.Vi;throw Y(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),F.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),F.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((r=>this.fi.add(r.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,(i=>{const s=H.fromPath(i);return this.gi(e,s).next((r=>{r||t.removeEntry(s,W.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return F.or([()=>F.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class pr{constructor(e,t){this.persistence=e,this.pi=new kn((i=>Nk(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=Hv(this,t)}static mi(e,t){return new pr(e,t)}Ei(){}di(e){return F.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return F.forEach(this.pi,((i,s)=>this.br(e,i,s).next((r=>r?F.resolve():t(s)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(e,(a=>this.br(e,a,t).next((l=>{l||(i++,r.removeEntry(a,W.min()))})))).next((()=>r.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),F.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),F.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),F.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Gs(e.data.value)),t}br(e,t,i){return F.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return F.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ya{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=s}static As(e,t){let i=X(),s=X();for(const r of t.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new Ya(e,t.fromCache,i,s)}}class eb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class tb{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Am()?8:Pk(De())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,s){const r={result:null};return this.ys(e,t).next((a=>{r.result=a})).next((()=>{if(!r.result)return this.ws(e,t,s,i).next((a=>{r.result=a}))})).next((()=>{if(r.result)return;const a=new eb;return this.Ss(e,t,a).next((l=>{if(r.result=l,this.Vs)return this.bs(e,t,a,l.size)}))})).next((()=>r.result))}bs(e,t,i,s){return i.documentReadCount<this.fs?(Sn()<=Q.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",In(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(Sn()<=Q.DEBUG&&j("QueryEngine","Query:",In(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Sn()<=Q.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",In(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rt(t))):F.resolve())}ys(e,t){if(wu(t))return F.resolve(null);let i=rt(t);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=hr(t,null,"F"),i=rt(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((r=>{const a=X(...r);return this.ps.getDocuments(e,a).next((l=>this.indexManager.getMinOffset(e,i).next((c=>{const h=this.Ds(t,l);return this.Cs(t,h,a,c.readTime)?this.ys(e,hr(t,null,"F")):this.vs(e,h,t,c)}))))})))))}ws(e,t,i,s){return wu(t)||s.isEqual(W.min())?F.resolve(null):this.ps.getDocuments(e,i).next((r=>{const a=this.Ds(t,r);return this.Cs(t,a,i,s)?F.resolve(null):(Sn()<=Q.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),In(t)),this.vs(e,a,t,xk(s,ji)).next((l=>l)))}))}Ds(e,t){let i=new Ee(Kd(e));return t.forEach(((s,r)=>{Lr(e,r)&&(i=i.add(r))})),i}Cs(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const r=e.limitType==="F"?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(e,t,i){return Sn()<=Q.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",In(t)),this.ps.getDocumentsMatchingQuery(e,t,Gt.min(),i)}vs(e,t,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next((r=>(t.forEach((a=>{r=r.insert(a.key,a)})),r)))}}const Wa="LocalStore",nb=3e8;class ib{constructor(e,t,i,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new de(J),this.xs=new kn((r=>Oa(r)),Ma),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yv(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function sb(n,e,t,i){return new ib(n,e,t,i)}async function Eg(n,e){const t=z(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next((r=>(s=r,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((r=>{const a=[],l=[];let c=X();for(const h of s){a.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}for(const h of r){l.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}return t.localDocuments.getDocuments(i,c).next((h=>({Ls:h,removedBatchIds:a,addedBatchIds:l})))}))}))}function rb(n,e){const t=z(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),r=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,c,h,f){const p=h.batch,_=p.keys();let b=F.resolve();return _.forEach((R=>{b=b.next((()=>f.getEntry(c,R))).next((A=>{const I=h.docVersions.get(R);ee(I!==null,48541),A.version.compareTo(I)<0&&(p.applyToRemoteDocument(A,h),A.isValidDocument()&&(A.setReadTime(h.commitVersion),f.addEntry(A)))}))})),b.next((()=>l.mutationQueue.removeMutationBatch(c,p)))})(t,i,e,r).next((()=>r.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(l){let c=X();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c})(e)))).next((()=>t.localDocuments.getDocuments(i,s)))}))}function wg(n){const e=z(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function ob(n,e){const t=z(n),i=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(r=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const l=[];e.targetChanges.forEach(((f,p)=>{const _=s.get(p);if(!_)return;l.push(t.Pi.removeMatchingKeys(r,f.removedDocuments,p).next((()=>t.Pi.addMatchingKeys(r,f.addedDocuments,p))));let b=_.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(p)!==null?b=b.withResumeToken(Pe.EMPTY_BYTE_STRING,W.min()).withLastLimboFreeSnapshotVersion(W.min()):f.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(f.resumeToken,i)),s=s.insert(p,b),(function(A,I,D){return A.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=nb?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0})(_,b,f)&&l.push(t.Pi.updateTargetData(r,b))}));let c=bt(),h=X();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(r,f))})),l.push(ab(r,a,e.documentUpdates).next((f=>{c=f.ks,h=f.qs}))),!i.isEqual(W.min())){const f=t.Pi.getLastRemoteSnapshotVersion(r).next((p=>t.Pi.setTargetsMetadata(r,r.currentSequenceNumber,i)));l.push(f)}return F.waitFor(l).next((()=>a.apply(r))).next((()=>t.localDocuments.getLocalViewOfDocuments(r,c,h))).next((()=>c))})).then((r=>(t.Ms=s,r)))}function ab(n,e,t){let i=X(),s=X();return t.forEach((r=>i=i.add(r))),e.getEntries(n,i).next((r=>{let a=bt();return t.forEach(((l,c)=>{const h=r.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(W.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):j(Wa,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)})),{ks:a,qs:s}}))}function lb(n,e){const t=z(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Da),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function cb(n,e){const t=z(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return t.Pi.getTargetData(i,e).next((r=>r?(s=r,F.resolve(s)):t.Pi.allocateTargetId(i).next((a=>(s=new Mt(e,a,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=t.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function ia(n,e,t){const i=z(n),s=i.Ms.get(e),r=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",r,(a=>i.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!Zn(a))throw a;j(Wa,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function Vu(n,e,t){const i=z(n);let s=W.min(),r=X();return i.persistence.runTransaction("Execute query","readwrite",(a=>(function(c,h,f){const p=z(c),_=p.xs.get(f);return _!==void 0?F.resolve(p.Ms.get(_)):p.Pi.getTargetData(h,f)})(i,a,rt(e)).next((l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,l.targetId).next((c=>{r=c}))})).next((()=>i.Fs.getDocumentsMatchingQuery(a,e,t?s:W.min(),t?r:X()))).next((l=>(ub(i,Jk(e),l),{documents:l,Qs:r})))))}function ub(n,e,t){let i=n.Os.get(e)||W.min();t.forEach(((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)})),n.Os.set(e,i)}class Ou{constructor(){this.activeTargetIds=iv()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hb{constructor(){this.Mo=new Ou,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ou,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class db{Oo(e){}shutdown(){}}const Mu="ConnectivityMonitor";class ju{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){j(Mu,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){j(Mu,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Os=null;function sa(){return Os===null?Os=(function(){return 268435456+Math.round(2147483648*Math.random())})():Os++,"0x"+Os.toString(16)}const Po="RestConnection",gb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fb{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Bi?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,t,i,s,r){const a=sa(),l=this.zo(e,t.toUriEncodedString());j(Po,`Sending RPC '${e}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,r);const{host:h}=new URL(l),f=yn(h);return this.Jo(e,l,c,i,f).then((p=>(j(Po,`Received RPC '${e}' ${a}: `,p),p)),(p=>{throw jn(Po,`RPC '${e}' ${a} failed with error: `,p,"url: ",l,"request:",i),p}))}Ho(e,t,i,s,r,a){return this.Go(e,t,i,s,r)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Jn})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,r)=>e[r]=s)),i&&i.headers.forEach(((s,r)=>e[r]=s))}zo(e,t){const i=gb[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}class pb{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Ne="WebChannelConnection";class mb extends fb{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,s,r){const a=sa();return new Promise(((l,c)=>{const h=new Ed;h.setWithCredentials(!0),h.listenOnce(wd.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Ws.NO_ERROR:const p=h.getResponseJson();j(Ne,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),l(p);break;case Ws.TIMEOUT:j(Ne,`RPC '${e}' ${a} timed out`),c(new M(L.DEADLINE_EXCEEDED,"Request time out"));break;case Ws.HTTP_ERROR:const _=h.getStatus();if(j(Ne,`RPC '${e}' ${a} failed with status:`,_,"response text:",h.getResponseText()),_>0){let b=h.getResponseJson();Array.isArray(b)&&(b=b[0]);const R=b?.error;if(R&&R.status&&R.message){const A=(function(D){const C=D.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(C)>=0?C:L.UNKNOWN})(R.status);c(new M(A,R.message))}else c(new M(L.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new M(L.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{j(Ne,`RPC '${e}' ${a} completed.`)}}));const f=JSON.stringify(s);j(Ne,`RPC '${e}' ${a} sending request:`,s),h.send(t,"POST",f,i,15)}))}T_(e,t,i){const s=sa(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Rd(),l=xd(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,i),c.encodeInitMessageHeaders=!0;const f=r.join("");j(Ne,`Creating RPC '${e}' stream ${s}: ${f}`,c);const p=a.createWebChannel(f,c);this.I_(p);let _=!1,b=!1;const R=new pb({Yo:I=>{b?j(Ne,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(_||(j(Ne,`Opening RPC '${e}' stream ${s} transport.`),p.open(),_=!0),j(Ne,`RPC '${e}' stream ${s} sending:`,I),p.send(I))},Zo:()=>p.close()}),A=(I,D,C)=>{I.listen(D,(V=>{try{C(V)}catch(U){setTimeout((()=>{throw U}),0)}}))};return A(p,Ei.EventType.OPEN,(()=>{b||(j(Ne,`RPC '${e}' stream ${s} transport opened.`),R.o_())})),A(p,Ei.EventType.CLOSE,(()=>{b||(b=!0,j(Ne,`RPC '${e}' stream ${s} transport closed`),R.a_(),this.E_(p))})),A(p,Ei.EventType.ERROR,(I=>{b||(b=!0,jn(Ne,`RPC '${e}' stream ${s} transport errored. Name:`,I.name,"Message:",I.message),R.a_(new M(L.UNAVAILABLE,"The operation could not be completed")))})),A(p,Ei.EventType.MESSAGE,(I=>{if(!b){const D=I.data[0];ee(!!D,16349);const C=D,V=C?.error||C[0]?.error;if(V){j(Ne,`RPC '${e}' stream ${s} received error:`,V);const U=V.status;let q=(function(k){const v=me[k];if(v!==void 0)return lg(v)})(U),B=V.message;q===void 0&&(q=L.INTERNAL,B="Unknown error status: "+U+" with message "+V.message),b=!0,R.a_(new M(q,B)),p.close()}else j(Ne,`RPC '${e}' stream ${s} received:`,D),R.u_(D)}})),A(l,Td.STAT_EVENT,(I=>{I.stat===Go.PROXY?j(Ne,`RPC '${e}' stream ${s} detected buffering proxy`):I.stat===Go.NOPROXY&&j(Ne,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Co(){return typeof document<"u"?document:null}function Mr(n){return new bv(n,!0)}class Ga{constructor(e,t,i=1e3,s=1.5,r=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-i);s>0&&j("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Uu="PersistentStream";class Tg{constructor(e,t,i,s,r,a,l,c){this.Mi=e,this.S_=i,this.b_=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ga(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===L.RESOURCE_EXHAUSTED?(vt(t.toString()),vt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===t&&this.G_(i,s)}),(i=>{e((()=>{const s=new M(L.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return j(Uu,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(j(Uu,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class _b extends Tg{constructor(e,t,i,s,r,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,a),this.serializer=r}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=xv(this.serializer,e),i=(function(r){if(!("targetChange"in r))return W.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?W.min():a.readTime?Ye(a.readTime):W.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=na(this.serializer),t.addTarget=(function(r,a){let l;const c=a.target;if(l=Xo(c)?{documents:Sv(r,c)}:{query:Iv(r,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=hg(r,a.resumeToken);const h=ea(r,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(W.min())>0){l.readTime=gr(r,a.snapshotVersion.toTimestamp());const h=ea(r,a.expectedCount);h!==null&&(l.expectedCount=h)}return l})(this.serializer,e);const i=Pv(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=na(this.serializer),t.removeTarget=e,this.q_(t)}}class yb extends Tg{constructor(e,t,i,s,r,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,a),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Rv(e.writeResults,e.commitTime),i=Ye(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=na(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>pg(this.serializer,i)))};this.q_(t)}}class kb{}class vb extends kb{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new M(L.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,a])=>this.connection.Go(e,ta(t,i),s,r,a))).catch((r=>{throw r.name==="FirebaseError"?(r.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new M(L.UNKNOWN,r.toString())}))}Ho(e,t,i,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Ho(e,ta(t,i),s,a,l,r))).catch((a=>{throw a.name==="FirebaseError"?(a.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new M(L.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class bb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vt(t),this.aa=!1):j("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const _n="RemoteStore";class Eb{constructor(e,t,i,s,r){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo((a=>{i.enqueueAndForget((async()=>{vn(this)&&(j(_n,"Restarting streams for network reachability change."),await(async function(c){const h=z(c);h.Ea.add(4),await us(h),h.Ra.set("Unknown"),h.Ea.delete(4),await jr(h)})(this))}))})),this.Ra=new bb(i,s)}}async function jr(n){if(vn(n))for(const e of n.da)await e(!0)}async function us(n){for(const e of n.da)await e(!1)}function xg(n,e){const t=z(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ja(t)?Qa(t):ti(t).O_()&&Ka(t,e))}function za(n,e){const t=z(n),i=ti(t);t.Ia.delete(e),i.O_()&&Rg(t,e),t.Ia.size===0&&(i.O_()?i.L_():vn(t)&&t.Ra.set("Unknown"))}function Ka(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(W.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ti(n).Y_(e)}function Rg(n,e){n.Va.Ue(e),ti(n).Z_(e)}function Qa(n){n.Va=new _v({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ti(n).start(),n.Ra.ua()}function Ja(n){return vn(n)&&!ti(n).x_()&&n.Ia.size>0}function vn(n){return z(n).Ea.size===0}function Sg(n){n.Va=void 0}async function wb(n){n.Ra.set("Online")}async function Tb(n){n.Ia.forEach(((e,t)=>{Ka(n,e)}))}async function xb(n,e){Sg(n),Ja(n)?(n.Ra.ha(e),Qa(n)):n.Ra.set("Unknown")}async function Rb(n,e,t){if(n.Ra.set("Online"),e instanceof ug&&e.state===2&&e.cause)try{await(async function(s,r){const a=r.cause;for(const l of r.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))})(n,e)}catch(i){j(_n,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await mr(n,i)}else if(e instanceof Qs?n.Va.Ze(e):e instanceof cg?n.Va.st(e):n.Va.tt(e),!t.isEqual(W.min()))try{const i=await wg(n.localStore);t.compareTo(i)>=0&&await(function(r,a){const l=r.Va.Tt(a);return l.targetChanges.forEach(((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const f=r.Ia.get(h);f&&r.Ia.set(h,f.withResumeToken(c.resumeToken,a))}})),l.targetMismatches.forEach(((c,h)=>{const f=r.Ia.get(c);if(!f)return;r.Ia.set(c,f.withResumeToken(Pe.EMPTY_BYTE_STRING,f.snapshotVersion)),Rg(r,c);const p=new Mt(f.target,c,h,f.sequenceNumber);Ka(r,p)})),r.remoteSyncer.applyRemoteEvent(l)})(n,t)}catch(i){j(_n,"Failed to raise snapshot:",i),await mr(n,i)}}async function mr(n,e,t){if(!Zn(e))throw e;n.Ea.add(1),await us(n),n.Ra.set("Offline"),t||(t=()=>wg(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{j(_n,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await jr(n)}))}function Ig(n,e){return e().catch((t=>mr(n,t,e)))}async function Ur(n){const e=z(n),t=Jt(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Da;for(;Sb(e);)try{const s=await lb(e.localStore,i);if(s===null){e.Ta.length===0&&t.L_();break}i=s.batchId,Ib(e,s)}catch(s){await mr(e,s)}Ag(e)&&Pg(e)}function Sb(n){return vn(n)&&n.Ta.length<10}function Ib(n,e){n.Ta.push(e);const t=Jt(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Ag(n){return vn(n)&&!Jt(n).x_()&&n.Ta.length>0}function Pg(n){Jt(n).start()}async function Ab(n){Jt(n).ra()}async function Pb(n){const e=Jt(n);for(const t of n.Ta)e.ea(t.mutations)}async function Cb(n,e,t){const i=n.Ta.shift(),s=Ua.from(i,e,t);await Ig(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Ur(n)}async function Nb(n,e){e&&Jt(n).X_&&await(async function(i,s){if((function(a){return ag(a)&&a!==L.ABORTED})(s.code)){const r=i.Ta.shift();Jt(i).B_(),await Ig(i,(()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s))),await Ur(i)}})(n,e),Ag(n)&&Pg(n)}async function Bu(n,e){const t=z(n);t.asyncQueue.verifyOperationInProgress(),j(_n,"RemoteStore received new credentials");const i=vn(t);t.Ea.add(3),await us(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await jr(t)}async function Lb(n,e){const t=z(n);e?(t.Ea.delete(2),await jr(t)):e||(t.Ea.add(2),await us(t),t.Ra.set("Unknown"))}function ti(n){return n.ma||(n.ma=(function(t,i,s){const r=z(t);return r.sa(),new _b(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)})(n.datastore,n.asyncQueue,{Xo:wb.bind(null,n),t_:Tb.bind(null,n),r_:xb.bind(null,n),H_:Rb.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Ja(n)?Qa(n):n.Ra.set("Unknown")):(await n.ma.stop(),Sg(n))}))),n.ma}function Jt(n){return n.fa||(n.fa=(function(t,i,s){const r=z(t);return r.sa(),new yb(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Ab.bind(null,n),r_:Nb.bind(null,n),ta:Pb.bind(null,n),na:Cb.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Ur(n)):(await n.fa.stop(),n.Ta.length>0&&(j(_n,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class Xa{constructor(e,t,i,s,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new st,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,r){const a=Date.now()+i,l=new Xa(e,t,a,s,r);return l.start(i),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new M(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Za(n,e){if(vt("AsyncQueue",`${e}: ${n}`),Zn(n))return new M(L.UNAVAILABLE,`${e}: ${n}`);throw n}class Vn{static emptySet(e){return new Vn(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||H.comparator(t.key,i.key):(t,i)=>H.comparator(t.key,i.key),this.keyedMap=wi(),this.sortedSet=new de(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Vn)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Vn;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class Hu{constructor(){this.ga=new de(H.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Y(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class $n{constructor(e,t,i,s,r,a,l,c,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,s,r){const a=[];return t.forEach((l=>{a.push({type:0,doc:l})})),new $n(e,t,Vn.emptySet(t),a,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nr(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}class Db{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Fb{constructor(){this.queries=qu(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const s=z(t),r=s.queries;s.queries=qu(),r.forEach(((a,l)=>{for(const c of l.Sa)c.onError(i)}))})(this,new M(L.ABORTED,"Firestore shutting down"))}}function qu(){return new kn((n=>zd(n)),Nr)}async function el(n,e){const t=z(n);let i=3;const s=e.query;let r=t.queries.get(s);r?!r.ba()&&e.Da()&&(i=2):(r=new Db,i=e.Da()?0:1);try{switch(i){case 0:r.wa=await t.onListen(s,!0);break;case 1:r.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(a){const l=Za(a,`Initialization of query '${In(e.query)}' failed`);return void e.onError(l)}t.queries.set(s,r),r.Sa.push(e),e.va(t.onlineState),r.wa&&e.Fa(r.wa)&&nl(t)}async function tl(n,e){const t=z(n),i=e.query;let s=3;const r=t.queries.get(i);if(r){const a=r.Sa.indexOf(e);a>=0&&(r.Sa.splice(a,1),r.Sa.length===0?s=e.Da()?0:1:!r.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Vb(n,e){const t=z(n);let i=!1;for(const s of e){const r=s.query,a=t.queries.get(r);if(a){for(const l of a.Sa)l.Fa(s)&&(i=!0);a.wa=s}}i&&nl(t)}function Ob(n,e,t){const i=z(n),s=i.queries.get(e);if(s)for(const r of s.Sa)r.onError(t);i.queries.delete(e)}function nl(n){n.Ca.forEach((e=>{e.next()}))}var ra,$u;($u=ra||(ra={})).Ma="default",$u.Cache="cache";class il{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new $n(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=$n.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ra.Cache}}class Cg{constructor(e){this.key=e}}class Ng{constructor(e){this.key=e}}class Mb{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=X(),this.mutatedKeys=X(),this.eu=Kd(e),this.tu=new Vn(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new Hu,s=t?t.tu:this.tu;let r=t?t.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((f,p)=>{const _=s.get(f),b=Lr(this.query,p)?p:null,R=!!_&&this.mutatedKeys.has(_.key),A=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let I=!1;_&&b?_.data.isEqual(b.data)?R!==A&&(i.track({type:3,doc:b}),I=!0):this.su(_,b)||(i.track({type:2,doc:b}),I=!0,(c&&this.eu(b,c)>0||h&&this.eu(b,h)<0)&&(l=!0)):!_&&b?(i.track({type:0,doc:b}),I=!0):_&&!b&&(i.track({type:1,doc:_}),I=!0,(c||h)&&(l=!0)),I&&(b?(a=a.add(b),r=A?r.add(f):r.delete(f)):(a=a.delete(f),r=r.delete(f)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),r=r.delete(f.key),i.track({type:1,doc:f})}return{tu:a,iu:i,Cs:l,mutatedKeys:r}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const r=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((f,p)=>(function(b,R){const A=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Rt:I})}};return A(b)-A(R)})(f.type,p.type)||this.eu(f.doc,p.doc))),this.ou(i),s=s??!1;const l=t&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,h=c!==this.Za;return this.Za=c,a.length!==0||h?{snapshot:new $n(this.query,e.tu,r,a,e.mutatedKeys,c===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Hu,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=X(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new Ng(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new Cg(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=X();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return $n.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sl="SyncEngine";class jb{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Ub{constructor(e){this.key=e,this.hu=!1}}class Bb{constructor(e,t,i,s,r,a){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new kn((l=>zd(l)),Nr),this.Iu=new Map,this.Eu=new Set,this.du=new de(H.comparator),this.Au=new Map,this.Ru=new qa,this.Vu={},this.mu=new Map,this.fu=qn.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Hb(n,e,t=!0){const i=Mg(n);let s;const r=i.Tu.get(e);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.lu()):s=await Lg(i,e,t,!0),s}async function qb(n,e){const t=Mg(n);await Lg(t,e,!0,!1)}async function Lg(n,e,t,i){const s=await cb(n.localStore,rt(e)),r=s.targetId,a=n.sharedClientState.addLocalQueryTarget(r,t);let l;return i&&(l=await $b(n,e,r,a==="current",s.resumeToken)),n.isPrimaryClient&&t&&xg(n.remoteStore,s),l}async function $b(n,e,t,i,s){n.pu=(p,_,b)=>(async function(A,I,D,C){let V=I.view.ru(D);V.Cs&&(V=await Vu(A.localStore,I.query,!1).then((({documents:E})=>I.view.ru(E,V))));const U=C&&C.targetChanges.get(I.targetId),q=C&&C.targetMismatches.get(I.targetId)!=null,B=I.view.applyChanges(V,A.isPrimaryClient,U,q);return Wu(A,I.targetId,B.au),B.snapshot})(n,p,_,b);const r=await Vu(n.localStore,e,!0),a=new Mb(e,r.Qs),l=a.ru(r.documents),c=cs.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),h=a.applyChanges(l,n.isPrimaryClient,c);Wu(n,t,h.au);const f=new jb(e,t,a);return n.Tu.set(e,f),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function Yb(n,e,t){const i=z(n),s=i.Tu.get(e),r=i.Iu.get(s.targetId);if(r.length>1)return i.Iu.set(s.targetId,r.filter((a=>!Nr(a,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await ia(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),t&&za(i.remoteStore,s.targetId),oa(i,s.targetId)})).catch(Xn)):(oa(i,s.targetId),await ia(i.localStore,s.targetId,!0))}async function Wb(n,e){const t=z(n),i=t.Tu.get(e),s=t.Iu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),za(t.remoteStore,i.targetId))}async function Gb(n,e,t){const i=eE(n);try{const s=await(function(a,l){const c=z(a),h=le.now(),f=l.reduce(((b,R)=>b.add(R.key)),X());let p,_;return c.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let R=bt(),A=X();return c.Ns.getEntries(b,f).next((I=>{R=I,R.forEach(((D,C)=>{C.isValidDocument()||(A=A.add(D))}))})).next((()=>c.localDocuments.getOverlayedDocuments(b,R))).next((I=>{p=I;const D=[];for(const C of l){const V=hv(C,p.get(C.key).overlayedDocument);V!=null&&D.push(new tn(C.key,V,Ud(V.value.mapValue),Ae.exists(!0)))}return c.mutationQueue.addMutationBatch(b,h,D,l)})).next((I=>{_=I;const D=I.applyToLocalDocumentSet(p,A);return c.documentOverlayCache.saveOverlays(b,I.batchId,D)}))})).then((()=>({batchId:_.batchId,changes:Jd(p)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(a,l,c){let h=a.Vu[a.currentUser.toKey()];h||(h=new de(J)),h=h.insert(l,c),a.Vu[a.currentUser.toKey()]=h})(i,s.batchId,t),await hs(i,s.changes),await Ur(i.remoteStore)}catch(s){const r=Za(s,"Failed to persist write");t.reject(r)}}async function Dg(n,e){const t=z(n);try{const i=await ob(t.localStore,e);e.targetChanges.forEach(((s,r)=>{const a=t.Au.get(r);a&&(ee(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?ee(a.hu,14607):s.removedDocuments.size>0&&(ee(a.hu,42227),a.hu=!1))})),await hs(t,i,e)}catch(i){await Xn(i)}}function Yu(n,e,t){const i=z(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Tu.forEach(((r,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)})),(function(a,l){const c=z(a);c.onlineState=l;let h=!1;c.queries.forEach(((f,p)=>{for(const _ of p.Sa)_.va(l)&&(h=!0)})),h&&nl(c)})(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function zb(n,e,t){const i=z(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Au.get(e),r=s&&s.key;if(r){let a=new de(H.comparator);a=a.insert(r,xe.newNoDocument(r,W.min()));const l=X().add(r),c=new Or(W.min(),new Map,new de(J),a,l);await Dg(i,c),i.du=i.du.remove(r),i.Au.delete(e),rl(i)}else await ia(i.localStore,e,!1).then((()=>oa(i,e,t))).catch(Xn)}async function Kb(n,e){const t=z(n),i=e.batch.batchId;try{const s=await rb(t.localStore,e);Vg(t,i,null),Fg(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await hs(t,s)}catch(s){await Xn(s)}}async function Qb(n,e,t){const i=z(n);try{const s=await(function(a,l){const c=z(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let f;return c.mutationQueue.lookupMutationBatch(h,l).next((p=>(ee(p!==null,37113),f=p.keys(),c.mutationQueue.removeMutationBatch(h,p)))).next((()=>c.mutationQueue.performConsistencyCheck(h))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(h,f,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f))).next((()=>c.localDocuments.getDocuments(h,f)))}))})(i.localStore,e);Vg(i,e,t),Fg(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await hs(i,s)}catch(s){await Xn(s)}}function Fg(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Vg(n,e,t){const i=z(n);let s=i.Vu[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(t?r.reject(t):r.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function oa(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||Og(n,i)}))}function Og(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(za(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),rl(n))}function Wu(n,e,t){for(const i of t)i instanceof Cg?(n.Ru.addReference(i.key,e),Jb(n,i)):i instanceof Ng?(j(sl,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||Og(n,i.key)):Y(19791,{wu:i})}function Jb(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(j(sl,"New document in limbo: "+t),n.Eu.add(i),rl(n))}function rl(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new H(ie.fromString(e)),i=n.fu.next();n.Au.set(i,new Ub(t)),n.du=n.du.insert(t,i),xg(n.remoteStore,new Mt(rt(Cr(t.path)),i,"TargetPurposeLimboResolution",Ar.ce))}}async function hs(n,e,t){const i=z(n),s=[],r=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach(((l,c)=>{a.push(i.pu(c,e,t).then((h=>{if((h||t)&&i.isPrimaryClient){const f=h?!h.fromCache:t?.targetChanges.get(c.targetId)?.current;i.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(h){s.push(h);const f=Ya.As(c.targetId,h);r.push(f)}})))})),await Promise.all(a),i.Pu.H_(s),await(async function(c,h){const f=z(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>F.forEach(h,(_=>F.forEach(_.Es,(b=>f.persistence.referenceDelegate.addReference(p,_.targetId,b))).next((()=>F.forEach(_.ds,(b=>f.persistence.referenceDelegate.removeReference(p,_.targetId,b)))))))))}catch(p){if(!Zn(p))throw p;j(Wa,"Failed to update sequence numbers: "+p)}for(const p of h){const _=p.targetId;if(!p.fromCache){const b=f.Ms.get(_),R=b.snapshotVersion,A=b.withLastLimboFreeSnapshotVersion(R);f.Ms=f.Ms.insert(_,A)}}})(i.localStore,r))}async function Xb(n,e){const t=z(n);if(!t.currentUser.isEqual(e)){j(sl,"User change. New user:",e.toKey());const i=await Eg(t.localStore,e);t.currentUser=e,(function(r,a){r.mu.forEach((l=>{l.forEach((c=>{c.reject(new M(L.CANCELLED,a))}))})),r.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await hs(t,i.Ls)}}function Zb(n,e){const t=z(n),i=t.Au.get(e);if(i&&i.hu)return X().add(i.key);{let s=X();const r=t.Iu.get(e);if(!r)return s;for(const a of r){const l=t.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function Mg(n){const e=z(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Dg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Zb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zb.bind(null,e),e.Pu.H_=Vb.bind(null,e.eventManager),e.Pu.yu=Ob.bind(null,e.eventManager),e}function eE(n){const e=z(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Kb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Qb.bind(null,e),e}class _r{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mr(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return sb(this.persistence,new tb,e.initialUser,this.serializer)}Cu(e){return new bg($a.mi,this.serializer)}Du(e){return new hb}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_r.provider={build:()=>new _r};class tE extends _r{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ee(this.persistence.referenceDelegate instanceof pr,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Uv(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Ue.withCacheSize(this.cacheSizeBytes):Ue.DEFAULT;return new bg((i=>pr.mi(i,t)),this.serializer)}}class aa{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Yu(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Xb.bind(null,this.syncEngine),await Lb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Fb})()}createDatastore(e){const t=Mr(e.databaseInfo.databaseId),i=(function(r){return new mb(r)})(e.databaseInfo);return(function(r,a,l,c){return new vb(r,a,l,c)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,s,r,a,l){return new Eb(i,s,r,a,l)})(this.localStore,this.datastore,e.asyncQueue,(t=>Yu(this.syncEngine,t,0)),(function(){return ju.v()?new ju:new db})())}createSyncEngine(e,t){return(function(s,r,a,l,c,h,f){const p=new Bb(s,r,a,l,c,h);return f&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=z(t);j(_n,"RemoteStore shutting down."),i.Ea.add(5),await us(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}aa.provider={build:()=>new aa};class ol{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class nE{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new M(L.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(s,r){const a=z(s),l={documents:r.map((p=>fr(a.serializer,p)))},c=await a.Ho("BatchGetDocuments",a.serializer.databaseId,ie.emptyPath(),l,r.length),h=new Map;c.forEach((p=>{const _=Tv(a.serializer,p);h.set(_.key.toString(),_)}));const f=[];return r.forEach((p=>{const _=h.get(p.toString());ee(!!_,55234,{key:p}),f.push(_)})),f})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Vr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const s=H.fromPath(i);this.mutations.push(new og(s,this.precondition(s)))})),await(async function(i,s){const r=z(i),a={writes:s.map((l=>pg(r.serializer,l)))};await r.Go("Commit",r.serializer.databaseId,ie.emptyPath(),a)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Y(50498,{Gu:e.constructor.name});t=W.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new M(L.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(W.min())?Ae.exists(!1):Ae.updateTime(t):Ae.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(W.min()))throw new M(L.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ae.updateTime(t)}return Ae.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class iE{constructor(e,t,i,s,r){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=s,this.deferred=r,this.zu=i.maxAttempts,this.M_=new Ga(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new nE(this.datastore),t=this.Hu(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((s=>{this.Yu(s)}))))})).catch((i=>{this.Yu(i)}))}))}Hu(e){try{const t=this.updateFunction(e);return!as(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!ag(t)}return!1}}const Xt="FirestoreClient";class sE{constructor(e,t,i,s,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=Le.UNAUTHENTICATED,this.clientId=La.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,(async a=>{j(Xt,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(i,(a=>(j(Xt,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new st;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Za(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function No(n,e){n.asyncQueue.verifyOperationInProgress(),j(Xt,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await Eg(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Gu(n,e){n.asyncQueue.verifyOperationInProgress();const t=await rE(n);j(Xt,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>Bu(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>Bu(e.remoteStore,s))),n._onlineComponents=e}async function rE(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){j(Xt,"Using user provided OfflineComponentProvider");try{await No(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;jn("Error using user provided cache. Falling back to memory cache: "+t),await No(n,new _r)}}else j(Xt,"Using default OfflineComponentProvider"),await No(n,new tE(void 0));return n._offlineComponents}async function al(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(j(Xt,"Using user provided OnlineComponentProvider"),await Gu(n,n._uninitializedComponentsProvider._online)):(j(Xt,"Using default OnlineComponentProvider"),await Gu(n,new aa))),n._onlineComponents}function oE(n){return al(n).then((e=>e.syncEngine))}function aE(n){return al(n).then((e=>e.datastore))}async function yr(n){const e=await al(n),t=e.eventManager;return t.onListen=Hb.bind(null,e.syncEngine),t.onUnlisten=Yb.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=qb.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Wb.bind(null,e.syncEngine),t}function lE(n,e,t={}){const i=new st;return n.asyncQueue.enqueueAndForget((async()=>(function(r,a,l,c,h){const f=new ol({next:_=>{f.Nu(),a.enqueueAndForget((()=>tl(r,p)));const b=_.docs.has(l);!b&&_.fromCache?h.reject(new M(L.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&_.fromCache&&c&&c.source==="server"?h.reject(new M(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),p=new il(Cr(l.path),f,{includeMetadataChanges:!0,qa:!0});return el(r,p)})(await yr(n),n.asyncQueue,e,t,i))),i.promise}function cE(n,e,t={}){const i=new st;return n.asyncQueue.enqueueAndForget((async()=>(function(r,a,l,c,h){const f=new ol({next:_=>{f.Nu(),a.enqueueAndForget((()=>tl(r,p))),_.fromCache&&c.source==="server"?h.reject(new M(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),p=new il(l,f,{includeMetadataChanges:!0,qa:!0});return el(r,p)})(await yr(n),n.asyncQueue,e,t,i))),i.promise}function jg(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const zu=new Map;const Ug="firestore.googleapis.com",Ku=!0;class Qu{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new M(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ug,this.ssl=Ku}else this.host=e.host,this.ssl=e.ssl??Ku;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=kg;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vg)throw new M(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Tk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jg(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new M(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new M(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new M(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Br{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qu({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new M(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new M(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qu(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new fk;switch(i.type){case"firstParty":return new yk(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new M(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=zu.get(t);i&&(j("ComponentProvider","Removing Datastore"),zu.delete(t),i.terminate())})(this),Promise.resolve()}}function uE(n,e,t,i={}){n=Me(n,Br);const s=yn(e),r=n._getSettings(),a={...r,emulatorOptions:n._getEmulatorOptions()},l=`${e}:${t}`;s&&(ka(`https://${l}`),Fh("Firestore",!0)),r.host!==Ug&&r.host!==l&&jn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...r,host:l,ssl:s,emulatorOptions:i};if(!Yt(c,a)&&(n._setSettings(c),i.mockUserToken)){let h,f;if(typeof i.mockUserToken=="string")h=i.mockUserToken,f=Le.MOCK_USER;else{h=vm(i.mockUserToken,n._app?.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new M(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Le(p)}n._authCredentials=new pk(new Id(h,f))}}class Rt{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Rt(this.firestore,e,this._query)}}class he{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new he(this.firestore,e,this._key)}toJSON(){return{type:he._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(os(t,he._jsonSchema))return new he(e,i||null,new H(ie.fromString(t.referencePath)))}}he._jsonSchemaVersion="firestore/documentReference/1.0",he._jsonSchema={type:ye("string",he._jsonSchemaVersion),referencePath:ye("string")};class qt extends Rt{constructor(e,t,i){super(e,t,Cr(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new he(this.firestore,null,new H(e))}withConverter(e){return new qt(this.firestore,e,this._path)}}function Di(n,e,...t){if(n=ke(n),Ad("collection","path",e),n instanceof Br){const i=ie.fromString(e,...t);return cu(i),new qt(n,null,i)}{if(!(n instanceof he||n instanceof qt))throw new M(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ie.fromString(e,...t));return cu(i),new qt(n.firestore,null,i)}}function fe(n,e,...t){if(n=ke(n),arguments.length===1&&(e=La.newId()),Ad("doc","path",e),n instanceof Br){const i=ie.fromString(e,...t);return lu(i),new he(n,null,new H(i))}{if(!(n instanceof he||n instanceof qt))throw new M(L.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ie.fromString(e,...t));return lu(i),new he(n.firestore,n instanceof qt?n.converter:null,new H(i))}}const Ju="AsyncQueue";class Xu{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ga(this,"async_queue_retry"),this._c=()=>{const i=Co();i&&j(Ju,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Co();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Co();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new st;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Zn(e))throw e;j(Ju,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,vt("INTERNAL UNHANDLED ERROR: ",Zu(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Xa.createAndSchedule(this,e,t,i,(r=>this.hc(r)));return this.tc.push(s),s}uc(){this.nc&&Y(47125,{Pc:Zu(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Zu(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function eh(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const s=t;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1})(n,["next","error","complete"])}class ct extends Br{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new Xu,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xu(e),this._firestoreClient=void 0,await e}}}function hE(n,e,t){t||(t=Bi);const i=Tr(n,"firestore");if(i.isInitialized(t)){const s=i.getImmediate({identifier:t}),r=i.getOptions(t);if(Yt(r,e))return s;throw new M(L.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new M(L.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vg)throw new M(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&yn(e.host)&&ka(e.host),i.initialize({options:e,instanceIdentifier:t})}function dE(n,e){const t=typeof n=="object"?n:jh(),i=typeof n=="string"?n:Bi,s=Tr(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=ym("firestore");r&&uE(s,...r)}return s}function ds(n){if(n._terminated)throw new M(L.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||gE(n),n._firestoreClient}function gE(n){const e=n._freezeSettings(),t=(function(s,r,a,l){return new Fk(s,r,a,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,jg(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new sE(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const r=s?._online.build();return{_offline:s?._offline.build(r),_online:r}})(n._componentsProvider))}class qe{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qe(Pe.fromBase64String(e))}catch(t){throw new M(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qe(Pe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qe._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(os(e,qe._jsonSchema))return qe.fromBase64String(e.bytes)}}qe._jsonSchemaVersion="firestore/bytes/1.0",qe._jsonSchema={type:ye("string",qe._jsonSchemaVersion),bytes:ye("string")};class gs{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new M(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ie(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hr{constructor(e){this._methodName=e}}class ot{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new M(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new M(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ot._jsonSchemaVersion}}static fromJSON(e){if(os(e,ot._jsonSchema))return new ot(e.latitude,e.longitude)}}ot._jsonSchemaVersion="firestore/geoPoint/1.0",ot._jsonSchema={type:ye("string",ot._jsonSchemaVersion),latitude:ye("number"),longitude:ye("number")};class at{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0})(this._values,e._values)}toJSON(){return{type:at._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(os(e,at._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new at(e.vectorValues);throw new M(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}at._jsonSchemaVersion="firestore/vectorValue/1.0",at._jsonSchema={type:ye("string",at._jsonSchemaVersion),vectorValues:ye("object")};const fE=/^__.*__$/;class pE{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new tn(e,this.data,this.fieldMask,t,this.fieldTransforms):new ls(e,this.data,t,this.fieldTransforms)}}class Bg{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new tn(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Hg(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ac:n})}}class ll{constructor(e,t,i,s,r,a){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ll({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return kr(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Hg(this.Ac)&&fE.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class mE{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Mr(e)}Cc(e,t,i,s=!1){return new ll({Ac:e,methodName:t,Dc:i,path:Ie.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fs(n){const e=n._freezeSettings(),t=Mr(n._databaseId);return new mE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function cl(n,e,t,i,s,r={}){const a=n.Cc(r.merge||r.mergeFields?2:0,e,t,s);hl("Data must be an object, but it was:",a,i);const l=Yg(i,a);let c,h;if(r.merge)c=new $e(a.fieldMask),h=a.fieldTransforms;else if(r.mergeFields){const f=[];for(const p of r.mergeFields){const _=la(e,p,t);if(!a.contains(_))throw new M(L.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);Gg(f,_)||f.push(_)}c=new $e(f),h=a.fieldTransforms.filter((p=>c.covers(p.field)))}else c=null,h=a.fieldTransforms;return new pE(new Oe(l),c,h)}class qr extends Hr{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qr}}class ul extends Hr{_toFieldTransform(e){return new av(e.path,new Yi)}isEqual(e){return e instanceof ul}}function qg(n,e,t,i){const s=n.Cc(1,e,t);hl("Data must be an object, but it was:",s,i);const r=[],a=Oe.empty();en(i,((c,h)=>{const f=dl(e,c,t);h=ke(h);const p=s.yc(f);if(h instanceof qr)r.push(f);else{const _=ps(h,p);_!=null&&(r.push(f),a.set(f,_))}}));const l=new $e(r);return new Bg(a,l,s.fieldTransforms)}function $g(n,e,t,i,s,r){const a=n.Cc(1,e,t),l=[la(e,i,t)],c=[s];if(r.length%2!=0)throw new M(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<r.length;_+=2)l.push(la(e,r[_])),c.push(r[_+1]);const h=[],f=Oe.empty();for(let _=l.length-1;_>=0;--_)if(!Gg(h,l[_])){const b=l[_];let R=c[_];R=ke(R);const A=a.yc(b);if(R instanceof qr)h.push(b);else{const I=ps(R,A);I!=null&&(h.push(b),f.set(b,I))}}const p=new $e(h);return new Bg(f,p,a.fieldTransforms)}function _E(n,e,t,i=!1){return ps(t,n.Cc(i?4:3,e))}function ps(n,e){if(Wg(n=ke(n)))return hl("Unsupported field value:",e,n),Yg(n,e);if(n instanceof Hr)return(function(i,s){if(!Hg(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,s){const r=[];let a=0;for(const l of i){let c=ps(l,s.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),r.push(c),a++}return{arrayValue:{values:r}}})(n,e)}return(function(i,s){if((i=ke(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return sv(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=le.fromDate(i);return{timestampValue:gr(s.serializer,r)}}if(i instanceof le){const r=new le(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:gr(s.serializer,r)}}if(i instanceof ot)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof qe)return{bytesValue:hg(s.serializer,i._byteString)};if(i instanceof he){const r=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(r))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Ha(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof at)return(function(a,l){return{mapValue:{fields:{[Md]:{stringValue:jd},[cr]:{arrayValue:{values:a.toArray().map((h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return ja(l.serializer,h)}))}}}}}})(i,s);throw s.Sc(`Unsupported field value: ${Ir(i)}`)})(n,e)}function Yg(n,e){const t={};return Nd(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):en(n,((i,s)=>{const r=ps(s,e.mc(i));r!=null&&(t[i]=r)})),{mapValue:{fields:t}}}function Wg(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof le||n instanceof ot||n instanceof qe||n instanceof he||n instanceof Hr||n instanceof at)}function hl(n,e,t){if(!Wg(t)||!Pd(t)){const i=Ir(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function la(n,e,t){if((e=ke(e))instanceof gs)return e._internalPath;if(typeof e=="string")return dl(n,e);throw kr("Field path arguments must be of type string or ",n,!1,void 0,t)}const yE=new RegExp("[~\\*/\\[\\]]");function dl(n,e,t){if(e.search(yE)>=0)throw kr(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new gs(...e.split("."))._internalPath}catch{throw kr(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function kr(n,e,t,i,s){const r=i&&!i.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(r||a)&&(c+=" (found",r&&(c+=` in field ${i}`),a&&(c+=` in document ${s}`),c+=")"),new M(L.INVALID_ARGUMENT,l+n+c)}function Gg(n,e){return n.some((t=>t.isEqual(e)))}class vr{constructor(e,t,i,s,r){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new he(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($r("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class kE extends vr{data(){return super.data()}}function $r(n,e){return typeof e=="string"?dl(n,e):e instanceof gs?e._internalPath:e._delegate._internalPath}function zg(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new M(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gl{}class fl extends gl{}function vE(n,e,...t){let i=[];e instanceof gl&&i.push(e),i=i.concat(t),(function(r){const a=r.filter((c=>c instanceof pl)).length,l=r.filter((c=>c instanceof Yr)).length;if(a>1||a>0&&l>0)throw new M(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)n=s._apply(n);return n}class Yr extends fl{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Yr(e,t,i)}_apply(e){const t=this._parse(e);return Kg(e._query,t),new Rt(e.firestore,e.converter,Zo(e._query,t))}_parse(e){const t=fs(e.firestore);return(function(r,a,l,c,h,f,p){let _;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new M(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){nh(p,f);const R=[];for(const A of p)R.push(th(c,r,A));_={arrayValue:{values:R}}}else _=th(c,r,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||nh(p,f),_=_E(l,a,p,f==="in"||f==="not-in");return _e.create(h,f,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function bE(n,e,t){const i=e,s=$r("where",n);return Yr._create(s,i,t)}class pl extends gl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new pl(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Xe.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,r){let a=s;const l=r.getFlattenedFilters();for(const c of l)Kg(a,c),a=Zo(a,c)})(e._query,t),new Rt(e.firestore,e.converter,Zo(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ml extends fl{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ml(e,t)}_apply(e){const t=(function(s,r,a){if(s.startAt!==null)throw new M(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new M(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $i(r,a)})(e._query,this._field,this._direction);return new Rt(e.firestore,e.converter,(function(s,r){const a=s.explicitOrderBy.concat([r]);return new ei(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function EE(n,e="asc"){const t=e,i=$r("orderBy",n);return ml._create(i,t)}class _l extends fl{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new _l(e,t,i)}_apply(e){return new Rt(e.firestore,e.converter,hr(e._query,this._limit,this._limitType))}}function wE(n){return _l._create("limit",n,"F")}function th(n,e,t){if(typeof(t=ke(t))=="string"){if(t==="")throw new M(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gd(e)&&t.indexOf("/")!==-1)throw new M(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(ie.fromString(t));if(!H.isDocumentKey(i))throw new M(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return _u(n,new H(i))}if(t instanceof he)return _u(n,t._key);throw new M(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ir(t)}.`)}function nh(n,e){if(!Array.isArray(n)||n.length===0)throw new M(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Kg(n,e){const t=(function(s,r){for(const a of s)for(const l of a.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new M(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new M(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Qg{convertValue(e,t="none"){switch(Qt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Kt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Y(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return en(e,((s,r)=>{i[s]=this.convertValue(r,t)})),i}convertVectorValue(e){const t=e.fields?.[cr].arrayValue?.values?.map((i=>pe(i.doubleValue)));return new at(t)}convertGeoPoint(e){return new ot(pe(e.latitude),pe(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Pr(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ui(e));default:return null}}convertTimestamp(e){const t=zt(e);return new le(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ie.fromString(e);ee(yg(i),9688,{name:e});const s=new Hi(i.get(1),i.get(3)),r=new H(i.popFirst(5));return s.isEqual(t)||vt(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}function yl(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class TE extends Qg{constructor(e){super(),this.firestore=e}convertBytes(e){return new qe(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new he(this.firestore,null,t)}}class Nn{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $t extends vr{constructor(e,t,i,s,r,a){super(e,t,i,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Js(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field($r("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new M(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=$t._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}$t._jsonSchemaVersion="firestore/documentSnapshot/1.0",$t._jsonSchema={type:ye("string",$t._jsonSchemaVersion),bundleSource:ye("string","DocumentSnapshot"),bundleName:ye("string"),bundle:ye("string")};class Js extends $t{data(e={}){return super.data(e)}}class gn{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Nn(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Js(this._firestore,this._userDataWriter,i.key,i,new Nn(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new M(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((l=>{const c=new Js(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Nn(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((l=>r||l.type!==3)).map((l=>{const c=new Js(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Nn(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,f=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:xE(l.type),doc:c,oldIndex:h,newIndex:f}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new M(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=gn._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=La.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],s=[];return this.docs.forEach((r=>{r._document!==null&&(t.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function xE(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:n})}}function Ms(n){n=Me(n,he);const e=Me(n.firestore,ct);return lE(ds(e),n._key).then((t=>Jg(e,n,t)))}gn._jsonSchemaVersion="firestore/querySnapshot/1.0",gn._jsonSchema={type:ye("string",gn._jsonSchemaVersion),bundleSource:ye("string","QuerySnapshot"),bundleName:ye("string"),bundle:ye("string")};class Wr extends Qg{constructor(e){super(),this.firestore=e}convertBytes(e){return new qe(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new he(this.firestore,null,t)}}function Lo(n){n=Me(n,Rt);const e=Me(n.firestore,ct),t=ds(e),i=new Wr(e);return zg(n._query),cE(t,n._query).then((s=>new gn(e,i,n,s)))}function RE(n,e,t){n=Me(n,he);const i=Me(n.firestore,ct),s=yl(n.converter,e,t);return Gr(i,[cl(fs(i),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Ae.none())])}function Do(n,e,t,...i){n=Me(n,he);const s=Me(n.firestore,ct),r=fs(s);let a;return a=typeof(e=ke(e))=="string"||e instanceof gs?$g(r,"updateDoc",n._key,e,t,i):qg(r,"updateDoc",n._key,e),Gr(s,[a.toMutation(n._key,Ae.exists(!0))])}function xi(n){return Gr(Me(n.firestore,ct),[new Vr(n._key,Ae.none())])}function SE(n,e){const t=Me(n.firestore,ct),i=fe(n),s=yl(n.converter,e);return Gr(t,[cl(fs(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,Ae.exists(!1))]).then((()=>i))}function ih(n,...e){n=ke(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||eh(e[i])||(t=e[i++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(eh(e[i])){const c=e[i];e[i]=c.next?.bind(c),e[i+1]=c.error?.bind(c),e[i+2]=c.complete?.bind(c)}let r,a,l;if(n instanceof he)a=Me(n.firestore,ct),l=Cr(n._key.path),r={next:c=>{e[i]&&e[i](Jg(a,n,c))},error:e[i+1],complete:e[i+2]};else{const c=Me(n,Rt);a=Me(c.firestore,ct),l=c._query;const h=new Wr(a);r={next:f=>{e[i]&&e[i](new gn(a,h,c,f))},error:e[i+1],complete:e[i+2]},zg(n._query)}return(function(h,f,p,_){const b=new ol(_),R=new il(f,b,p);return h.asyncQueue.enqueueAndForget((async()=>el(await yr(h),R))),()=>{b.Nu(),h.asyncQueue.enqueueAndForget((async()=>tl(await yr(h),R)))}})(ds(a),l,s,r)}function Gr(n,e){return(function(i,s){const r=new st;return i.asyncQueue.enqueueAndForget((async()=>Gb(await oE(i),s,r))),r.promise})(ds(n),e)}function Jg(n,e,t){const i=t.docs.get(e._key),s=new Wr(n);return new $t(n,s,e._key,i,new Nn(t.hasPendingWrites,t.fromCache),e.converter)}const IE={maxAttempts:5};function Ri(n,e){if((n=ke(n)).firestore!==e)throw new M(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class AE{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=fs(e)}get(e){const t=Ri(e,this._firestore),i=new TE(this._firestore);return this._transaction.lookup([t._key]).then((s=>{if(!s||s.length!==1)return Y(24041);const r=s[0];if(r.isFoundDocument())return new vr(this._firestore,i,r.key,r,t.converter);if(r.isNoDocument())return new vr(this._firestore,i,t._key,null,t.converter);throw Y(18433,{doc:r})}))}set(e,t,i){const s=Ri(e,this._firestore),r=yl(s.converter,t,i),a=cl(this._dataReader,"Transaction.set",s._key,r,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(e,t,i,...s){const r=Ri(e,this._firestore);let a;return a=typeof(t=ke(t))=="string"||t instanceof gs?$g(this._dataReader,"Transaction.update",r._key,t,i,s):qg(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,a),this}delete(e){const t=Ri(e,this._firestore);return this._transaction.delete(t._key),this}}class PE extends AE{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ri(e,this._firestore),i=new Wr(this._firestore);return super.get(e).then((s=>new $t(this._firestore,i,t._key,s._document,new Nn(!1,!1),t.converter)))}}function ki(n,e,t){n=Me(n,ct);const i={...IE,...t};return(function(r){if(r.maxAttempts<1)throw new M(L.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(r,a,l){const c=new st;return r.asyncQueue.enqueueAndForget((async()=>{const h=await aE(r);new iE(r.asyncQueue,h,l,a,c).ju()})),c.promise})(ds(n),(s=>e(new PE(n,s))),i)}function a1(){return new ul("serverTimestamp")}(function(e,t=!0){(function(s){Jn=s})(Kn),Mn(new fn("firestore",((i,{instanceIdentifier:s,options:r})=>{const a=i.getProvider("app").getImmediate(),l=new ct(new mk(i.getProvider("auth-internal")),new kk(a,i.getProvider("app-check-internal")),(function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new M(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hi(h.options.projectId,f)})(a,s),a);return r={useFetchStreams:t,...r},l._setSettings(r),l}),"PUBLIC").setMultipleInstances(!0)),Bt(su,ru,e),Bt(su,ru,"esm2020")})();const CE={apiKey:"AIzaSyDxM0rSeFqKJIZGvR2iofMaDlyxHwdr09U",authDomain:"mrn-football-legends.firebaseapp.com",projectId:"mrn-football-legends",storageBucket:"mrn-football-legends.firebasestorage.app",messagingSenderId:"197327542827",appId:"1:197327542827:web:83650eb742c71974a3e86e"},ca=Mh(CE),Rn=hk(ca);let ua;typeof window<"u"?(gk("error"),ua=hE(ca,{experimentalForceLongPolling:!0})):ua=dE(ca);const ne=ua,Fo="THARIQNoR";class be{static async generateStarterSquadIds(){const e=["PLAYER_001","PLAYER_002","PLAYER_003","PLAYER_004","PLAYER_005","PLAYER_006","PLAYER_007","PLAYER_008","PLAYER_009","PLAYER_010","PLAYER_011"];return On.filter(i=>e.includes(i.id)).map(i=>i.id)}static resolveRole(e){const t=e.toUpperCase();return t==="GTB_LOCO"||t==="SREEHARI"||t===Fo.toUpperCase()?"Owner":"Player"}static async buildProfile(e,t,i){const s=await this.generateStarterSquadIds(),r=this.resolveRole(i);return{uid:e,email:t,username:i,role:r,coins:1e3,diamonds:0,createdAt:Date.now(),squad:s,friends:[],ownedCelebrations:["FIST_PUMP","KNEE_SLIDE","ARMS_WIDE_RUN","CALM_DOWN"],friendRequestsSent:[],friendRequestsReceived:[],goals:0,wins:0,matchesPlayed:0,weeklyGoals:0,weeklyWins:0,weeklyMatches:0,forgeMaterials:0,trainingPoints:0,eventTokens:0,seasonTokens:0,skillTokens:0,rankPoints:0,legendTokens:0,forgeState:{},firstLoginRewardClaimed:!1,firstMatchRewardClaimed:!1,firstWinRewardClaimed:!1}}static withCurrencyDefaults(e){return{trainingPoints:0,eventTokens:0,seasonTokens:0,skillTokens:0,rankPoints:0,legendTokens:0,firstLoginRewardClaimed:e.firstLoginRewardClaimed??!1,firstMatchRewardClaimed:e.firstMatchRewardClaimed??!1,firstWinRewardClaimed:e.firstWinRewardClaimed??!1,...e}}static async ensureProfileForUser(e,t,i){const s=e.uid,r=e.email||"",a=fe(ne,"users",s),l=await Ms(a);if(l.exists())return this.withCurrencyDefaults(l.data());let c=t;(!c||!c.trim())&&(r?c=r.split("@")[0]:c=`user${s.slice(0,6)}`),c=c.trim();const h=!!t&&!!i;let f=null;if(await ki(ne,async p=>{if(h){const R=c.toLowerCase(),A=fe(ne,"usernames",R);if((await p.get(A)).exists())throw new Error("Username already taken");const D=await this.buildProfile(s,r,c);p.set(a,D),p.set(A,{uid:s}),f=D;return}let _=0,b=c;for(;;){const R=b.toLowerCase(),A=fe(ne,"usernames",R);if(!(await p.get(A)).exists()){const D=await this.buildProfile(s,r,b);p.set(a,D),p.set(A,{uid:s}),f=D;break}if(_+=1,b=`${c}${_}`,_>50)throw new Error("Unable to allocate username, try another")}}),!f)throw new Error("Failed to create profile");return f}static async login(e,t){const i=await J0(Rn,e,t);return await this.ensureProfileForUser(i.user)}static async signup(e,t,i){const s=await Q0(Rn,e,t);return await this.ensureProfileForUser(s.user,i,!0)}static async loginWithGoogle(){const e=new dt,t=await vy(Rn,e);return await this.ensureProfileForUser(t.user)}static async logout(){await ey(Rn)}static async resetPassword(e){Math.floor(1e5+Math.random()*9e5).toString(),await K0(Rn,e)}static async updateUserProfile(e){const t=fe(ne,"users",e.uid);await RE(t,e,{merge:!0})}static async getUserByUid(e){const t=fe(ne,"users",e),i=await Ms(t);return i.exists()?this.withCurrencyDefaults(i.data()):null}static async getUserByUsername(e){const t=e.trim().toLowerCase();if(!t)return null;const i=fe(ne,"usernames",t),s=await Ms(i);if(!s.exists())return null;const r=s.data();return r.uid?this.getUserByUid(r.uid):null}static async getAllUsers(){return(await Lo(Di(ne,"users"))).docs.map(t=>this.withCurrencyDefaults(t.data()))}static async getFriendsForUser(e){const t=await this.getUserByUid(e);if(!t||!t.friends||t.friends.length===0)return[];const i=[];for(const s of t.friends){const r=await this.getUserByUid(s);r&&i.push(r)}return i}static async addFriend(e,t){const i=t.trim();if(!i)return{success:!1,message:"Enter a username or ID"};let s=null;return/^\d{6,}$/.test(i)&&(s=await this.getUserByUid(i)),s||(s=await this.getUserByUsername(i)),s?s.uid===e.uid?{success:!1,message:"You cannot add yourself"}:await ki(ne,async a=>{const l=fe(ne,"users",e.uid),c=fe(ne,"users",s.uid),h=await a.get(l),f=await a.get(c);if(!h.exists()||!f.exists())return{success:!1,message:"User not found"};const p=h.data(),_=f.data(),b=p.friends||[],R=_.friends||[],A=p.friendRequestsSent||[],I=p.friendRequestsReceived||[],D=_.friendRequestsReceived||[];if(b.includes(_.uid)&&R.includes(p.uid))return{success:!1,message:"Already friends"};if(A.includes(_.uid))return{success:!1,message:"Friend request already sent"};if(I.includes(_.uid))return{success:!1,message:"You already have a request from this user"};const C={...p,friendRequestsSent:[...A,_.uid]},V={..._,friendRequestsReceived:[...D,p.uid]};return a.set(l,C,{merge:!0}),a.set(c,V,{merge:!0}),{success:!0,message:"Friend request sent",updatedCurrent:C}}):{success:!1,message:"User not found"}}static async getFriendRequestsForUser(e){const t=await this.getUserByUid(e);if(!t||!t.friendRequestsReceived||t.friendRequestsReceived.length===0)return[];const i=[];for(const s of t.friendRequestsReceived){const r=await this.getUserByUid(s);r&&i.push(r)}return i}static async respondToFriendRequest(e,t,i){return!e||!t?{success:!1,message:"Invalid users"}:await ki(ne,async r=>{const a=fe(ne,"users",e),l=fe(ne,"users",t),c=await r.get(a),h=await r.get(l);if(!c.exists()||!h.exists())return{success:!1,message:"User not found"};const f=c.data(),p=h.data(),_=f.friends||[],b=p.friends||[],R=f.friendRequestsReceived||[],A=p.friendRequestsSent||[];if(!R.includes(t))return{success:!1,message:"No pending request from this user"};const I=R.filter(B=>B!==t),D=A.filter(B=>B!==e);if(!i){const B={...f,friendRequestsReceived:I},E={...p,friendRequestsSent:D};return r.set(a,B,{merge:!0}),r.set(l,E,{merge:!0}),{success:!0,message:"Friend request declined"}}const C=_.includes(t)?_:[..._,t],V=b.includes(e)?b:[...b,e],U={...f,friends:C,friendRequestsReceived:I},q={...p,friends:V,friendRequestsSent:D};return r.set(a,U,{merge:!0}),r.set(l,q,{merge:!0}),{success:!0,message:"Friend request accepted"}})}static async getFriendRelation(e,t){if(!e||!t)return{relationStatus:"NONE"};const i=await this.getUserByUid(e),s=await this.getUserByUid(t);if(!i||!s)return{relationStatus:"NONE"};const r=i.friends||[],a=s.friends||[],l=i.friendRequestsSent||[],c=i.friendRequestsReceived||[];return r.includes(t)&&a.includes(e)?{relationStatus:"FRIEND"}:l.includes(t)?{relationStatus:"OUTGOING_PENDING"}:c.includes(t)?{relationStatus:"INCOMING_PENDING"}:{relationStatus:"NONE"}}static async giftToUser(e,t,i){if(!["SREEHARI",Fo.toUpperCase()].includes(e.username.toUpperCase()))throw new Error("Not authorized to send gifts");const r=await this.getUserByUsername(t);if(!r)throw new Error("Target user not found");const a=fe(ne,"users",r.uid);return await ki(ne,async c=>{const h=await c.get(a);if(!h.exists())throw new Error("Target user not found");const f=h.data(),p=i.coins&&i.coins>0?i.coins:0,_=i.diamonds&&i.diamonds>0?i.diamonds:0;if(p>0&&(f.coins=(f.coins||0)+p),_>0&&(f.diamonds=(f.diamonds||0)+_),i.playerIds&&i.playerIds.length>0){const R=i.playerIds.filter(A=>On.some(I=>I.id===A)).filter(A=>!f.squad.includes(A));R.length>0&&(f.squad=[...f.squad,...R])}return c.set(a,f,{merge:!0}),f})}static async addStatsToUser(e,t,i){if(!["SREEHARI",Fo.toUpperCase()].includes(e.username.toUpperCase()))throw new Error("Not authorized to modify stats");const r=await this.getUserByUsername(t);if(!r)throw new Error("Target user not found");const a=fe(ne,"users",r.uid);return await ki(ne,async c=>{const h=await c.get(a);if(!h.exists())throw new Error("Target user not found");const f=h.data(),p=i.goals&&i.goals>0?i.goals:0,_=i.wins&&i.wins>0?i.wins:0,b=i.matches&&i.matches>0?i.matches:0,R=i.weeklyGoals&&i.weeklyGoals>0?i.weeklyGoals:0,A=i.weeklyWins&&i.weeklyWins>0?i.weeklyWins:0,I=i.weeklyMatches&&i.weeklyMatches>0?i.weeklyMatches:0;return p>0&&(f.goals=(f.goals||0)+p),_>0&&(f.wins=(f.wins||0)+_),b>0&&(f.matchesPlayed=(f.matchesPlayed||0)+b),R>0&&(f.weeklyGoals=(f.weeklyGoals||0)+R),A>0&&(f.weeklyWins=(f.weeklyWins||0)+A),I>0&&(f.weeklyMatches=(f.weeklyMatches||0)+I),c.set(a,f,{merge:!0}),f})}static async deleteAllUsers(){typeof window<"u"&&typeof localStorage<"u"&&(localStorage.removeItem("mrn_current_user"),localStorage.removeItem("mrn_device_has_account"));const e=await Lo(Di(ne,"users"));for(const i of e.docs)await xi(i.ref);const t=await Lo(Di(ne,"usernames"));for(const i of t.docs)await xi(i.ref)}static async deleteAccount(e){const t=Rn.currentUser;if(!t||t.uid!==e)throw new Error("Unauthorized");const i=await Ms(fe(ne,"users",e));if(i.exists()){const s=i.data();s.username&&await xi(fe(ne,"usernames",s.username.toLowerCase()))}await xi(fe(ne,"users",e)),await t.delete()}}const NE={name:"Premium Pack",cost:500,currency:"Gems",cardCount:5,minOvr:75,maxOvr:95,guarantees:[{minRarity:"Rare",count:1}],probabilities:{Common:55,Rare:30,Epic:10,Legendary:4,"Premium Legend":1}},LE="mrn_pack_luck_",DE="mrn_pack_pending_";class FE{static getLuckKey(e,t){return`${LE}${e.uid}_${t}`}static getPendingKey(e){return`${DE}${e.uid}`}static loadLuckState(e,t){if(typeof window>"u"||typeof localStorage>"u")return{unluckyOpens:0};try{const i=localStorage.getItem(this.getLuckKey(e,t));if(!i)return{unluckyOpens:0};const s=JSON.parse(i);return!s||typeof s.unluckyOpens!="number"?{unluckyOpens:0}:s}catch{return{unluckyOpens:0}}}static saveLuckState(e,t,i){if(!(typeof window>"u"||typeof localStorage>"u"))try{localStorage.setItem(this.getLuckKey(e,t),JSON.stringify(i))}catch{}}static getForgeValueForPlayerId(e){const i=On.find(r=>r.id===e);if(!i||!i.rarity)return 2;const s=String(i.rarity);return s==="Common"||s==="Standard"?2:s==="Rare"?4:s==="Epic"?8:s==="Legendary"?12:16}static loadPendingResults(e){if(typeof window>"u"||typeof localStorage>"u")return[];try{const t=localStorage.getItem(this.getPendingKey(e));if(!t)return[];const i=JSON.parse(t);return Array.isArray(i)?i:[]}catch{return[]}}static savePendingResults(e,t){if(!(typeof window>"u"||typeof localStorage>"u"))try{localStorage.setItem(this.getPendingKey(e),JSON.stringify(t))}catch{}}static addPendingResult(e,t){const s=[...this.loadPendingResults(e),t].slice(-20);this.savePendingResults(e,s)}static clearPendingResult(e,t){const i=this.loadPendingResults(e);if(!i.length)return;const s=i.filter(r=>r.transactionId!==t);this.savePendingResults(e,s)}static applyPendingResultsOnBoot(e){const t=this.loadPendingResults(e);if(!t.length)return e;let i={...e},s=i.coins||0,r=i.diamonds||0,a=i.forgeMaterials||0;const l=i.forgeState||{},c=[...i.squad];for(const h of t){h.currencyType==="Gems"?r=Math.max(0,r-h.costDeduced):s=Math.max(0,s-h.costDeduced);for(const f of h.rewards)c.includes(f)?a+=this.getForgeValueForPlayerId(f):c.push(f)}return i={...i,coins:s,diamonds:r,forgeMaterials:a,forgeState:l,squad:c},this.savePendingResults(e,[]),i}static getDynamicProbabilities(e,t){const i=Math.min(Math.max(t.unluckyOpens||0,0),8);if(i<=0)return e;const s=["Common","Rare","Epic","Legendary","Premium","Premium Legend"],r={};s.forEach(D=>{const C=e[D];typeof C=="number"&&(r[D]=C)});const a=.8*i,l=.45*i,c=.25*i,h=a+l+c,f=r.Common||0,p=r.Rare||0;let _=Math.min(f-5,h*.7);_<0&&(_=0);let b=h-_;const R=Math.max(0,p-5);b>R&&(b=R),r.Common=f-_,r.Rare=p-b,r.Epic=(r.Epic||0)+a,r.Legendary=(r.Legendary||0)+l,r["Premium Legend"]=(r["Premium Legend"]||0)+c;let A=0;if(s.forEach(D=>{A+=r[D]||0}),A<=0)return e;const I={};return s.forEach(D=>{const C=r[D];typeof C=="number"&&C>0&&(I[D]=C/A*100)}),I}static getSeededRandom(e){let t=0;for(let s=0;s<e.length;s++){const r=e.charCodeAt(s);t=(t<<5)-t+r,t=t&t}const i=Math.sin(t)*1e4;return i-Math.floor(i)}static openPack(e,t){const i=t==="PREMIUM_01"?NE:null;if(!i)return{success:!1,rewards:[],costDeduced:0,currencyType:"Coins",transactionId:"",error:"Invalid Pack ID"};const s=e.gems||e.diamonds||0;if(i.currency==="Gems"&&s<i.cost)return{success:!1,rewards:[],costDeduced:0,currencyType:"Gems",transactionId:"",error:"Insufficient Gems"};const r=Date.now(),a=`${e.uid}_${t}_${r}`,l=`${e.uid}_${r}_${t}`,c=[],h=On.filter(C=>C.ovr>=i.minOvr&&C.ovr<=i.maxOvr),f=this.loadLuckState(e,t),p=(C,V)=>{let U=h;if(C!=="ANY"){const E=v=>v==="Common"?1:v==="Rare"?2:v==="Epic"?3:v==="Legendary"?4:v==="Premium"?5:v==="Premium Legend"?6:0,k=E(C);U=h.filter(v=>E(v.rarity)>=k)}if(U.length===0)return h[0];const q=this.getSeededRandom(V),B=Math.floor(q*U.length);return U[B]},_=C=>{const V=this.getDynamicProbabilities(i.probabilities,f),U=this.getSeededRandom(C+"_rarity"),q=V;let B=0;return U<(B+=(q.Common||0)/100)?"Common":U<(B+=(q.Rare||0)/100)?"Rare":U<(B+=(q.Epic||0)/100)?"Epic":U<(B+=(q.Legendary||0)/100)?"Legendary":"Premium Legend"};for(let C=0;C<i.cardCount;C++){const V=`${l}_card_${C}`;let U;if(C<i.guarantees.length){const q=i.guarantees[C];U=p(q.minRarity,V)}else{const q=_(V),B=h.filter(E=>E.rarity===q||q==="Premium Legend"&&E.rarity==="Premium");if(B.length>0){const E=this.getSeededRandom(V+"_pick");U=B[Math.floor(E*B.length)]}else U=h[0]}U||(U=h[0]),c.push(U)}const b=C=>C==="Common"?1:C==="Rare"?2:C==="Epic"?3:C==="Legendary"?4:C==="Premium"?5:C==="Premium Legend"?6:0;let R=0;for(let C=0;C<c.length;C++){const V=c[C];if(V&&typeof V.rarity=="string"){const U=b(V.rarity);U>R&&(R=U)}}const A=b("Epic"),I=R>=A?{unluckyOpens:0,lastHighRarityAt:r}:{unluckyOpens:(f.unluckyOpens||0)+1,lastHighRarityAt:f.lastHighRarityAt};this.saveLuckState(e,t,I);const D={transactionId:a,packId:t,rewards:c.map(C=>C.id),currencyType:i.currency,costDeduced:i.cost,createdAt:r};return this.addPendingResult(e,D),{success:!0,rewards:c,costDeduced:i.cost,currencyType:i.currency,transactionId:a}}}const zi="mrn_current_user",Vo="mrn_device_has_account",sh="mrn_data_version",rh="v1_force_reset_2026_02_05",VE=["PLAYER_001","PLAYER_002","PLAYER_003","PLAYER_004","PLAYER_005","PLAYER_006","PLAYER_007","PLAYER_008","PLAYER_009","PLAYER_010","PLAYER_011"],OE=()=>{if(typeof window>"u"||typeof localStorage>"u")return{user:null,isAuthenticated:!1};try{if(localStorage.getItem(sh)!==rh)return console.log("Data version mismatch. Forcing global logout and reset."),localStorage.clear(),localStorage.setItem(sh,rh),{user:null,isAuthenticated:!1};const e=localStorage.getItem(zi);if(!e)return{user:null,isAuthenticated:!1};const t=JSON.parse(e);if(t&&t.uid&&t.username){const i=FE.applyPendingResultsOnBoot(t);return i!==t&&localStorage.setItem(zi,JSON.stringify(i)),{user:i,isAuthenticated:!0}}return{user:null,isAuthenticated:!1}}catch{return{user:null,isAuthenticated:!1}}},je=n=>{if(n&&!(typeof window>"u"||typeof localStorage>"u"))try{localStorage.setItem(zi,JSON.stringify(n))}catch{}},ms=uh((n,e)=>{const t=OE();return{user:t.user,isAuthenticated:t.isAuthenticated,isLoading:!1,login:async(i,s)=>{n({isLoading:!0});try{const r=await be.login(i,s);let a=r;if(!r.firstLoginRewardClaimed){const l=(r.coins||0)+15e3,c=(r.diamonds||0)+25;a={...r,coins:l,diamonds:c,firstLoginRewardClaimed:!0},be.updateUserProfile(a).catch(()=>{})}n({user:a,isAuthenticated:!0,isLoading:!1}),je(a)}catch(r){throw n({isLoading:!1}),r}},signup:async(i,s,r)=>{n({isLoading:!0});try{if(typeof window<"u"&&typeof localStorage<"u"&&localStorage.getItem(Vo)==="1")throw n({isLoading:!1}),new Error("This device already has an account");const a=await be.signup(i,s,r),l=(a.coins||0)+15e3,c=(a.diamonds||0)+25,h={...a,coins:l,diamonds:c,firstLoginRewardClaimed:!0};be.updateUserProfile(h).catch(()=>{}),n({user:h,isAuthenticated:!0,isLoading:!1}),je(h),typeof window<"u"&&typeof localStorage<"u"&&localStorage.setItem(Vo,"1")}catch(a){throw n({isLoading:!1}),a}},logout:()=>{be.logout(),typeof window<"u"&&typeof localStorage<"u"&&localStorage.removeItem(zi),n({user:null,isAuthenticated:!1})},updateCurrency:(i,s)=>{n(r=>{if(!r.user)return r;const a={...r.user,coins:i,diamonds:s};return je(a),be.updateUserProfile(a).catch(()=>{}),{user:a}})},updateForge:(i,s)=>{n(r=>{if(!r.user)return r;const a={...r.user,forgeMaterials:i,forgeState:s};return je(a),be.updateUserProfile(a).catch(()=>{}),{user:a}})},addToSquad:i=>{n(s=>{if(!s.user||s.user.squad.includes(i))return s;const r={...s.user,squad:[...s.user.squad,i]};return je(r),be.updateUserProfile(r).catch(()=>{}),{user:r}})},unlockCelebration:i=>{n(s=>{if(!s.user)return s;const r=s.user.ownedCelebrations||[];if(r.includes(i))return s;const a={...s.user,ownedCelebrations:[...r,i]};return je(a),be.updateUserProfile(a).catch(()=>{}),{user:a}})},removeFromSquad:i=>{n(s=>{if(!s.user||VE.includes(i))return s;const r={...s.user,squad:s.user.squad.filter(a=>a!==i)};return je(r),be.updateUserProfile(r).catch(()=>{}),{user:r}})},swapSquadPlayers:(i,s)=>{n(r=>{if(!r.user)return r;const a=[...r.user.squad],l=a.indexOf(i),c=a.indexOf(s);if(l===-1||c===-1)return r;const h=[...a],f=h[l];h[l]=h[c],h[c]=f;const p={...r.user,squad:h};return je(p),be.updateUserProfile(p).catch(()=>{}),{user:p}})},setFormation:i=>{n(s=>{if(!s.user)return s;const r={...s.user,selectedFormationId:i};return je(r),be.updateUserProfile(r).catch(()=>{}),{user:r}})},equipBadge:i=>{n(s=>{if(!s.user)return s;const r={...s.user,equippedBadgeId:i};return je(r),be.updateUserProfile(r).catch(()=>{}),{user:r}})},applyMatchRewards:i=>{n(s=>{if(!s.user)return s;const r=s.user.coins||0,a=s.user.diamonds||0,l=i.baseCoins,c=i.baseDiamonds||0;let h=0,f=0,p=s.user.firstMatchRewardClaimed||!1,_=s.user.firstWinRewardClaimed||!1;const b=!!i.isWin,R=!!i.isDraw,A=typeof i.goalsFor=="number"?i.goalsFor:0,I=typeof i.goalsAgainst=="number"?i.goalsAgainst:0,D=typeof i.teamOvr=="number"?i.teamOvr:0,C=!!i.isCompetitive,V=b?100:R?60:30,U=A*35,q=I===0?40:0,B=I<=1?20:0,E=D>0?1+Math.min(.25,(D-80)*.005):1;h=Math.round((l+V+U+q+B)*E);const k=Date.now();let v=s.user.winStreak||0;if(b?v+=1:R||(v=0),C){const w=Math.min(.2,v*.03),y=(b?.15:R?.08:.03)+w;Math.random()<y&&(f=100+Math.floor(Math.random()*101))}i.includeFirstMatchBonus&&!p&&(h+=5e3,f+=10,p=!0),i.includeFirstWinBonus&&!_&&(f+=5,_=!0);const T={...s.user,coins:r+l+h,diamonds:a+c+f,firstMatchRewardClaimed:p,firstWinRewardClaimed:_,winStreak:v,lastMatchResultAt:k};return je(T),be.updateUserProfile(T).catch(()=>{}),{user:T}})},autoPickSquad:i=>{n(s=>{if(!s.user)return s;const r=[...s.user.squad],a=[...i];for(const c of r)a.includes(c)||a.push(c);const l={...s.user,squad:a};return je(l),be.updateUserProfile(l).catch(()=>{}),{user:l}})},adminGift:async(i,s)=>{const r=e();if(!r.user)throw new Error("Not authenticated");const a=await be.giftToUser(r.user,i,s);a.username.toLowerCase()===r.user.username.toLowerCase()&&(je(a),n({user:a}))},loginWithGoogle:async()=>{n({isLoading:!0});try{const i=await be.loginWithGoogle();n({user:i,isAuthenticated:!0,isLoading:!1}),je(i)}catch(i){throw n({isLoading:!1}),i}},resetPassword:async i=>{n({isLoading:!0});try{await be.resetPassword(i),n({isLoading:!1})}catch(s){throw n({isLoading:!1}),s}},deleteAccount:async()=>{n({isLoading:!0});try{const i=e();i.user&&(await be.deleteAccount(i.user.uid),typeof window<"u"&&typeof localStorage<"u"&&(localStorage.removeItem(Vo),localStorage.removeItem(zi)),n({user:null,isAuthenticated:!1,isLoading:!1}))}catch(i){throw n({isLoading:!1}),i}}}}),kl=uh(n=>({isPlaying:!1,settings:{graphicsQuality:"HIGH",soundEnabled:!0,musicEnabled:!0,aiDifficulty:"INTERMEDIATE",fpsLimit:60,masterVolume:.8,commentaryEnabled:!0,commentaryLanguage:"en",commentaryIntensity:"BALANCED",commentaryFrequency:"KEY",commentaryExplainBigMoments:!0,commentaryCrowdBalance:.5,virtualStickEnabled:!0,autoSwitchingEnabled:!0},mode:"KICKOFF",opponent:null,startGame:()=>n({isPlaying:!0,mode:"KICKOFF",opponent:null}),startFriendMatch:e=>n({isPlaying:!0,mode:"FRIEND_PVP",opponent:e}),endGame:()=>n({isPlaying:!1,mode:"KICKOFF",opponent:null}),updateSettings:e=>n(t=>({settings:{...t.settings,...e}}))})),ME=({onClose:n})=>{const[e,t]=x.useState(!0),[i,s]=x.useState(""),[r,a]=x.useState(""),[l,c]=x.useState(""),[h,f]=x.useState(""),[p,_]=x.useState(!1),[b,R]=x.useState(""),[A,I]=x.useState(""),[D,C]=x.useState(""),[V,U]=x.useState(!1),{login:q,signup:B,resetPassword:E,isLoading:k}=ms(),v=async S=>{if(S.preventDefault(),f(""),e){if(!i||!l){f("Please fill in all fields");return}}else if(!i||!r||!l){f("Please fill in all fields");return}const y=i.trim(),$=r.trim();try{e?await q(y,l):await B(y,l,$)}catch(re){const Re=re?.message||"Authentication failed";!e&&Re.toLowerCase().includes("username already taken")?f("This username is used by someone. Change the username to continue."):f(Re)}},T=async S=>{S.preventDefault(),C(""),I("");const y=b.trim();if(!y){C("Enter your email to reset password");return}try{E?(await E(y),I("Password reset link has been sent to your email")):C("Password reset is not available")}catch($){C($.message||"Failed to send reset link")}},w=()=>d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-gray-400 text-xs font-bold uppercase mb-1",children:"Email"}),d.jsx("input",{type:"email",value:i,onChange:S=>s(S.target.value),className:"w-full bg-gray-900/50 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-emerald-500 transition-colors",placeholder:"you@example.com"})]}),!e&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-gray-400 text-xs font-bold uppercase mb-1",children:"Username"}),d.jsx("input",{type:"text",value:r,onChange:S=>a(S.target.value),className:"w-full bg-gray-900/50 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-emerald-500 transition-colors",placeholder:"Unique name for this account"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-gray-400 text-xs font-bold uppercase mb-1",children:"Password"}),d.jsx("input",{type:"password",value:l,onChange:S=>c(S.target.value),className:"w-full bg-gray-900/50 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-emerald-500 transition-colors",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]})]});return d.jsxs("div",{className:"relative z-50 w-full max-w-md p-8 bg-gray-800/95 backdrop-blur-md rounded-2xl border border-gray-700 shadow-2xl animate-fade-in mx-4",children:[d.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:d.jsx("span",{className:"material-icons",children:"close"})}),d.jsxs("div",{className:"text-center mb-6 flex flex-col items-center",children:[d.jsx("div",{className:"w-28 h-28 mb-3 rounded-lg overflow-hidden bg-black/40 border-2 border-amber-500/80 shadow-lg shadow-amber-500/50 flex items-center justify-center relative",children:V?d.jsx("span",{className:"text-xl font-extrabold tracking-[0.25em] text-emerald-400",children:"MRN"}):d.jsx("img",{src:"/logo.svg",alt:"MRN Football Legends",className:"w-full h-full object-contain",onError:()=>U(!0)})}),d.jsx("h2",{className:"text-2xl font-bold text-white",children:e?"Welcome Back":"Join the League"})]}),d.jsxs("div",{className:"flex mb-6 bg-gray-900/50 p-1 rounded-lg",children:[d.jsx("button",{onClick:()=>t(!0),className:`flex-1 py-2 rounded-md text-sm font-medium transition-all ${e?"bg-gray-700 text-white shadow-lg":"text-gray-400 hover:text-white"}`,children:"Login"}),d.jsx("button",{onClick:()=>t(!1),className:`flex-1 py-2 rounded-md text-sm font-medium transition-all ${e?"text-gray-400 hover:text-white":"bg-gray-700 text-white shadow-lg"}`,children:"Create Account"})]}),h&&d.jsx("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-200 text-sm text-center",children:h}),d.jsxs("form",{onSubmit:v,className:"space-y-4",children:[w(),d.jsx("button",{type:"submit",disabled:k,className:"w-full bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-500 hover:to-teal-500 text-white font-bold py-3 rounded-lg shadow-lg transform transition-all hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed mt-4",children:k?"Processing...":e?"ENTER GAME":"CREATE LEGEND"})]}),e&&d.jsx("div",{className:"mt-4 text-center",children:d.jsx("button",{type:"button",onClick:()=>{_(!0),R(i),C(""),I("")},className:"text-xs text-emerald-300 hover:text-emerald-100 transition-colors underline underline-offset-4",children:"Forgot password?"})}),!e&&d.jsx("p",{className:"text-xs text-gray-500 mt-4 text-center",children:"By creating an account, you agree to Fair Play rules. No automation allowed."}),p&&d.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-gray-900/95 backdrop-blur-sm rounded-2xl",children:d.jsxs("div",{className:"w-full p-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-white text-center mb-2",children:"Reset Password"}),d.jsx("p",{className:"text-xs text-gray-400 text-center mb-4",children:"Enter your email to receive a reset link."}),D&&d.jsx("div",{className:"mb-3 p-2 text-red-200 text-xs text-center bg-red-500/20 rounded",children:D}),A&&d.jsx("div",{className:"mb-3 p-2 text-emerald-200 text-xs text-center bg-emerald-500/20 rounded",children:A}),d.jsxs("form",{onSubmit:T,className:"space-y-3",children:[d.jsx("input",{type:"email",value:b,onChange:S=>R(S.target.value),className:"w-full bg-gray-900/60 border border-gray-700 rounded-lg px-3 py-2.5 text-sm text-white",placeholder:"you@example.com"}),d.jsx("button",{type:"submit",className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white py-2.5 rounded-lg text-sm font-bold",children:k?"Sending...":"Send Reset Link"})]}),d.jsx("button",{onClick:()=>_(!1),className:"mt-4 w-full text-xs text-gray-400 hover:text-white",children:"Back"})]})})]})},jE=()=>{const[n,e]=x.useState(!1),[t,i]=x.useState(!1);return x.useEffect(()=>{const s=()=>i(window.scrollY>50);return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]),d.jsxs("div",{className:"min-h-screen bg-gray-950 text-white font-sans selection:bg-emerald-500/30",children:[d.jsx("nav",{className:`fixed top-0 left-0 right-0 z-40 transition-all duration-300 ${t?"bg-gray-900/90 backdrop-blur-md border-b border-white/10 py-3":"bg-transparent py-6"}`,children:d.jsxs("div",{className:"max-w-7xl mx-auto px-6 flex justify-between items-center",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("img",{src:"/logo.svg",alt:"MRN Football Legends",className:"w-10 h-10 object-contain"}),d.jsxs("span",{className:"font-black italic text-lg tracking-wider hidden sm:block",children:["MRN ",d.jsx("span",{className:"text-emerald-400",children:"LEGENDS"})]})]}),d.jsx("button",{onClick:()=>e(!0),className:"bg-emerald-500 hover:bg-emerald-400 text-black font-bold py-2 px-6 rounded-full text-sm transition-transform hover:scale-105",children:"PLAY NOW"})]})}),d.jsxs("header",{className:"relative h-screen flex items-center justify-center overflow-hidden",children:[d.jsxs("div",{className:"absolute inset-0 z-0",children:[d.jsx("div",{className:"absolute inset-0 bg-[url('/img/menu_hero_ultra.jpg')] bg-cover bg-center opacity-70"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-gray-950/50 to-transparent"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/80 via-transparent to-gray-950/80"})]}),d.jsxs("div",{className:"relative z-10 text-center px-4 max-w-4xl mx-auto mt-16",children:[d.jsx("div",{className:"inline-block px-4 py-1 rounded-full bg-emerald-500/20 border border-emerald-500/40 text-emerald-400 text-xs font-bold tracking-widest uppercase mb-6 animate-pulse",children:"New Season Available"}),d.jsxs("h1",{className:"text-5xl md:text-7xl font-black italic tracking-tighter mb-6 leading-tight drop-shadow-2xl",children:["BUILD YOUR CLUB.",d.jsx("br",{}),d.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400",children:"DOMINATE THE LEAGUE."})]}),d.jsx("p",{className:"text-gray-300 text-lg md:text-xl mb-10 max-w-2xl mx-auto leading-relaxed",children:"Experience the next generation of football management. Collect legends, build your dream squad, and compete in real-time matches."}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[d.jsxs("button",{onClick:()=>e(!0),className:"w-full sm:w-auto bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-400 hover:to-teal-400 text-black font-black text-lg py-4 px-10 rounded-xl shadow-[0_0_30px_rgba(16,185,129,0.4)] transform transition-all hover:scale-105 flex items-center justify-center gap-2",children:[d.jsx("span",{className:"material-icons",children:"sports_soccer"}),"PLAY FOR FREE"]}),d.jsxs("button",{className:"w-full sm:w-auto bg-white/10 hover:bg-white/20 border border-white/20 backdrop-blur-md text-white font-bold text-lg py-4 px-10 rounded-xl transition-all flex items-center justify-center gap-2",children:[d.jsx("span",{className:"material-icons",children:"play_circle"}),"WATCH TRAILER"]})]}),d.jsxs("div",{className:"mt-12 flex items-center justify-center gap-4 opacity-70 grayscale hover:grayscale-0 transition-all",children:[d.jsx("div",{className:"h-10 w-32 bg-white/10 rounded border border-white/20 flex items-center justify-center text-[10px] text-gray-400",children:"App Store"}),d.jsx("div",{className:"h-10 w-32 bg-white/10 rounded border border-white/20 flex items-center justify-center text-[10px] text-gray-400",children:"Google Play"})]})]})]}),d.jsx("section",{className:"py-24 px-6 bg-gray-950 relative",children:d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsxs("div",{className:"text-center mb-16",children:[d.jsx("h2",{className:"text-3xl md:text-4xl font-black italic mb-4",children:"GAME FEATURES"}),d.jsx("div",{className:"h-1 w-20 bg-emerald-500 mx-auto rounded-full"})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[{icon:"groups",title:"Build Your Squad",desc:"Collect over 5,000 real players and create your ultimate team strategy."},{icon:"emoji_events",title:"Compete & Win",desc:"Climb the global leaderboards in ranked matches and weekly tournaments."},{icon:"candlestick_chart",title:"Live Market",desc:"Buy, sell, and trade players in a dynamic real-time transfer market."}].map((s,r)=>d.jsxs("div",{className:"bg-gray-900/50 p-8 rounded-2xl border border-white/5 hover:border-emerald-500/50 transition-all hover:-translate-y-2 group",children:[d.jsx("div",{className:"w-14 h-14 bg-emerald-500/10 rounded-xl flex items-center justify-center mb-6 group-hover:bg-emerald-500/20 transition-colors",children:d.jsx("span",{className:"material-icons text-3xl text-emerald-400",children:s.icon})}),d.jsx("h3",{className:"text-xl font-bold mb-3",children:s.title}),d.jsx("p",{className:"text-gray-400 leading-relaxed",children:s.desc})]},r))})]})}),d.jsx("section",{className:"py-24 px-6 bg-gray-900 border-t border-white/5",children:d.jsx("div",{className:"max-w-7xl mx-auto",children:d.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-12",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h2",{className:"text-3xl md:text-4xl font-black italic mb-6",children:"NEXT-GEN MOBILE GAMEPLAY"}),d.jsx("p",{className:"text-gray-400 text-lg mb-8 leading-relaxed",children:"Experience console-quality graphics right in your browser. Fluid animations, realistic physics, and immersive stadiums await."}),d.jsx("ul",{className:"space-y-4",children:["Realistic Physics Engine","Dynamic Lighting & Weather","Customizable Tactics"].map((s,r)=>d.jsxs("li",{className:"flex items-center gap-3 text-gray-300",children:[d.jsx("span",{className:"material-icons text-emerald-500 text-sm",children:"check_circle"}),s]},r))})]}),d.jsxs("div",{className:"flex-1 relative",children:[d.jsxs("div",{className:"relative z-10 bg-gray-950 border-8 border-gray-800 rounded-[2rem] shadow-2xl overflow-hidden aspect-video transform rotate-2 hover:rotate-0 transition-transform duration-500 group",children:[d.jsx("img",{src:"/img/gameplay_preview.jpg",alt:"Gameplay Preview",className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity"}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 group-hover:bg-transparent transition-colors",children:d.jsx("div",{className:"w-16 h-16 rounded-full bg-white/20 backdrop-blur-md flex items-center justify-center border border-white/40 group-hover:scale-110 transition-transform",children:d.jsx("span",{className:"material-icons text-3xl text-white",children:"play_arrow"})})}),d.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjZmZmIiBmaWxsLW9wYWNpdHk9IjAuMDUiLz4KPC9zdmc+')] opacity-20 pointer-events-none"})]}),d.jsx("div",{className:"absolute -inset-4 bg-emerald-500/20 blur-3xl -z-10 rounded-full"})]})]})})}),d.jsx("footer",{className:"bg-black py-12 px-6 border-t border-white/10",children:d.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-8",children:[d.jsxs("div",{className:"text-center md:text-left",children:[d.jsxs("div",{className:"font-black italic text-2xl tracking-wider mb-2",children:["MRN ",d.jsx("span",{className:"text-emerald-400",children:"LEGENDS"})]}),d.jsx("p",{className:"text-gray-500 text-sm",children:"Â© 2026 GTB_STUDIO. All rights reserved."})]}),d.jsx("div",{className:"flex gap-6",children:["Privacy Policy","Terms of Service","Support"].map(s=>d.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:s},s))}),d.jsx("div",{className:"flex gap-4",children:d.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-900 flex items-center justify-center text-gray-400 hover:bg-emerald-500 hover:text-white transition-colors cursor-pointer",children:d.jsx("span",{className:"material-icons text-sm",children:"share"})})})]})}),n&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fade-in",children:d.jsx(ME,{onClose:()=>e(!1)})})]})},Xg=()=>{const[n,e]=x.useState(!1),[t,i]=x.useState(!1),[s,r]=x.useState(!0),[a,l]=x.useState(!1);return x.useEffect(()=>{const c=()=>{const h=navigator.userAgent.toLowerCase(),f=window.innerWidth,p=navigator.deviceMemory||4;l(p<4);const _=/macintosh/i.test(h)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>1,b=/ipad|playbook|silk/i.test(h)||/android/i.test(h)&&!/mobile/i.test(h),R=/mobile|iphone|ipod|blackberry|iemobile|opera mini/i.test(h),A=f<768,I=f>=768&&f<1024,D=navigator.maxTouchPoints>0;b||_||I&&D?(i(!0),e(!1),r(!1)):R||A&&!b&&!_?(i(!1),e(!0),r(!1)):(i(!1),e(!1),r(!0))};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]),{isMobile:n,isTablet:t,isDesktop:s,isLowMemory:a}};let Ge=null,un=null,Ki=null,Qi=null,Ji=null,Cn={masterVolume:1,soundEnabled:!0,musicEnabled:!0,commentaryEnabled:!0,commentaryCrowdBalance:.5},Zg=.3,ef=!1;const ha=()=>{if(typeof window>"u"||Ge)return;const n=window.AudioContext||window.webkitAudioContext;n&&(Ge=new n,un=Ge.createGain(),Ki=Ge.createGain(),Qi=Ge.createGain(),Ji=Ge.createGain(),Ki.connect(un),Qi.connect(un),Ji.connect(un),un.connect(Ge.destination))},UE=n=>n==="sfx"?Ki:n==="music"?Qi:Ji,oh=()=>{if(ha(),!Ge||!un||!Ki||!Qi||!Ji)return;const n=Math.max(0,Math.min(1,Cn.masterVolume)),e=Math.max(0,Math.min(1,Cn.commentaryCrowdBalance)),t=e,i=1-e,s=Math.max(0,Math.min(1,Zg)),r=ef?1:0,a=1+s*.25+r*.3,l=1+s*.1-r*.15,c=Cn.soundEnabled?.7+.3*t:0,h=Cn.musicEnabled?1:0,f=Cn.commentaryEnabled?.7+.3*i:0,p=Math.max(0,Math.min(1.5,c*a)),_=Math.max(0,Math.min(1.5,f*l));un.gain.value=n,Ki.gain.value=n*p,Qi.gain.value=n*h,Ji.gain.value=n*_},tf={setSettings(n){Cn={masterVolume:n.masterVolume,soundEnabled:n.soundEnabled,musicEnabled:n.musicEnabled,commentaryEnabled:n.commentaryEnabled,commentaryCrowdBalance:n.commentaryCrowdBalance},oh()},setMatchState(n){Zg=n.intensity,ef=n.derby,oh()},async playBufferedSound(n,e){if(ha(),!Ge)return;const t=Ge.createBufferSource();t.buffer=e;const i=UE(n);i&&(t.connect(i),t.start(0))},async loadAndPlay(n,e){if(ha(),!!Ge)try{const i=await(await fetch(e)).arrayBuffer(),s=await Ge.decodeAudioData(i);this.playBufferedSound(n,s)}catch{}}},BE=x.lazy(()=>Ze(()=>import("./SquadManagement-Bu3BwxwK.js"),__vite__mapDeps([0,1,2])).then(n=>({default:n.SquadManagement}))),HE=x.lazy(()=>Ze(()=>import("./Market-C3B8_cfW.js"),__vite__mapDeps([3,1,4,2])).then(n=>({default:n.Market}))),qE=x.lazy(()=>Ze(()=>import("./EventModePanel-CrlkCV8W.js"),__vite__mapDeps([5,1])).then(n=>({default:n.EventModePanel}))),$E=x.lazy(()=>Ze(()=>import("./PremiumShop-C2iEbVQv.js"),__vite__mapDeps([6,1,2,4])).then(n=>({default:n.PremiumShop}))),YE=x.lazy(()=>Ze(()=>import("./TrainingHub-C1TD75UY.js"),__vite__mapDeps([7,1])).then(n=>({default:n.TrainingHub}))),WE=x.lazy(()=>Ze(()=>import("./AchievementsPanel-DLdJGKlN.js"),__vite__mapDeps([8,1])).then(n=>({default:n.AchievementsPanel}))),GE=x.lazy(()=>Ze(()=>import("./ReplayViewer-BFL3oSQA.js"),__vite__mapDeps([9,1])).then(n=>({default:n.ReplayViewer}))),zE=x.lazy(()=>Ze(()=>import("./SettingsModal-RsZAuAil.js"),__vite__mapDeps([10,1])).then(n=>({default:n.SettingsModal}))),KE=x.lazy(()=>Ze(()=>import("./AdminPanel-ovWBdbVj.js"),__vite__mapDeps([11,1])).then(n=>({default:n.AdminPanel}))),QE=x.lazy(()=>Ze(()=>import("./Settings-K-FZMhgg.js"),__vite__mapDeps([12,1])).then(n=>({default:n.Settings}))),ue={HOME:"home",PLAY:"sports_soccer",SQUAD:"groups",EVENTS:"event_available",STORE:"storefront",MARKET:"compare_arrows",COINS:"monetization_on",GEMS:"diamond",SETTINGS:"settings",CAREER:"emoji_events",TRAINING:"fitness_center",ACHIEVEMENTS:"military_tech",REPLAY:"movie",BACK:"arrow_back",ADMIN:"admin_panel_settings"},oe=()=>{const{user:n,resetPassword:e}=ms(),{startGame:t}=kl(),{isMobile:i,isTablet:s}=Xg(),r=zn(),[a,l]=x.useState("NONE"),[c,h]=x.useState(null),[f,p]=x.useState("NONE"),_=x.useMemo(()=>{if(!n||!n.squad||n.squad.length===0)return 0;const y=n.squad.slice(0,11).map(re=>On.find(Re=>Re.id===re)).filter(Boolean);if(y.length===0)return 0;const $=y.reduce((re,Re)=>re+(Re?.ovr||0),0);return Math.round($/y.length)},[n?.squad]),[b,R]=x.useState(0),[A,I]=x.useState(0),[D,C]=x.useState(!1),V=i||s,U=a==="NONE";x.useEffect(()=>{U&&tf.loadAndPlay("music","/audio/menu_theme.mp3")},[U]),x.useEffect(()=>{if(!n)return;let y;const $=1e3,re=b,Re=A,bn=n.coins||0,St=n.diamonds||n.gems||0,ht=_s=>{y||(y=_s);const En=Math.min((_s-y)/$,1);R(Math.floor(re+(bn-re)*En)),I(Math.floor(Re+(St-Re)*En)),En<1&&window.requestAnimationFrame(ht)};window.requestAnimationFrame(ht)},[n?.coins,n?.diamonds,n?.gems,b,A]),x.useEffect(()=>{const y=()=>{typeof window>"u"||C(window.innerHeight<700)};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]);const q=()=>l("PLAY_MODE"),B=()=>{l("NONE"),h(null),p("NONE")},E=()=>{const y=n?.username==="ThariqNoR",$=n?.username==="SREEHARI",re=y||$||n?.role==="Owner";return d.jsxs("div",{className:"absolute top-0 right-0 z-30 p-4 flex flex-col items-end gap-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[re&&d.jsx("button",{onClick:()=>l("ADMIN_PANEL"),className:`rounded-full flex items-center justify-center border border-emerald-400/70 bg-black/60 shadow-[0_0_14px_rgba(52,211,153,0.5)] transition-colors ${V?"w-11 h-11":"w-9 h-9 hover:bg-black/80"}`,children:d.jsx("span",{className:"material-icons text-emerald-400 text-base",children:ue.ADMIN})}),d.jsx("button",{onClick:()=>l("SETTINGS"),className:`rounded-full flex items-center justify-center border border-white/10 bg-black/40 transition-colors ${V?"w-11 h-11":"w-9 h-9 hover:bg-black/60"}`,children:d.jsx("span",{className:`material-icons text-gray-200 ${i?"text-xl":"text-base"}`,children:ue.SETTINGS})}),d.jsxs("div",{onClick:()=>l("PROFILE"),className:`flex items-center gap-3 bg-black/40 px-2 pr-4 py-1 rounded-full border border-white/10 cursor-pointer transition-colors ${V?"":"hover:bg-black/60"}`,children:[d.jsx("div",{className:`${i?"w-11 h-11":"w-9 h-9"} rounded-full bg-gradient-to-br from-yellow-500 to-yellow-700 border-2 border-white/20 flex items-center justify-center text-white font-bold text-xs md:text-sm shadow-lg`,children:n?.displayName?n.displayName[0].toUpperCase():n?.username?n.username[0].toUpperCase():"U"}),d.jsxs("div",{className:"flex flex-col items-end",children:[d.jsx("span",{className:"text-[11px] font-semibold text-white leading-tight",children:n?.username||"Guest"}),d.jsxs("span",{className:"text-[10px] text-yellow-400 font-bold uppercase tracking-wider",children:["Level ",n?.level||1]}),d.jsx("div",{className:"w-24 h-1 bg-gray-700 rounded-full mt-0.5 overflow-hidden",children:d.jsx("div",{className:"h-full bg-yellow-500 w-[70%]"})})]})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("div",{className:"flex items-center gap-2 bg-black/40 px-3 py-1 rounded-full border border-white/10",children:[d.jsx("span",{className:"material-icons text-yellow-400 text-base",children:ue.COINS}),d.jsx("span",{className:"text-white font-bold font-mono text-sm",children:b.toLocaleString()})]}),d.jsxs("div",{className:"flex items-center gap-2 bg-black/40 px-3 py-1 rounded-full border border-white/10",children:[d.jsx("span",{className:"material-icons text-blue-400 text-base",children:ue.GEMS}),d.jsx("span",{className:"text-white font-bold font-mono text-sm",children:A.toLocaleString()})]})]})]})},k=()=>d.jsxs("div",{className:"absolute inset-0 z-10",children:[d.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 pl-12 flex flex-col gap-3",children:[{id:"PLAY_MENU",icon:ue.PLAY,label:"Play",action:()=>l("PLAY_MODE")},{id:"MARKET_HUB",icon:ue.MARKET,label:"Transfer Market",action:()=>l("MARKET_HUB")},{id:"STORE_PACKS",icon:ue.STORE,label:"Packs",action:()=>l("STORE_HUB")},{id:"STORE_HUB",icon:ue.STORE,label:"Store",action:()=>l("STORE_HUB")}].map(y=>d.jsxs("button",{onClick:y.action,className:`
                            w-[220px] md:w-[260px]
                            ${i?"h-[64px]":"h-[56px]"}
                            bg-slate-900/85 border border-white/10 rounded-xl flex items-center gap-3 px-4
                            transition-colors transition-transform active:scale-95
                            ${V?"":"hover:bg-slate-800/95"}
                        `,children:[d.jsx("span",{className:"material-icons text-slate-100 text-2xl",children:y.icon}),d.jsx("span",{className:"text-white font-bold uppercase text-xs tracking-widest",children:y.label})]},y.id))}),d.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 mb-16",children:d.jsxs("button",{onClick:q,className:`
                        group relative flex items-center justify-center overflow-hidden
                        ${i?"w-[70vw] max-w-[420px] h-[80px]":"w-[420px] h-[96px]"}
                        bg-gradient-to-r from-yellow-600 via-yellow-500 to-yellow-400
                        rounded-2xl shadow-[0_0_30px_rgba(234,179,8,0.4)]
                        active:scale-95 transition-transform duration-150
                        ${V?"":"hover:scale-105 hover:shadow-[0_0_40px_rgba(234,179,8,0.7)]"}
                    `,children:[d.jsx("div",{className:"absolute top-0 -left-[100%] w-[50%] h-full bg-white/30 skew-x-[20deg] group-active:animate-shine"}),d.jsxs("div",{className:"relative z-10 flex items-center gap-4 px-4",children:[d.jsx("div",{className:"p-2 bg-black/20 rounded-full border border-white/20",children:d.jsx("span",{className:"material-icons text-white text-3xl",children:ue.PLAY})}),d.jsxs("div",{className:"flex flex-col items-start",children:[d.jsx("span",{className:"text-3xl font-black italic text-white uppercase tracking-tighter drop-shadow-md",children:"PLAY"}),d.jsx("span",{className:"text-[10px] text-yellow-900 font-bold uppercase tracking-widest bg-white/20 px-2 py-0.5 rounded",children:"Kick Off"})]})]})]})}),!D&&d.jsxs("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 pr-12 flex flex-col gap-3 items-end",children:[d.jsxs("div",{className:"w-[220px] md:w-[260px] h-[56px] bg-slate-900/85 border border-white/10 rounded-xl flex items-center justify-between px-4 transition-transform active:scale-95",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"material-icons text-emerald-400 text-2xl",children:ue.SQUAD}),d.jsx("span",{className:"text-white font-bold uppercase text-xs tracking-widest",children:"My Squad"})]}),d.jsxs("div",{className:"bg-emerald-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded shadow-sm",children:[_," OVR"]})]}),d.jsxs("button",{onClick:()=>l("CAREER_HUB"),className:`
                            w-[220px] md:w-[260px] h-[56px] bg-slate-900/80 border border-white/10 rounded-xl flex items-center gap-3 px-4
                            transition-colors transition-transform active:scale-95
                            ${V?"":"hover:bg-slate-800/95"}
                        `,children:[d.jsx("span",{className:"material-icons text-blue-400 text-2xl",children:ue.CAREER}),d.jsx("span",{className:"text-white font-bold uppercase text-xs tracking-widest",children:"Career"})]}),d.jsx("div",{className:"flex gap-2 mt-1",children:[{id:"TRAINING_HUB",icon:ue.TRAINING,label:"Training"},{id:"ACHIEVEMENTS_HUB",icon:ue.ACHIEVEMENTS,label:"Goals"},{id:"REPLAY_HUB",icon:ue.REPLAY,label:"Replay"},{id:"EVENTS_HUB",icon:ue.EVENTS,label:"Events"}].map(y=>{const $=y.id==="EVENTS_HUB";return d.jsxs("button",{onClick:()=>l(y.id),className:`
                                    flex flex-col items-center justify-center w-14 h-14 bg-black/50 rounded-full border border-white/10
                                    transition-colors transition-transform active:scale-95
                                    ${V?"":"hover:bg-black/70"}
                                    ${$?"ring-2 ring-emerald-400/70 shadow-[0_0_12px_rgba(16,185,129,0.6)]":""}
                                `,children:[d.jsx("span",{className:`material-icons text-xl ${$?"text-emerald-400":"text-slate-200"}`,children:y.icon}),d.jsx("span",{className:"text-[9px] text-slate-400 uppercase font-bold mt-1",children:y.label})]},y.id)})})]})]}),v=()=>d.jsxs("div",{className:"absolute inset-0 z-0 bg-no-repeat bg-cover bg-center",style:{backgroundImage:"url('/img/menu_bg.jpg')"},children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/60 via-transparent to-black/80"})]}),T=()=>{const y=[{id:"HOME",icon:ue.HOME,label:"Home",action:()=>l("NONE")},{id:"PLAY",icon:ue.PLAY,label:"Play",action:()=>l("PLAY_MODE")},{id:"SQUAD",icon:ue.SQUAD,label:"Squad",action:()=>l("SQUAD_HUB")},{id:"EVENTS",icon:ue.EVENTS,label:"Events",action:()=>l("EVENTS_HUB")},{id:"STORE",icon:ue.STORE,label:"Store",action:()=>l("STORE_HUB")}];return d.jsx("div",{className:`absolute bottom-0 left-0 right-0 z-30 bg-black/70 backdrop-blur-lg border-t border-white/10 ${i?"h-[9%]":"h-[72px] px-16"}`,children:d.jsx("div",{className:"flex justify-around items-center h-full max-w-4xl mx-auto",children:y.map($=>{const re=$.id==="EVENTS",Re=a===($.id==="HOME"?"NONE":$.id+"_HUB");return d.jsxs("button",{onClick:$.action,className:`
                                flex flex-col items-center justify-center gap-1 w-full h-full
                                transition-all duration-150 active:scale-95
                                ${Re?"text-yellow-400":V?"text-gray-400":"text-gray-400 hover:text-white"}
                                ${re?"relative":""}
                            `,children:[d.jsx("span",{className:`material-icons ${i?"text-2xl":"text-3xl"} transition-transform ${Re?"scale-110":""}`,children:$.icon}),d.jsxs("span",{className:"text-[10px] font-medium uppercase tracking-wide relative",children:[$.label,re&&d.jsx("span",{className:"absolute -top-2 -right-2 w-2 h-2 rounded-full bg-emerald-400 animate-pulse"})]})]},$.id)})})})},w=()=>{if(a!=="PLAY_MODE")return null;const y=[{id:"kickoff",title:"KICK OFF",desc:"Friendly â€¢ AI â€¢ Practice",img:"linear-gradient(135deg, #1e293b 0%, #0f172a 100%)",action:()=>h("KICK_OFF")},{id:"career",title:"CAREER",desc:"League â€¢ Cup â€¢ Season",img:"linear-gradient(135deg, #1e1b4b 0%, #312e81 100%)",action:()=>l("CAREER_HUB")},{id:"event",title:"EVENT MATCH",desc:"Daily â€¢ Weekly â€¢ Limited",img:"linear-gradient(135deg, #3f2c22 0%, #7c2d12 100%)",action:()=>l("EVENTS_HUB")},{id:"tourney",title:"TOURNAMENT",desc:"Knockout â€¢ Group Stage",img:"linear-gradient(135deg, #111827 0%, #374151 100%)",locked:!0,unlockLevel:10}];return d.jsxs("div",{className:"absolute inset-0 z-40 bg-black/80 backdrop-blur-md animate-fade-in flex flex-col justify-end md:justify-center items-center",children:[d.jsx("div",{className:"absolute inset-0",onClick:B}),d.jsxs("div",{className:`
                    relative bg-slate-900 border-t md:border border-white/10 
                    w-full md:w-[800px] md:rounded-2xl overflow-hidden shadow-2xl
                    flex flex-col
                    ${i?"h-[75%] rounded-t-3xl":"h-[600px]"}
                `,children:[d.jsxs("div",{className:"p-6 border-b border-white/5 flex justify-between items-center bg-black/20",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[c&&d.jsx("button",{onClick:()=>h(null),className:"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10",children:d.jsx("span",{className:"material-icons text-white text-sm",children:"arrow_back"})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-black italic text-white uppercase",children:c?c.replace("_"," "):"Select Mode"}),d.jsx("p",{className:"text-sm text-gray-400",children:"Choose your path to glory"})]})]}),d.jsx("button",{onClick:B,className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10",children:d.jsx("span",{className:"material-icons text-white",children:"close"})})]}),d.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:c==="KICK_OFF"?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{title:"Friendly Match",desc:"Balanced AI â€¢ Quick Play",action:()=>{t(),r("/play")}},{title:"AI Match",desc:"Difficulty Scaling â€¢ Earn XP",action:()=>{t(),r("/play")}},{title:"Practice",desc:"No Rewards â€¢ Training",action:()=>{t(),r("/play")}},{title:"Local Offline",desc:"2 Player â€¢ Same Device",action:()=>{t(),r("/play")}}].map(($,re)=>d.jsxs("button",{onClick:$.action,className:"bg-slate-800/50 p-6 rounded-xl border border-white/5 hover:bg-slate-700/50 transition-colors text-left group",children:[d.jsx("h3",{className:"text-xl font-bold text-white group-hover:text-yellow-400",children:$.title}),d.jsx("p",{className:"text-sm text-slate-400",children:$.desc})]},re))}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y.map($=>d.jsx("button",{onClick:$.locked?void 0:$.action,className:`
                                            relative h-[120px] md:h-[180px] rounded-xl overflow-hidden group text-left p-6
                                            transition-all duration-300
                                            ${$.locked?"opacity-50 grayscale cursor-not-allowed":"hover:scale-[1.02] hover:shadow-xl cursor-pointer"}
                                        `,style:{background:$.img},children:d.jsxs("div",{className:"relative z-10 flex flex-col h-full justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl md:text-3xl font-black italic text-white uppercase tracking-tighter",children:$.title}),d.jsx("p",{className:"text-xs md:text-sm text-white/70 font-medium uppercase tracking-widest mt-1",children:$.desc})]}),d.jsx("div",{className:"flex justify-end",children:$.locked?d.jsxs("div",{className:"flex items-center gap-2 bg-black/50 px-3 py-1 rounded-full border border-white/10",children:[d.jsx("span",{className:"material-icons text-gray-400 text-sm",children:"lock"}),d.jsxs("span",{className:"text-xs font-bold text-gray-400",children:["Level ",$.unlockLevel]})]}):d.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx("span",{className:"material-icons text-white",children:"arrow_forward"})})})]})},$.id))})})]})]})},S=()=>{if(a==="NONE"||a==="PLAY_MODE"||a==="SETTINGS")return null;if(a==="EVENTS_HUB")return d.jsx(x.Suspense,{fallback:d.jsx("div",{className:"absolute inset-0 z-40 bg-black/80 flex items-center justify-center text-white text-sm",children:"Loading Events..."}),children:d.jsx(qE,{onClose:B})});if(a==="ADMIN_PANEL"){const $=n?.username==="ThariqNoR",re=n?.username==="SREEHARI",Re=n?.role==="Owner",bn=$||re||Re,St=bn,ht=bn;return d.jsxs("div",{className:"absolute inset-0 z-40 bg-black/80 backdrop-blur-md animate-fade-in flex flex-col items-center justify-center overflow-y-auto py-8",children:[d.jsx("div",{className:"absolute inset-0",onClick:B}),d.jsxs("div",{className:"relative w-full max-w-4xl mx-auto bg-slate-950/95 border border-emerald-500/40 rounded-3xl shadow-[0_0_40px_rgba(16,185,129,0.6)] max-h-[90vh] overflow-y-auto pointer-events-auto",children:[d.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-emerald-500/40 bg-gradient-to-r from-emerald-600/20 via-black to-emerald-600/20",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-xs font-mono uppercase tracking-[0.3em] text-emerald-300/90",children:"Legends Control Room"}),d.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white tracking-tight",children:"Owner & Creator Panel"})]}),d.jsx("button",{onClick:B,className:"w-9 h-9 flex items-center justify-center rounded-full bg-black/50 border border-white/10 hover:bg-black/80 transition-colors",children:d.jsx("span",{className:"material-icons text-white text-sm",children:"close"})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-6",children:[St&&d.jsxs("div",{className:"relative rounded-2xl border border-emerald-500/60 bg-gradient-to-br from-emerald-900/60 via-black to-emerald-950/80 p-5 shadow-[0_0_30px_rgba(16,185,129,0.35)] cursor-pointer hover:border-emerald-400 transition-colors",onClick:()=>p(f==="OWNER"?"NONE":"OWNER"),children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-[10px] uppercase tracking-[0.25em] text-emerald-300/90",children:"Owner Panel"}),d.jsx("div",{className:"text-xl font-black text-white",children:"Owner Controls"})]}),d.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-500/20 border border-emerald-400 flex items-center justify-center",children:d.jsx("span",{className:"material-icons text-emerald-300 text-xl",children:ue.ADMIN})})]}),d.jsx("p",{className:"text-xs text-emerald-100/90 leading-relaxed mb-4",children:"Controls live economy valves, premium packs, and high-risk systems. Designed to keep MRN Football Legends safe, fair, and skill-first."}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"text-[10px] text-emerald-200/80 font-mono uppercase tracking-widest",children:"Access: Owners Only"}),d.jsx("button",{type:"button",className:"px-4 py-2 rounded-full bg-emerald-500 hover:bg-emerald-400 text-black text-[10px] font-black uppercase tracking-[0.25em]",children:f==="OWNER"?"Hide Owner Controls":"Open Owner Controls"})]})]}),ht&&d.jsxs("div",{className:"relative rounded-2xl border border-sky-500/60 bg-gradient-to-br from-sky-900/60 via-black to-sky-950/80 p-5 shadow-[0_0_30px_rgba(56,189,248,0.35)] cursor-pointer hover:border-sky-400 transition-colors",onClick:()=>p(f==="CREATOR"?"NONE":"CREATOR"),children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-[10px] uppercase tracking-[0.25em] text-sky-300/90",children:"Creator Panel"}),d.jsx("div",{className:"text-xl font-black text-white",children:"Creator Controls"})]}),d.jsx("div",{className:"w-10 h-10 rounded-full bg-sky-500/20 border border-sky-400 flex items-center justify-center",children:d.jsx("span",{className:"material-icons text-sky-300 text-xl",children:"brush"})})]}),d.jsx("p",{className:"text-xs text-sky-100/90 leading-relaxed mb-4",children:"Controls visual identity, match feel, camera tuning, and UX flows so that every screen matches the MRN vision."}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"text-[10px] text-sky-200/80 font-mono uppercase tracking-widest",children:"Access: Owners Only"}),d.jsx("button",{type:"button",className:"px-4 py-2 rounded-full bg-sky-500 hover:bg-sky-400 text-black text-[10px] font-black uppercase tracking-[0.25em]",children:f==="CREATOR"?"Hide Creator Controls":"Open Creator Controls"})]})]}),f==="OWNER"&&d.jsx("div",{className:"md:col-span-2 rounded-2xl border border-emerald-500/60 bg-black/80 overflow-hidden",children:d.jsx(x.Suspense,{fallback:d.jsx("div",{className:"w-full h-64 flex items-center justify-center text-sm text-emerald-300",children:"Loading Owner Controls..."}),children:d.jsx(KE,{})})}),f==="CREATOR"&&d.jsx("div",{className:"md:col-span-2 rounded-2xl border border-sky-500/60 bg-black/80 overflow-hidden",children:d.jsx(x.Suspense,{fallback:d.jsx("div",{className:"w-full h-64 flex items-center justify-center text-sm text-sky-300",children:"Loading Creator Controls..."}),children:d.jsx(QE,{})})})]})]})]})}const y=()=>{switch(a){case"SQUAD_HUB":return d.jsx(x.Suspense,{fallback:d.jsx("div",{className:"w-full h-full flex items-center justify-center text-white text-sm",children:"Loading Squad..."}),children:d.jsx(BE,{onNavigate:$=>l($)})});case"TRAINING_HUB":return d.jsx(x.Suspense,{fallback:d.jsx("div",{className:"w-full h-full flex items-center justify-center text-white text-sm",children:"Loading Training..."}),children:d.jsx(YE,{})});case"ACHIEVEMENTS_HUB":return d.jsx(x.Suspense,{fallback:d.jsx("div",{className:"w-full h-full flex items-center justify-center text-white text-sm",children:"Loading Goals..."}),children:d.jsx(WE,{})});case"REPLAY_HUB":return d.jsx(x.Suspense,{fallback:d.jsx("div",{className:"w-full h-full flex items-center justify-center text-white text-sm",children:"Loading Replays..."}),children:d.jsx(GE,{})});case"PROFILE":return d.jsx("div",{className:"w-full h-full flex items-center justify-center px-4",children:d.jsxs("div",{className:"w-full max-w-md bg-slate-950/95 border border-white/10 rounded-3xl shadow-2xl p-6 animate-scaleIn",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-[10px] uppercase tracking-[0.3em] text-slate-400",children:"Account"}),d.jsx("div",{className:"text-xl md:text-2xl font-black text-white",children:n?.username||"Player"})]}),d.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-yellow-500 to-yellow-700 border-2 border-white/20 flex items-center justify-center text-white font-bold text-sm shadow-lg",children:n?.displayName?n.displayName[0].toUpperCase():n?.username?n.username[0].toUpperCase():"U"})]}),d.jsxs("div",{className:"space-y-3 text-sm",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-slate-400",children:"Email"}),d.jsx("span",{className:"text-white font-medium",children:n?.email||"â€”"})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-slate-400",children:"Username"}),d.jsx("span",{className:"text-white font-medium",children:n?.username||"â€”"})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-slate-400",children:"Level"}),d.jsxs("span",{className:"text-white font-medium",children:["Level ",n?.level||1]})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-slate-400",children:"User ID"}),d.jsx("span",{className:"text-xs font-mono text-slate-200",children:n?.uid||"â€”"})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-slate-400",children:"Password"}),d.jsx("span",{className:"text-white font-medium tracking-[0.3em]",children:"********"})]})]}),d.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[d.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-widest",children:"Secure Account"}),d.jsx("button",{onClick:async()=>{if(!n?.email||!e){window.alert("No email linked to this account.");return}try{await e(n.email),window.alert(`Password reset link sent to ${n.email}`)}catch{window.alert("Failed to send reset link. Try again later.")}},className:"px-4 py-2 rounded-full bg-emerald-500 hover:bg-emerald-400 text-black text-xs font-bold uppercase tracking-widest transition-colors",children:"Change Password"})]})]})});case"CAREER_HUB":return d.jsx("div",{className:"p-10 text-white text-center",children:"Career Mode Coming Soon"});default:return d.jsx("div",{className:"p-10 text-white",children:"Panel Content"})}};return a==="MARKET_HUB"?d.jsxs("div",{className:"absolute inset-0 z-40 pointer-events-none",children:[d.jsx("div",{className:"absolute inset-0 bg-black/60 pointer-events-auto",onClick:B}),d.jsxs("div",{className:"absolute inset-y-0 right-0 w-full md:w-[70%] bg-slate-900 border-l border-white/10 shadow-2xl animate-slideInRight pointer-events-auto flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-black/40",children:[d.jsxs("button",{onClick:B,className:"flex items-center gap-2 bg-black/40 px-4 py-2 rounded-full border border-white/10 hover:bg-black/70 text-white text-sm font-bold uppercase transition-colors",children:[d.jsx("span",{className:"material-icons",children:ue.BACK}),d.jsx("span",{children:"Back"})]}),d.jsx("span",{className:"text-xs text-slate-300 uppercase tracking-widest",children:"Transfer Market"})]}),d.jsx("div",{className:"flex-1 overflow-hidden",children:d.jsx(HE,{})})]})]}):a==="STORE_HUB"?d.jsxs("div",{className:"absolute inset-0 z-40 pointer-events-none",children:[d.jsx("div",{className:"absolute inset-0 bg-black/60 pointer-events-auto",onClick:B}),d.jsxs("div",{className:"absolute left-0 right-0 bottom-0 h-[75%] md:h-[70%] bg-slate-900 border-t border-white/10 rounded-t-3xl shadow-2xl animate-slideInUp pointer-events-auto flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-black/40",children:[d.jsx("span",{className:"text-xs text-slate-300 uppercase tracking-widest",children:"Packs & Store"}),d.jsx("button",{onClick:B,className:"w-9 h-9 flex items-center justify-center rounded-full bg-black/40 border border-white/10 hover:bg-black/70 transition-colors",children:d.jsx("span",{className:"material-icons text-white text-sm",children:"close"})})]}),d.jsx("div",{className:"flex-1 overflow-hidden",children:d.jsx($E,{})})]})]}):d.jsxs("div",{className:"absolute inset-0 z-40 bg-black/60 animate-fadeIn",children:[d.jsx("div",{className:"absolute top-0 left-0 right-0 z-50 p-4 flex justify-between items-center bg-gradient-to-b from-black/80 to-transparent pointer-events-none",children:d.jsxs("button",{onClick:B,className:"pointer-events-auto flex items-center gap-2 bg-black/40 px-4 py-2 rounded-full border border-white/10 hover:bg-black/70 text-white transition-colors",children:[d.jsx("span",{className:"material-icons",children:ue.BACK}),d.jsx("span",{className:"text-sm font-bold uppercase",children:"Back"})]})}),d.jsx("div",{className:"w-full h-full pt-16 pb-20 overflow-hidden",children:y()})]})};return d.jsxs("div",{className:"relative w-full h-screen bg-slate-900 overflow-hidden font-sans select-none",children:[v(),E(),U&&k(),U&&T(),w(),S(),a==="SETTINGS"&&d.jsx(x.Suspense,{fallback:d.jsx("div",{className:"absolute inset-0 z-40 bg-black/80 flex items-center justify-center text-white text-sm",children:"Loading Settings..."}),children:d.jsx(zE,{onClose:B})}),d.jsx("style",{children:`
                @keyframes shine {
                    100% { left: 125%; }
                }
                @keyframes slideUp {
                    from { transform: translateY(20px); opacity: 0; }
                    to { transform: translateY(0); opacity: 1; }
                }
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                @keyframes slideInRight {
                    from { transform: translateX(100%); }
                    to { transform: translateX(0); }
                }
                @keyframes slideInUp {
                    from { transform: translateY(100%); }
                    to { transform: translateY(0); }
                }
                @keyframes scaleIn {
                    from { transform: scale(0.96); opacity: 0; }
                    to { transform: scale(1); opacity: 1; }
                }
                .animate-shine {
                    animation: shine 1s;
                }
                .animate-slideUp {
                    animation: slideUp 0.3s ease-out;
                }
                .animate-fadeIn {
                    animation: fadeIn 0.3s ease-out;
                }
                .animate-slideInRight {
                    animation: slideInRight 0.25s ease-out;
                }
                .animate-slideInUp {
                    animation: slideInUp 0.3s ease-out;
                }
                .animate-scaleIn {
                    animation: scaleIn 0.2s ease-out;
                }
            `})]})},JE=()=>{const n=zn(),[e]=x.useState(12),[t]=x.useState(75),i=[{id:"story",title:"Stormy Derby",subtitle:"Daily Story Match",description:"Face the elements. One chance only.",color:"from-slate-700 via-slate-800 to-black border-slate-500",icon:"â›ˆï¸",path:"/kickoff?mode=story",badge:"DAILY"},{id:"journey",title:"Star Journey",subtitle:"Episodes",description:"Branching career. Permanent traits.",color:"from-amber-700 via-amber-900 to-black border-amber-500",icon:"â­",path:"/kickoff?mode=journey"},{id:"training",title:"Training",subtitle:"Mini-Games",description:"Master skills. Earn XP.",color:"from-emerald-800 via-emerald-950 to-black border-emerald-500",icon:"âš½",path:"/kickoff?mode=training"},{id:"trophies",title:"Trophies",subtitle:"Replay Walls",description:"Your legacy. Your moments.",color:"from-gray-400 via-gray-600 to-black border-gray-300",icon:"ðŸ†",path:"/profile?tab=trophies"},{id:"celebrations",title:"Celebrations",subtitle:"Custom Chains",description:"Crowd reaction. Signature moves.",color:"from-purple-800 via-purple-950 to-black border-purple-500",icon:"ðŸ•º",path:"/shop?tab=celebrations"},{id:"packs",title:"Packs",subtitle:"Tunnel & Boosts",description:"Match rewards. Contract risks.",color:"from-blue-800 via-blue-950 to-black border-blue-500",icon:"ðŸŽ",path:"/shop?tab=packs"}];return d.jsxs("div",{className:"w-full h-full bg-slate-950 relative overflow-hidden flex flex-col",children:[d.jsx("div",{className:"absolute inset-0 bg-[url('/img/menu_bg.jpg')] bg-cover bg-center opacity-40"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/80 via-black/20 to-black pointer-events-none"}),d.jsxs("div",{className:"relative z-10 px-6 py-4 md:px-12 md:py-8 flex justify-between items-start",children:[d.jsxs("div",{className:"animate-fade-in-down",children:[d.jsx("div",{className:"text-xs md:text-sm font-bold uppercase tracking-[0.3em] text-emerald-400 mb-1",children:"Progression Core"}),d.jsx("h1",{className:"text-3xl md:text-5xl font-black italic tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-white via-gray-200 to-gray-500 drop-shadow-lg",children:"LEGENDS JOURNEY HUB"})]}),d.jsxs("div",{className:"flex flex-col items-end animate-fade-in-down delay-100",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-[10px] uppercase tracking-widest text-gray-400",children:"Hub Level"}),d.jsx("div",{className:"text-3xl font-black text-yellow-400 leading-none",children:e})]}),d.jsxs("div",{className:"w-12 h-12 rounded-full border-2 border-yellow-500/50 flex items-center justify-center bg-yellow-900/20 relative",children:[d.jsxs("svg",{className:"absolute inset-0 w-full h-full -rotate-90",children:[d.jsx("circle",{cx:"24",cy:"24",r:"22",stroke:"currentColor",strokeWidth:"2",fill:"none",className:"text-gray-800"}),d.jsx("circle",{cx:"24",cy:"24",r:"22",stroke:"currentColor",strokeWidth:"2",fill:"none",className:"text-yellow-500",strokeDasharray:`${t*1.38} 138`})]}),d.jsx("span",{className:"text-lg",children:"ðŸ‘‘"})]})]}),d.jsxs("div",{className:"mt-1 text-[10px] text-gray-500 font-mono",children:[t,"% to Level ",e+1]})]})]}),d.jsx("div",{className:"relative z-10 flex-1 px-4 md:px-12 pb-8 overflow-y-auto custom-scrollbar",children:d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 max-w-7xl mx-auto",children:i.map((s,r)=>d.jsxs("button",{onClick:()=>n(s.path),className:`
                                group relative h-48 md:h-56 rounded-3xl overflow-hidden border border-opacity-40
                                bg-gradient-to-br ${s.color}
                                transition-all duration-300 hover:scale-[1.02] hover:shadow-2xl hover:shadow-${s.color.split("-")[1]}-500/20
                                animate-fade-in-up
                            `,style:{animationDelay:`${r*100}ms`},children:[d.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-transparent transition-colors duration-500"}),d.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top_right,_rgba(255,255,255,0.1),_transparent_60%)]"}),d.jsxs("div",{className:"absolute inset-0 p-6 flex flex-col justify-between",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/10 backdrop-blur-md flex items-center justify-center text-2xl border border-white/10 shadow-inner group-hover:scale-110 transition-transform duration-300",children:s.icon}),s.badge&&d.jsx("span",{className:"px-2 py-1 rounded bg-red-600 text-white text-[10px] font-bold tracking-wider animate-pulse",children:s.badge})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-[10px] uppercase tracking-[0.2em] text-white/60 mb-1 group-hover:text-white/90 transition-colors",children:s.subtitle}),d.jsx("h3",{className:"text-2xl font-black text-white mb-2 leading-none group-hover:translate-x-1 transition-transform",children:s.title}),d.jsx("p",{className:"text-xs text-gray-300 line-clamp-2 group-hover:text-white transition-colors",children:s.description})]})]}),d.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-white/50 to-transparent scale-x-0 group-hover:scale-x-100 transition-transform duration-500"})]},s.id))})}),d.jsx("div",{className:"relative z-20 p-6 flex justify-center",children:d.jsxs("button",{onClick:()=>n("/"),className:"px-8 py-3 rounded-full bg-white/10 backdrop-blur-md border border-white/20 text-sm font-bold hover:bg-white/20 transition-all flex items-center gap-2 group",children:[d.jsx("span",{className:"group-hover:-translate-x-1 transition-transform",children:"â†"}),"Back to Main Menu"]})})]})},XE=[{id:"FOUNDATIONS",title:"Foundations Tour",subtitle:"Learn systems without rank pressure.",chapters:[{id:"FOUNDATIONS_INTRO",title:"Kickoff Fundamentals",description:"Play a full match in any mode to feel the flow.",difficulty:"EASY",order:1,rewardCoins:100,rewardForgeMaterials:5},{id:"FOUNDATIONS_PRESSING",title:"Pressing & Shape",description:"Experiment with pressing and basic defensive shape.",difficulty:"EASY",order:2,rewardCoins:150,rewardForgeMaterials:8},{id:"FOUNDATIONS_FINISHING",title:"Finishing School",description:"Focus on shot selection and timing.",difficulty:"MEDIUM",order:3,rewardCoins:200,rewardForgeMaterials:10}]},{id:"SQUAD_DEPTH",title:"Squad Depth Trials",subtitle:"Rotate and manage squad properly.",chapters:[{id:"DEPTH_ROTATIONS",title:"Rotation Basics",description:"Play matches swapping different forwards and mids.",difficulty:"MEDIUM",order:1,rewardCoins:250,rewardForgeMaterials:12},{id:"DEPTH_FORMATIONS",title:"Shape & Roles",description:"Try different formations to understand trade-offs.",difficulty:"MEDIUM",order:2,rewardCoins:300,rewardForgeMaterials:15}]},{id:"LEGENDS_PATH",title:"Legends Path",subtitle:"Big matches and tight wins.",chapters:[{id:"LEGENDS_BIG_GAMES",title:"Big Game Nerves",description:"Win a match by one goal margin.",difficulty:"HARD",order:1,rewardCoins:350,rewardForgeMaterials:20},{id:"LEGENDS_LATE_WINNERS",title:"Late Winners",description:"Score after the 70th minute in a match.",difficulty:"HARD",order:2,rewardCoins:400,rewardForgeMaterials:25}]}],ZE=()=>{const n=Date.now(),e=10080*60*1e3;return[{id:"RARE_DRAFT",title:"Rare Draft Cup",description:"Limited squad, rarity restrictions and controlled matchmaking.",expiresAt:n+e,rewardEventTokens:5},{id:"MIDFIELD_CONTROL",title:"Midfield Control Night",description:"Boosted rewards for possession-focused play and passing.",expiresAt:n+e*2,rewardEventTokens:8}]},ah=n=>["mrn_campaign_progress",n].join("_"),lh=n=>["mrn_event_progress",n].join("_"),e1=()=>{const n=zn(),{user:e,updateCurrency:t}=ms(),[i,s]=x.useState({}),[r,a]=x.useState({}),l=x.useMemo(ZE,[]);if(x.useEffect(()=>{if(!e){s({}),a({});return}if(!(typeof window>"u"||typeof localStorage>"u")){try{const R=localStorage.getItem(ah(e.uid));if(R){const A=JSON.parse(R);A&&typeof A=="object"&&s(A)}}catch{}try{const R=localStorage.getItem(lh(e.uid));if(R){const A=JSON.parse(R);A&&typeof A=="object"&&a(A)}}catch{}}},[e?.uid]),!e)return d.jsx("div",{className:"w-full h-screen flex items-center justify-center bg-black text-white text-sm",children:"No profile loaded."});const c=R=>{if(!(typeof window>"u"||typeof localStorage>"u"))try{localStorage.setItem(ah(e.uid),JSON.stringify(R))}catch{}},h=R=>{if(!(typeof window>"u"||typeof localStorage>"u"))try{localStorage.setItem(lh(e.uid),JSON.stringify(R))}catch{}},f=(R,A)=>{const I=i[R]||{completedChapters:[]};if(I.completedChapters.includes(A.id))return;const D=[...I.completedChapters,A.id],C={...i,[R]:{completedChapters:D}};s(C),c(C);const V=e.coins||0,U=e.forgeMaterials||0;typeof t=="function"&&t(V+A.rewardCoins,e.diamonds||0);const q={...e,forgeMaterials:U+A.rewardForgeMaterials};try{localStorage.setItem("mrn_current_user",JSON.stringify(q))}catch{}},p=R=>{const C={attempts:(r[R.id]||{attempts:0}).attempts+1,completed:!0},V={...r,[R.id]:C};a(V),h(V);const U=e.coins||0,q=e.eventTokens||0;typeof t=="function"&&t(U+200,e.diamonds||0);const B={...e,eventTokens:q+R.rewardEventTokens};try{localStorage.setItem("mrn_current_user",JSON.stringify(B))}catch{}},_=Date.now(),b=l.filter(R=>R.expiresAt>_);return d.jsx("div",{className:"w-full h-screen bg-gradient-to-br from-amber-950 via-slate-950 to-black text-white flex items-center justify-center",children:d.jsxs("div",{className:"w-full max-w-6xl px-4 md:px-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-[0.25em] text-amber-300",children:"Campaigns & Events"}),d.jsx("h1",{className:"text-2xl md:text-3xl font-black mt-1",children:"Event Mode Hub"}),d.jsx("div",{className:"text-[11px] text-amber-100 mt-1",children:"Structured progression outside rank, with narrative, rewards and seasonal events."})]}),d.jsx("button",{onClick:()=>n("/"),className:"px-3 py-1.5 rounded-full bg-black/60 border border-white/20 text-[11px] font-semibold",children:"â† Back to Main Menu"})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1.6fr_1.4fr] gap-4 md:gap-6 items-stretch",children:[d.jsx("div",{className:"space-y-4",children:d.jsxs("div",{className:"menu-card relative rounded-2xl bg-gradient-to-br from-amber-900 via-slate-950 to-black border border-amber-500/70 overflow-hidden p-4 md:p-5",children:[d.jsx("div",{className:"flex items-center justify-between mb-3",children:d.jsxs("div",{children:[d.jsx("div",{className:"text-[10px] uppercase tracking-[0.25em] text-amber-200",children:"Permanent Programs"}),d.jsx("div",{className:"text-lg md:text-xl font-black mt-1",children:"Campaigns"}),d.jsx("div",{className:"text-[11px] text-amber-100 mt-1",children:"Always available, linear progress, difficulty fixed per chapter."})]})}),d.jsx("div",{className:"space-y-3 text-[11px]",children:XE.map(R=>{const A=i[R.id]?.completedChapters||[],I=R.chapters.length,D=A.length,C=I>0?Math.max(0,Math.min(100,D/I*100)):0,V=R.chapters.find(U=>!A.includes(U.id));return d.jsxs("div",{className:"rounded-xl border border-amber-500/60 bg-black/60 px-3 py-3 flex flex-col gap-2",children:[d.jsxs("div",{className:"flex items-center justify-between gap-2",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-[10px] uppercase tracking-[0.22em] text-amber-200",children:R.title}),d.jsx("div",{className:"text-[11px] text-amber-50",children:R.subtitle})]}),d.jsxs("div",{className:"text-right text-[10px] text-amber-200",children:[d.jsxs("div",{children:[D,"/",I," Chapters"]}),d.jsx("div",{className:"mt-1 w-24 h-1.5 rounded-full bg-amber-950/70 overflow-hidden",children:d.jsx("div",{className:"h-full bg-gradient-to-r from-amber-300 via-yellow-300 to-emerald-300",style:{width:`${C}%`}})})]})]}),V&&d.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"font-semibold text-amber-50",children:["Next: ",V.title]}),d.jsx("div",{className:"text-[10px] text-amber-100/90",children:V.description}),d.jsxs("div",{className:"mt-1 text-[10px] text-amber-200",children:["Reward: ",V.rewardCoins," Coins, ",V.rewardForgeMaterials," Forge Materials"]})]}),d.jsx("button",{onClick:()=>f(R.id,V),className:"px-3 py-1.5 rounded-full bg-amber-400 text-black text-[10px] font-bold uppercase tracking-[0.18em]",children:"Complete Chapter"})]}),!V&&d.jsx("div",{className:"mt-1 text-[10px] text-emerald-300",children:"Campaign completed. Future chapters can be added without touching rank."})]},R.id)})})]})}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"menu-card relative rounded-2xl bg-gradient-to-br from-sky-900 via-slate-950 to-black border border-sky-500/70 overflow-hidden p-4 md:p-5",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-[10px] uppercase tracking-[0.25em] text-sky-200",children:"Time-Limited Events"}),d.jsx("div",{className:"text-lg font-black text-white mt-1",children:"Seasonal Programs"})]}),d.jsxs("div",{className:"text-[10px] text-sky-200",children:["Event Tokens: ",d.jsx("span",{className:"font-semibold",children:e.eventTokens||0})]})]}),d.jsx("div",{className:"text-[11px] text-sky-100 mb-3",children:"Special rules, limited squads and modifiers. Rewards include coins, diamonds, forge materials and event tokens."}),d.jsxs("div",{className:"space-y-3 text-[11px]",children:[b.map(R=>{const I=r[R.id]?.attempts||0,D=R.expiresAt-_,C=Math.max(0,Math.floor(D/(1440*60*1e3)));return d.jsxs("div",{className:"rounded-xl border border-sky-500/60 bg-black/65 px-3 py-3 flex flex-col gap-2",children:[d.jsxs("div",{className:"flex items-center justify-between gap-2",children:[d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-white",children:R.title}),d.jsx("div",{className:"text-[10px] text-sky-100",children:R.description})]}),d.jsxs("div",{className:"text-right text-[10px] text-sky-200",children:[d.jsxs("div",{children:["Attempts: ",I]}),d.jsxs("div",{children:["Reward: ",R.rewardEventTokens," Event Tokens"]}),d.jsxs("div",{className:"mt-0.5 text-[9px] text-sky-300",children:["Expires in ",C,"d"]})]})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"text-[10px] text-sky-200",children:"Uses match attempts, not rank. Seasonal events are the only place for premium-tier rewards."}),d.jsx("button",{onClick:()=>p(R),className:"px-3 py-1.5 rounded-full bg-sky-400 text-black text-[10px] font-bold uppercase tracking-[0.18em]",children:"Simulate Event"})]})]},R.id)}),b.length===0&&d.jsx("div",{className:"text-[11px] text-sky-200",children:"No active events right now. New events will rotate in automatically."})]})]}),d.jsxs("div",{className:"menu-card relative rounded-2xl bg-gradient-to-br from-emerald-900 via-slate-950 to-black border border-emerald-500/70 overflow-hidden p-4 md:p-5",children:[d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("div",{children:[d.jsx("div",{className:"text-[10px] uppercase tracking-[0.25em] text-emerald-200",children:"Competitive Separation"}),d.jsx("div",{className:"text-lg font-black text-white mt-1",children:"Rank System Untouched"})]})}),d.jsx("div",{className:"mt-2 text-[11px] text-emerald-100",children:"Campaigns and events never change ranked MMR directly. Rewards are coins, materials and tokens that feed Forge and cosmetics, not rank shortcuts. This keeps competitive play clean."})]})]})]})]})})},ln="matches",js={createMatch:async n=>{const e={uid:n.hostId,username:n.username,ovr:n.ovr,squad:n.squad},t={hostId:n.hostId,teamA:e,status:"WAITING",createdAt:Date.now(),scheduledFor:n.scheduledFor||Date.now(),score:{teamA:0,teamB:0}};return(await SE(Di(ne,ln),t)).id},joinMatch:async(n,e)=>{const t=fe(ne,ln,n),i={uid:e.uid,username:e.username,ovr:e.ovr,squad:e.squad};await Do(t,{teamB:i,status:"SCHEDULED"})},subscribeToLobby:n=>{const e=vE(Di(ne,ln),bE("status","==","WAITING"),EE("createdAt","desc"),wE(20));return ih(e,t=>{const i=t.docs.map(s=>({id:s.id,...s.data()}));n(i)})},subscribeToMatch:(n,e)=>{const t=fe(ne,ln,n);return ih(t,i=>{i.exists()?e({id:i.id,...i.data()}):e(null)})},startMatch:async n=>{const e=fe(ne,ln,n);await Do(e,{status:"LIVE"})},completeMatch:async(n,e,t,i)=>{const s=fe(ne,ln,n);await Do(s,{status:"COMPLETED",score:{teamA:e,teamB:t},winnerId:i})},cancelMatch:async n=>{const e=fe(ne,ln,n);await xi(e)}},ch=n=>{if(!n?.length)return 0;const e=On.filter(i=>n.includes(i.id));if(!e.length)return 0;const t=e.reduce((i,s)=>i+s.ovr,0);return Math.round(t/e.length)},t1=()=>{const{user:n}=ms(),{startFriendMatch:e}=kl(),t=zn(),[i,s]=x.useState([]),[r,a]=x.useState(!0),[l,c]=x.useState(!1),[h,f]=x.useState(null);x.useEffect(()=>{const b=js.subscribeToLobby(R=>{s(R),a(!1)});return()=>b()},[]),x.useEffect(()=>{if(!h)return;const b=js.subscribeToMatch(h,R=>{R&&R.teamB&&(e({uid:R.teamB.uid,username:R.teamB.username,squad:R.teamB.squad||[]}),f(null))});return()=>b()},[h,e]);const p=async()=>{if(n){c(!0);try{const b=n.squad||[],R=ch(b)||60,A=await js.createMatch({hostId:n.uid,username:n.username||"Unknown",ovr:R,squad:b});f(A)}catch(b){console.error("Failed to create match",b),c(!1)}}},_=async b=>{if(!n)return;const R=i.find(A=>A.id===b);if(R)try{const A=n.squad||[],I=ch(A)||60;await js.joinMatch(b,{uid:n.uid,username:n.username||"Unknown",ovr:I,squad:A}),e({uid:R.teamA.uid,username:R.teamA.username,squad:R.teamA.squad||[]})}catch(A){console.error("Failed to join match",A)}};return d.jsxs("div",{className:"relative h-full w-full bg-black/90 text-white overflow-hidden flex flex-col",children:[d.jsxs("div",{className:"p-6 border-b border-white/10 flex justify-between items-center bg-gradient-to-r from-emerald-900/50 to-black",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-black italic text-white uppercase tracking-wider",children:"Match Center"}),d.jsx("p",{className:"text-sm text-emerald-400",children:"Live Global Fixtures"})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:()=>t("/"),className:"px-4 py-2 rounded-full border border-white/20 text-xs font-bold hover:bg-white/10",children:"BACK TO MENU"}),d.jsx("button",{onClick:p,disabled:l,className:"px-6 py-2 rounded-full bg-emerald-500 text-black text-xs font-black uppercase tracking-widest hover:bg-emerald-400 disabled:opacity-50 shadow-lg shadow-emerald-500/20",children:l?"Creating...":"Create Match"})]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:r?d.jsx("div",{className:"text-center text-gray-500 mt-20",children:"Loading fixtures..."}):i.length===0?d.jsxs("div",{className:"flex flex-col items-center justify-center h-64 border-2 border-dashed border-white/10 rounded-2xl bg-white/5",children:[d.jsx("div",{className:"text-4xl mb-4",children:"ðŸŸï¸"}),d.jsx("h3",{className:"text-lg font-bold text-gray-300",children:"No Active Matches"}),d.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Be the first to host a game!"}),d.jsx("button",{onClick:p,className:"px-6 py-3 rounded-xl bg-white text-black font-bold text-sm hover:bg-gray-200 transition-colors",children:"Create New Fixture"})]}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(b=>d.jsxs("div",{className:"group relative bg-gradient-to-br from-gray-900 to-black border border-white/10 rounded-xl p-4 hover:border-emerald-500/50 transition-all hover:-translate-y-1 hover:shadow-xl",children:[d.jsx("div",{className:"absolute top-3 right-3",children:d.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${b.status==="WAITING"?"bg-yellow-500/20 text-yellow-300 border border-yellow-500/30":b.status==="LIVE"?"bg-red-500/20 text-red-400 border border-red-500/30 animate-pulse":"bg-gray-800 text-gray-400"}`,children:b.status})}),d.jsxs("div",{className:"mt-2 flex items-center justify-between mb-6",children:[d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-900/50 border border-emerald-500/30 flex items-center justify-center text-emerald-200 font-bold",children:b.teamA.username.substring(0,2).toUpperCase()}),d.jsx("span",{className:"text-xs font-bold mt-2 text-gray-200",children:b.teamA.username}),d.jsxs("span",{className:"text-[10px] text-gray-500",children:["OVR ",b.teamA.ovr]})]}),d.jsx("div",{className:"text-center px-4",children:d.jsx("div",{className:"text-2xl font-black text-white/20",children:"VS"})}),d.jsx("div",{className:"flex flex-col items-center",children:b.teamB?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-red-900/50 border border-red-500/30 flex items-center justify-center text-red-200 font-bold",children:b.teamB.username.substring(0,2).toUpperCase()}),d.jsx("span",{className:"text-xs font-bold mt-2 text-gray-200",children:b.teamB.username}),d.jsxs("span",{className:"text-[10px] text-gray-500",children:["OVR ",b.teamB.ovr]})]}):d.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-dashed border-white/20 flex items-center justify-center",children:d.jsx("span",{className:"text-white/20 text-lg",children:"?"})})})]}),b.status==="WAITING"&&b.hostId!==n?.uid&&d.jsx("button",{onClick:()=>_(b.id),className:"w-full py-2 rounded-lg bg-white/5 border border-white/10 text-emerald-400 font-bold text-xs uppercase hover:bg-emerald-500 hover:text-black transition-colors",children:"Join Match"}),b.status==="WAITING"&&b.hostId===n?.uid&&d.jsx("div",{className:"w-full py-2 text-center text-[10px] text-gray-500 italic animate-pulse",children:"Waiting for opponent..."})]},b.id))})})]})},n1=({onComplete:n})=>{const[e,t]=x.useState("LOGO_SEQUENCE"),[i,s]=x.useState(0);return x.useEffect(()=>{const r=setTimeout(()=>{t("DISCLAIMER")},5e3);return()=>clearTimeout(r)},[]),x.useEffect(()=>{if(e==="DISCLAIMER"){const r=setTimeout(()=>{t("LOADING")},2500);return()=>clearTimeout(r)}},[e]),x.useEffect(()=>{if(e==="LOADING"){const r=setInterval(()=>{s(l=>l>=100?100:l<30?l+2:l<70?l+.5:l<90?l+1:l<99?l+.2:l)},50),a=setTimeout(()=>{s(100)},6e3);return()=>{clearInterval(r),clearTimeout(a)}}},[e]),x.useEffect(()=>{if(i>=100){const r=setTimeout(()=>{n()},500);return()=>clearTimeout(r)}},[i,n]),e==="LOGO_SEQUENCE"?d.jsxs("div",{className:"fixed inset-0 z-[100] bg-black flex flex-col items-center justify-center overflow-hidden text-white select-none",children:[d.jsxs("div",{className:"absolute inset-0 z-0",children:[d.jsx("div",{className:"absolute inset-0 bg-[url('/img/menu_bg.jpg')] bg-cover bg-center animate-subtle-zoom opacity-40 grayscale"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/80 via-black/20 to-black/80"})]}),d.jsxs("div",{className:"relative z-10 flex flex-col items-center animate-fade-in-up",children:[d.jsxs("div",{className:"relative",children:[d.jsxs("picture",{children:[d.jsx("source",{srcSet:"/img/mrn-football-legends-logo.webp",type:"image/webp"}),d.jsx("img",{src:"/img/mrn-football-legends-logo.jpg",alt:"MRN Football Legends",className:"w-40 h-40 mb-6 drop-shadow-[0_0_30px_rgba(0,0,0,0.8)] rounded-xl object-contain"})]}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-white/20 to-transparent -translate-x-full animate-shine pointer-events-none"})]}),d.jsx("h1",{className:"text-4xl md:text-6xl font-black tracking-tighter bg-gradient-to-br from-white to-gray-400 bg-clip-text text-transparent text-center px-4 animate-fade-in",style:{animationDelay:"0.5s"},children:"MRN FOOTBALL LEGENDS"}),d.jsx("p",{className:"text-center text-[10px] text-gray-400 mt-3 tracking-[0.4em] uppercase animate-fade-in",style:{animationDelay:"1s"},children:"The Ultimate Simulation"})]})]}):e==="DISCLAIMER"?d.jsx("div",{className:"fixed inset-0 z-[100] bg-black flex flex-col items-center justify-center text-white select-none animate-fade-in",children:d.jsx("div",{className:"px-8 text-center max-w-lg",children:d.jsxs("p",{className:"text-xs md:text-sm text-gray-500 font-mono leading-relaxed",children:["This is a fictional simulation. All players, teams, faces, and names are entirely generated.",d.jsx("br",{}),d.jsx("br",{}),"Any resemblance to real persons, living or dead, is purely coincidental."]})})}):d.jsxs("div",{className:"fixed inset-0 z-[100] bg-black flex flex-col items-center justify-center overflow-hidden text-white select-none",children:[d.jsx("div",{className:"absolute inset-0 z-0",children:d.jsx("div",{className:"absolute inset-0 bg-[url('/img/loading_bg_new.png')] bg-cover bg-center"})}),d.jsxs("div",{className:"relative z-10 w-full max-w-md px-12 flex flex-col items-center",children:[d.jsx("img",{src:"/logo.svg",alt:"MRN Football Legends",className:"w-20 h-20 mb-8 opacity-90 rounded-lg object-contain"}),d.jsx("div",{className:"w-full h-1 bg-gray-800 rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-600 to-emerald-400 transition-all duration-100 ease-out shadow-[0_0_10px_rgba(16,185,129,0.5)]",style:{width:`${i}%`}})}),d.jsxs("div",{className:"mt-4 flex justify-between w-full text-[9px] text-emerald-500/60 font-mono tracking-widest",children:[d.jsx("span",{children:i<100?"INITIALIZING SYSTEM...":"READY"}),d.jsxs("span",{children:[Math.floor(i),"%"]})]})]})]})},i1=x.lazy(()=>Ze(()=>import("./GameScene-BSLdzM67.js"),__vite__mapDeps([13,1,2])));function s1(){const{isAuthenticated:n}=ms(),{isPlaying:e,settings:t,updateSettings:i}=kl(),[s,r]=x.useState(!0),{isMobile:a,isTablet:l,isLowMemory:c}=Xg();return x.useEffect(()=>{tf.setSettings({masterVolume:t.masterVolume,soundEnabled:t.soundEnabled,musicEnabled:t.musicEnabled,commentaryEnabled:t.commentaryEnabled,commentaryCrowdBalance:t.commentaryCrowdBalance})},[t.masterVolume,t.soundEnabled,t.musicEnabled,t.commentaryEnabled,t.commentaryCrowdBalance]),x.useEffect(()=>{if(typeof window>"u"||typeof localStorage>"u")return;const h="mrn_device_profile_applied";try{if(localStorage.getItem(h))return;let f=t.graphicsQuality,p=t.fpsLimit;(a||l)&&(c?(f="LOW",p=30):(f=f==="HIGH"?"MEDIUM":f,p=60)),i({graphicsQuality:f,fpsLimit:p}),localStorage.setItem(h,"1")}catch{}},[a,l,c,t.graphicsQuality,t.fpsLimit,i]),n?s?d.jsx(n1,{onComplete:()=>r(!1)}):e?d.jsx(Rc,{children:d.jsx(x.Suspense,{fallback:d.jsx("div",{className:"w-full h-screen flex items-center justify-center bg-black text-white text-lg",children:"Loading Match..."}),children:d.jsx(i1,{})})}):d.jsx(Rc,{children:d.jsxs(Cp,{children:[d.jsx(te,{path:"/",element:d.jsx(oe,{})}),d.jsx(te,{path:"/career",element:d.jsx(oe,{})}),d.jsx(te,{path:"/carrer",element:d.jsx(oe,{})}),d.jsx(te,{path:"/kickoff",element:d.jsx(oe,{})}),d.jsx(te,{path:"/admin-abuse",element:d.jsx(oe,{})}),d.jsx(te,{path:"/market",element:d.jsx(oe,{})}),d.jsx(te,{path:"/rivals",element:d.jsx(oe,{})}),d.jsx(te,{path:"/forge",element:d.jsx(oe,{})}),d.jsx(te,{path:"/vault",element:d.jsx(oe,{})}),d.jsx(te,{path:"/missions",element:d.jsx(oe,{})}),d.jsx(te,{path:"/exchanges",element:d.jsx(oe,{})}),d.jsx(te,{path:"/my-club",element:d.jsx(oe,{})}),d.jsx(te,{path:"/settings",element:d.jsx(oe,{})}),d.jsx(te,{path:"/squad",element:d.jsx(oe,{})}),d.jsx(te,{path:"/shop",element:d.jsx(oe,{})}),d.jsx(te,{path:"/friends",element:d.jsx(oe,{})}),d.jsx(te,{path:"/my-club",element:d.jsx(oe,{})}),d.jsx(te,{path:"/rivals",element:d.jsx(oe,{})}),d.jsx(te,{path:"/campaigns",element:d.jsx(e1,{})}),d.jsx(te,{path:"/forge",element:d.jsx(oe,{})}),d.jsx(te,{path:"/vault",element:d.jsx(oe,{})}),d.jsx(te,{path:"/missions",element:d.jsx(oe,{})}),d.jsx(te,{path:"/exchanges",element:d.jsx(oe,{})}),d.jsx(te,{path:"/profile",element:d.jsx(oe,{})}),d.jsx(te,{path:"/alliances",element:d.jsx(oe,{})}),d.jsx(te,{path:"/control-room",element:d.jsx(oe,{})}),d.jsx(te,{path:"/season-reset",element:d.jsx(oe,{})}),d.jsx(te,{path:"/progression",element:d.jsx(JE,{})}),d.jsx(te,{path:"/match-center",element:d.jsx(t1,{})}),d.jsx(te,{path:"*",element:d.jsx(Ap,{to:"/",replace:!0})})]})}):d.jsx(jE,{})}Nf.createRoot(document.getElementById("root")).render(d.jsx(Lf.StrictMode,{children:d.jsx(s1,{})}));typeof window<"u"&&typeof document<"u"&&(window.addEventListener("contextmenu",n=>{n.preventDefault()}),window.addEventListener("keydown",n=>{const e=n.key.toUpperCase();(e==="F12"||n.ctrlKey&&n.shiftKey&&(e==="I"||e==="J"||e==="C")||n.ctrlKey&&e==="U")&&(n.preventDefault(),n.stopPropagation())}));export{tf as A,NE as P,kl as a,ih as b,Di as c,ne as d,SE as e,fe as f,a1 as g,Zt as h,Xg as i,FE as j,be as k,EE as o,On as p,vE as q,ki as r,RE as s,ms as u};
