import{r as m,j as e}from"./vendor-DU2oVBwu.js";import{p as H,u as ne,P as ae,j as X,A as ie,h as le}from"./index-CF1KAMmK.js";import{P as re}from"./PlayerFace-CuU6bd_3.js";import{b as ce,a as ee}from"./rarities-C0fjtg9p.js";let p={lastReset:Date.now(),nextReset:Date.now()+5760*60*1e3,items:[]};class F{static generateShopRotation(){const o=[],d=H.filter(i=>i.rarity==="Premium Legend");if(d.length>0&&Math.random()<.001){const i=d[Math.floor(Math.random()*d.length)],g=Math.round(i.ovr*120);o.push({id:`shop_legend_${Date.now()}`,type:"Player",contentId:i.id,price:g,currency:"Diamonds",isPremium:!0,stock:5})}const u=H.filter(i=>i.rarity==="Premium"),x=new Set;for(;o.length<5&&u.length>0;){const i=u[Math.floor(Math.random()*u.length)];if(x.has(i.id))continue;x.add(i.id);const g=Math.round(i.ovr*40);o.push({id:`shop_premium_${i.id}_${o.length}`,type:"Player",contentId:i.id,price:g,currency:"Diamonds",isPremium:!0,stock:20})}const N=["PHONE_CALL","MASK_FACE","SALUTE","SLIDE_POINT","JUMP_CHEST_THUMP","RUNNING_SPIN","SHUSH","TEAMMATE_HUG","GROUP_HUDDLE","BOW","SIT_DOWN","SLIDE_CAMERA","FLEX","POINT_SKY","SIGNATURE"],w=300;for(let i=0;i<2&&i<N.length;i++){const g=N[Math.floor(Math.random()*N.length)];o.push({id:`shop_cele_${g}_${i}`,type:"Skill",contentId:g,price:w,currency:"Diamonds",isPremium:!0,stock:50})}return p.items=o,p.lastReset=Date.now(),p.nextReset=Date.now()+5760*60*1e3,p}static addManualPlayerItem(o,n,d){const u=H.find(w=>w.id===o);if(!u)throw new Error("Player not found");const x=String(u.rarity||"");if(x!=="Premium"&&x!=="Premium Legend")throw new Error("Only Premium or Premium Legend players can be added");const N={id:`shop_manual_${o}_${Date.now()}`,type:"Player",contentId:o,price:n,currency:"Diamonds",isPremium:!0,stock:d&&d>0?d:void 0};return p.items=[...p.items,N],p}static updateItemPriceAndStock(o,n,d){return p.items=p.items.map(u=>u.id!==o?u:{...u,price:n,stock:d&&d>0?d:void 0}),p}static registerPurchase(o){return p.items=p.items.map(n=>{if(n.id!==o||typeof n.stock!="number")return n;const d=n.stock-1;return d<=0?{...n,stock:0}:{...n,stock:d}}).filter(n=>typeof n.stock!="number"?!0:n.stock>0),p}static getShopState(){return Date.now()>=p.nextReset?this.generateShopRotation():p.items.length===0?this.generateShopRotation():p}static forceReset(){return this.generateShopRotation()}}const se=H,te=[{id:"PREMIUM_01",label:ae.name,description:"5 Cards (75-95 OVR). Guaranteed 1 Rare+. 500 Gems.",cost:ae.cost,currency:"Gems",rarityFilter:r=>r.ovr>=75&&r.ovr<=95},{id:"STANDARD",label:"Standard Pack",description:"1 Standard player. Entry-level squad depth.",cost:500,currency:"Coins",rarityFilter:r=>r.rarity==="Standard"},{id:"RARE",label:"Rare Pack",description:"1 Rare player. Stronger upgrades.",cost:1500,currency:"Coins",rarityFilter:r=>r.rarity==="Rare"},{id:"EPIC",label:"Epic Pack",description:"1 Epic player. Big impact signings.",cost:4e3,currency:"Coins",rarityFilter:r=>r.rarity==="Epic"},{id:"LEGENDARY",label:"Legendary Pack",description:"1 Legendary-tier player if available.",cost:7e3,currency:"Coins",rarityFilter:r=>r.rarity==="Legendary"},{id:"ICONIC",label:"Iconic Pack",description:"1 Iconic player from Premium or Premium Legend.",cost:12e3,currency:"Coins",rarityFilter:r=>r.rarity==="Premium"||r.rarity==="Premium Legend"},{id:"SEASONAL",label:"Seasonal Pack",description:"1 player from Rare or Epic pool.",cost:2500,currency:"Coins",rarityFilter:r=>r.rarity==="Rare"||r.rarity==="Epic"},{id:"ADMIN_ABUSE",label:"Admin Abuse Pack",description:"Owner-only. Pull from Premium Legend only.",cost:0,currency:"Coins",rarityFilter:r=>r.rarity==="Premium Legend",requiresOwner:!0}],Q=["PHONE_CALL","MASK_FACE","SALUTE","SLIDE_POINT","JUMP_CHEST_THUMP","RUNNING_SPIN","SHUSH","TEAMMATE_HUG","GROUP_HUDDLE","BOW","SIT_DOWN","SLIDE_CAMERA","FLEX","POINT_SKY","SIGNATURE"],oe=r=>{switch(r){case"PHONE_CALL":return"Phone Call";case"MASK_FACE":return"Mask Celebration";case"SALUTE":return"Salute";case"SLIDE_POINT":return"Slide and Point";case"JUMP_CHEST_THUMP":return"Jump Chest Thump";case"RUNNING_SPIN":return"Running Spin";case"SHUSH":return"Shush Crowd";case"TEAMMATE_HUG":return"Teammate Hug";case"GROUP_HUDDLE":return"Group Huddle";case"BOW":return"Bow";case"SIT_DOWN":return"Sit Down";case"SLIDE_CAMERA":return"Slide to Camera";case"FLEX":return"Flex";case"POINT_SKY":return"Point to Sky";case"SIGNATURE":return"Signature Pose";default:return r}},de=r=>{switch(r){case"Premium Legend":return"bg-gradient-to-br from-yellow-900 via-black to-yellow-950 border-yellow-400 shadow-[0_0_40px_rgba(250,204,21,0.95)]";case"Premium":return"bg-gradient-to-br from-cyan-900 via-slate-900 to-black border-cyan-400 shadow-[0_0_32px_rgba(34,211,238,0.95)]";case"Legendary":return"bg-gradient-to-br from-amber-900 via-black to-amber-950 border-amber-400 shadow-[0_0_32px_rgba(251,191,36,0.9)]";case"Iconic":return"bg-gradient-to-br from-red-900 via-black to-red-950 border-red-500 shadow-[0_0_34px_rgba(248,113,113,0.95)]";case"Epic":return"bg-gradient-to-br from-purple-900 via-black to-indigo-950 border-purple-400 shadow-[0_0_30px_rgba(168,85,247,0.95)]";case"Rare":return"bg-gradient-to-br from-blue-900 via-black to-sky-950 border-blue-400 shadow-[0_0_24px_rgba(59,130,246,0.9)]";default:return"bg-gradient-to-br from-gray-800 via-gray-900 to-black border-gray-500 shadow-[0_0_20px_rgba(148,163,184,0.8)]"}},ue=r=>{if(!r||r.length===0)return 900;let o=-1;for(const w of r){const i=ce(w.rarity);i>o&&(o=i)}if(o<0)return 900;const u=900+o*180;return Math.max(700,Math.min(2300,u))},me=r=>{switch(r){case"Premium Legend":return"pack-anim-premium-legend";case"Premium":return"pack-anim-premium";case"Legendary":return"pack-anim-legendary";case"Iconic":return"pack-anim-iconic";case"Epic":return"pack-anim-epic";case"Rare":return"pack-anim-rare";default:return"pack-anim-standard"}},xe=r=>{switch(r){case"Premium Legend":return"from-yellow-500 via-yellow-200 to-yellow-900";case"Premium":return"from-cyan-400 via-cyan-200 to-cyan-900";case"Legendary":return"from-amber-400 via-amber-200 to-amber-900";case"Iconic":return"from-red-500 via-rose-300 to-red-900";case"Epic":return"from-purple-500 via-fuchsia-300 to-indigo-900";case"Rare":return"from-blue-500 via-sky-300 to-blue-900";default:return"from-gray-500 via-gray-300 to-gray-900"}},pe=({defaultPackId:r="STANDARD",restrictToAdminAbuse:o=!1})=>{const{user:n,updateCurrency:d,addToSquad:u,unlockCelebration:x,updateForge:N}=ne(),[w,i]=m.useState(!1),[g,T]=m.useState([]),[$,G]=m.useState(null),[k,z]=m.useState(r),[C,L]=m.useState([]),[W,R]=m.useState(null),A=m.useRef(null),B=a=>{let l="/audio/pack_standard.mp3";a==="Rare"?l="/audio/pack_rare.mp3":a==="Epic"?l="/audio/pack_epic.mp3":a==="Iconic"?l="/audio/pack_iconic.mp3":a==="Legendary"?l="/audio/pack_legendary.mp3":a==="Premium"?l="/audio/pack_premium.mp3":a==="Premium Legend"&&(l="/audio/pack_premium_legend.mp3"),ie.loadAndPlay("sfx",l)},q=()=>{if(!n||C.length===0){i(!1);return}const a=C[0];a&&B(a.rarity),T(C),G(W),L([]),R(null),i(!1),A.current!==null&&(window.clearTimeout(A.current),A.current=null)},J=a=>{if(w||!n)return;const l=te.find(y=>y.id===a);if(!l||l.requiresOwner&&n.role!=="Owner")return;let b=[],v=null;if(a==="PREMIUM_01"){const y=X.openPack(n,a);if(!y.success){alert(y.error);return}b=y.rewards,v=Q[Math.floor(Math.random()*Q.length)];const E=n.gems||n.diamonds||0;d(n.coins,E-y.costDeduced);const S=n.squad||[];let M=0;if(b.forEach(I=>{S.includes(I.id)?M+=X.getForgeValueForPlayerId(I.id):u(I.id)}),M>0){const V=(n.forgeMaterials||0)+M,K=n.forgeState||{};N(V,K)}v&&x(v),X.clearPendingResult(n,y.transactionId)}else{const y=n.coins;if(l.currency==="Coins"&&y<l.cost){alert("Insufficient Coins!");return}d(y-l.cost,n.diamonds);let E=se.filter(l.rarityFilter);E.length===0&&(E=se.filter(I=>I.rarity==="Standard"));const S=E[Math.floor(Math.random()*E.length)];if(b=[S],v=Q[Math.floor(Math.random()*Q.length)],n.squad.includes(S.id)){const I=X.getForgeValueForPlayerId(S.id),K=(n.forgeMaterials||0)+I,Z=n.forgeState||{};N(K,Z)}else u(S.id);x(v)}i(!0),T([]),G(null),L(b),R(v),A.current!==null&&window.clearTimeout(A.current);const P=ue(b);A.current=window.setTimeout(()=>{q()},P)},U=()=>{w&&q()};return e.jsxs("div",{className:"w-full min-h-[420px] flex flex-col items-center justify-center bg-black/90 text-white p-8",children:[!g.length&&!w&&e.jsxs("div",{className:"w-full max-w-5xl mx-auto",children:[e.jsx("h2",{className:"text-4xl font-black mb-6 italic text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 text-center",children:"PLAYER PACKS"}),e.jsx("p",{className:"text-center text-gray-400 mb-8 text-sm",children:"Choose a pack based on the rarity you want. Each pack contains 1 player and 1 celebration skill."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:(o?te.filter(a=>a.id==="ADMIN_ABUSE"):te).map(a=>{const l=a.requiresOwner&&n?.role!=="Owner",b=a.currency==="Gems"?n?.gems||n?.diamonds||0:n?.coins||0,v=l||!n||a.cost>0&&b<a.cost;return e.jsxs("div",{className:`bg-gradient-to-br from-gray-900 to-black border ${a.id==="PREMIUM_01"?"border-emerald-500":"border-purple-700/40"} rounded-2xl p-4 flex flex-col justify-between shadow-[0_0_25px_rgba(168,85,247,0.24)]`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-lg font-bold",children:a.label}),e.jsxs("span",{className:`text-xs ${a.currency==="Gems"?"text-emerald-400":"text-gray-400"}`,children:[a.cost," ",a.currency]})]}),e.jsx("p",{className:"text-xs text-gray-400 mb-4",children:a.description}),a.id===k&&e.jsx("div",{className:"text-[10px] text-emerald-400 uppercase tracking-widest mb-1",children:"Selected"}),l&&e.jsx("div",{className:"text-[10px] text-red-400 uppercase tracking-widest mb-1",children:"Owner Only"})]}),e.jsx("button",{onClick:()=>{z(a.id),J(a.id)},disabled:v,className:`mt-4 w-full py-2 rounded font-bold text-sm transition-colors ${v?"bg-gray-700 text-gray-500 cursor-not-allowed":a.id==="PREMIUM_01"?"bg-emerald-600 hover:bg-emerald-500 text-black":"bg-purple-600 hover:bg-purple-500 text-white"}`,children:l&&n?.role!=="Owner"?"Owner Only":"Open Pack"})]},a.id)})})]}),w&&e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:`relative w-64 h-64 rounded-full flex items-center justify-center bg-gradient-to-br pack-opening-pulse ${xe(C[0]?.rarity)} shadow-[0_0_45px_rgba(0,0,0,0.9)] border border-white/30`,children:[e.jsx("div",{className:"absolute inset-[-20%] rounded-full bg-[radial-gradient(circle_at_center,_rgba(255,255,255,0.4),_transparent_65%)] opacity-70"}),e.jsx("div",{className:"relative flex items-center justify-center w-32 h-32 rounded-full bg-black/70 border border-white/40",children:e.jsx("div",{className:"w-20 h-20 rounded-full border-2 border-white/70 flex items-center justify-center animate-spin",children:e.jsx("span",{className:"text-3xl",children:"âš½"})})})]}),e.jsx("div",{className:"mt-6 text-lg text-gray-200 font-semibold tracking-[0.35em] uppercase",children:"Opening Pack..."}),e.jsx("button",{onClick:U,className:"mt-4 px-6 py-2 rounded-full bg-white/10 border border-white/40 text-[11px] uppercase tracking-[0.3em] text-gray-100 hover:bg-white/20",children:"Skip Animation"})]}),g.length>0&&e.jsxs("div",{className:"relative flex flex-col items-center justify-center w-full max-w-6xl mx-auto py-8",children:[e.jsx("div",{className:"absolute inset-0 stadium-lights pointer-events-none opacity-60"}),k==="SEASONAL"&&e.jsx("div",{className:"absolute inset-0 seasonal-spotlight-bg pointer-events-none"}),k==="ADMIN_ABUSE"&&e.jsx("div",{className:"absolute inset-0 admin-abuse-confetti pointer-events-none"}),e.jsxs("div",{className:"relative text-center w-full z-10",children:[e.jsx("div",{className:"mb-8 text-xl font-black uppercase tracking-[0.4em] text-yellow-300 drop-shadow-md animate-fade-in-down",children:"Pack Rewards"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-6 md:gap-8 px-4",children:g.map((a,l)=>e.jsxs("div",{className:"animate-fade-in-up",style:{animationDelay:`${l*150}ms`},children:[e.jsx("div",{className:"mb-2 text-[10px] font-bold uppercase tracking-widest text-yellow-200",children:a.rarity}),e.jsxs("div",{className:`relative w-48 h-[280px] md:w-56 md:h-[340px] rounded-2xl border-2 mx-auto p-4 flex flex-col items-center justify-between transition-transform hover:scale-105 ${de(a.rarity)} ${me(a.rarity)} ${k==="SEASONAL"?"seasonal-spotlight-card":""} ${k==="ADMIN_ABUSE"?"admin-abuse-card-cluster":""}`,children:[e.jsx("div",{className:"absolute -inset-1 rounded-2xl bg-gradient-to-br from-white/20 via-transparent to-white/10 opacity-60"}),e.jsxs("div",{className:"relative w-full flex items-center justify-between",children:[e.jsx("div",{className:"text-3xl font-black text-white drop-shadow-lg",children:a.ovr}),e.jsx("div",{className:"text-[9px] font-semibold uppercase tracking-[0.2em] text-gray-200",children:a.position})]}),e.jsx("div",{className:"relative mt-2 mb-2 flex items-center justify-center",children:e.jsx(re,{playerId:a.id,size:"lg",className:"shadow-[0_0_20px_rgba(15,23,42,0.8)]"})}),e.jsxs("div",{className:"relative w-full text-center",children:[e.jsx("h3",{className:"text-lg font-black uppercase tracking-wide text-white truncate px-1",children:a.name}),e.jsxs("div",{className:"grid grid-cols-2 gap-1 mt-2 text-[9px] font-mono text-gray-100 opacity-80",children:[e.jsxs("div",{children:["SPD: ",a.stats?.speed??"--"]}),e.jsxs("div",{children:["SHT: ",a.stats?.shooting??"--"]}),e.jsxs("div",{children:["PAS: ",a.stats?.passing??"--"]}),e.jsxs("div",{children:["DRI: ",a.stats?.dribbling??"--"]})]})]})]})]},`${a.id}-${l}`))}),$&&e.jsxs("div",{className:"mt-8 p-4 bg-black/60 backdrop-blur-sm rounded-xl border border-emerald-500/30 inline-block animate-bounce-in",children:[e.jsx("div",{className:"text-xs text-gray-300 uppercase tracking-widest mb-1",children:"Bonus Unlocked"}),e.jsxs("div",{className:"text-lg font-bold text-emerald-400",children:[oe($)," Celebration"]})]}),e.jsx("button",{onClick:()=>{T([]),G(null)},className:"mt-10 px-10 py-3 bg-white text-black font-black text-sm tracking-widest uppercase rounded-full hover:bg-gray-200 hover:scale-105 transition-all shadow-lg shadow-white/20",children:"Continue"})]})]})]})},ge=r=>{switch(r){case"Premium Legend":return"bg-gradient-to-br from-yellow-900 via-black to-yellow-950 border-yellow-400 shadow-[0_0_35px_rgba(250,204,21,0.85)] hover:border-yellow-300";case"Premium":return"bg-gradient-to-br from-cyan-900 via-slate-900 to-black border-cyan-400 shadow-[0_0_26px_rgba(34,211,238,0.85)] hover:border-cyan-300";default:return"bg-gray-800 border-gray-700 hover:border-cyan-500"}},he=r=>{switch(r){case"Premium Legend":return"bg-yellow-400 text-black shadow-[0_0_12px_rgba(250,204,21,0.9)]";case"Premium":return"bg-cyan-500 text-black shadow-[0_0_10px_rgba(34,211,238,0.85)]";default:return"bg-gray-700 text-gray-300"}},ve=()=>{const{user:r,updateCurrency:o,addToSquad:n,unlockCelebration:d}=ne(),[u,x]=m.useState([]),[N,w]=m.useState(""),[i,g]=m.useState(!1),[T,$]=m.useState("ALL"),[G,k]=m.useState(!1),[z,C]=m.useState(""),[L,W]=m.useState(""),[R,A]=m.useState(""),[B,q]=m.useState(""),J=le(),[U,a]=m.useState(null);m.useEffect(()=>{const t=new URLSearchParams(J.search);t.get("packs")==="1"?(g(!0),$(t.get("admin_abuse")==="1"?"ADMIN_ABUSE":"ALL")):(g(!1),$("ALL"))},[J.search]),m.useEffect(()=>{const t=F.getShopState();x(t.items);const s=setInterval(()=>{const c=Date.now(),f=t.nextReset-c;if(f<=0){const h=F.getShopState();x(h.items)}else{const h=Math.floor(f/864e5),j=Math.floor(f%(1e3*60*60*24)/(1e3*60*60));w(`${h}d ${j}h`)}},1e3);return()=>clearInterval(s)},[]);const l=H,b=l.filter(t=>{const s=String(t.rarity||"");return s==="Premium"||s==="Premium Legend"}),v=b.filter(t=>{const s=z.trim().toLowerCase();if(!s)return!0;const c=String(t.name||"").toLowerCase(),f=String(t.id||"").toLowerCase();return c.includes(s)||f.includes(s)}),P=b.find(t=>t.id===L),y=P?String(P.rarity||""):"",E=P?Number(P.ovr||0):0,S=ee(E,y),M=P?u.find(t=>t.type==="Player"&&t.contentId===P.id):void 0,I=t=>{let s="/audio/premium_standard.mp3";t==="Premium"?s="/audio/premium_premium.mp3":t==="Premium Legend"&&(s="/audio/premium_legend.mp3"),ie.loadAndPlay("sfx",s)},V=t=>{if(!r)return;if(t.type==="Player"&&r.squad.includes(t.contentId)){alert("You already own this player!");return}if(t.type==="Skill"&&(r.ownedCelebrations||[]).includes(t.contentId)){alert("You already own this celebration!");return}if(t.type==="Player"&&r.squad.includes(t.contentId)){alert("You already own this player!");return}const s=t.currency==="Diamonds",c=s?"Diamonds":"Coins";if(!(s?r.diamonds>=t.price:r.coins>=t.price)){alert(`Not enough ${c}!`);return}if(confirm(`Purchase ${t.type==="Skill"?"celebration":t.contentId} for ${t.price} ${c}?`)){const h=s?r.coins:r.coins-t.price,j=s?r.diamonds-t.price:r.diamonds;if(o(h,j),t.type==="Player"){n(t.contentId);const D=l.find(O=>O.id===t.contentId);D&&I(D.rarity)}else t.type==="Skill"&&d(t.contentId);const _=F.registerPurchase(t.id);x(_.items),a(t),alert("Purchase Successful!")}},K=t=>H.find(s=>s.id===t),Z=t=>{switch(t){case"PHONE_CALL":return"Phone Call";case"MASK_FACE":return"Mask Celebration";case"SALUTE":return"Salute";case"SLIDE_POINT":return"Slide and Point";case"JUMP_CHEST_THUMP":return"Jump Chest Thump";case"RUNNING_SPIN":return"Running Spin";case"SHUSH":return"Shush Crowd";case"TEAMMATE_HUG":return"Teammate Hug";case"GROUP_HUDDLE":return"Group Huddle";case"BOW":return"Bow";case"SIT_DOWN":return"Sit Down";case"SLIDE_CAMERA":return"Slide to Camera";case"FLEX":return"Flex";case"POINT_SKY":return"Point to Sky";case"SIGNATURE":return"Signature Pose";default:return t}};if(i)return e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("button",{onClick:()=>g(!1),className:"absolute top-4 left-4 z-50 px-4 py-2 bg-gray-800 rounded text-white font-bold hover:bg-gray-700",children:"â† Back"}),e.jsx(pe,{defaultPackId:T==="ADMIN_ABUSE"?"ADMIN_ABUSE":"STANDARD",restrictToAdminAbuse:T==="ADMIN_ABUSE"})]});const Y=U&&U.type==="Player"?l.find(t=>t.id===U.contentId):null;return e.jsxs("div",{className:"w-full min-h-[420px] bg-gray-900 p-8 overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black italic text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400",children:"PREMIUM SHOP"}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Server Reset In: ",e.jsx("span",{className:"text-yellow-400 font-mono",children:N})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 items-stretch justify-end",children:[e.jsxs("div",{className:"menu-card relative rounded-2xl bg-gradient-to-br from-purple-600 via-purple-700 to-slate-900 border border-purple-400/70 overflow-hidden shadow-lg shadow-purple-500/30",children:[e.jsx("div",{className:"absolute inset-0 opacity-25 bg-[radial-gradient(circle_at_center,_#ffffff,_transparent_60%)]"}),e.jsxs("div",{className:"relative flex items-center gap-3 px-4 py-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-tr from-purple-200 via-purple-400 to-fuchsia-500 flex items-center justify-center border border-white/40",children:e.jsx("span",{className:"text-xl text-slate-900",children:"ðŸ“¦"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-[0.25em] text-purple-100",children:"Packs"}),e.jsx("button",{onClick:()=>g(!0),className:"mt-1 px-3 py-1 rounded-full bg-purple-500 hover:bg-purple-400 text-[11px] font-bold text-white tracking-wide",children:"Open Packs"})]})]})]}),r&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-black/40 rounded-lg border border-yellow-500/60",children:[e.jsx("span",{className:"text-sm",children:"ðŸ’Ž"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-yellow-300 uppercase font-bold tracking-wider",children:"Diamonds"}),e.jsx("span",{className:"text-sm font-bold text-yellow-100",children:r.diamonds.toLocaleString()})]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-black/40 rounded-lg border border-yellow-400/80",children:[e.jsx("span",{className:"text-sm",children:"ðŸ‘‘"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-yellow-200 uppercase font-bold tracking-wider",children:"Legend Tokens"}),e.jsx("span",{className:"text-sm font-bold text-yellow-100",children:r.legendTokens??0})]})]})]}),r?.role==="Owner"&&e.jsxs("div",{className:"flex flex-col gap-2 items-end",children:[e.jsx("button",{onClick:()=>{const t=F.forceReset();x(t.items)},className:"px-4 py-2 bg-red-600 hover:bg-red-500 text-white font-bold rounded text-xs uppercase",children:"Force Reset (Owner)"}),e.jsx("button",{onClick:()=>{if(b.length===0){alert("No Premium or Premium Legend players found");return}const t=b[0],s=String(t.rarity||""),c=Number(t.ovr||0),f=ee(c,s),h=u.find(_=>_.type==="Player"&&_.contentId===t.id),j=h?h.price:f;W(t.id),A(j>0?String(j):""),q(""),C(""),k(!0)},className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white font-bold rounded text-xs uppercase",children:"Add Premium Player"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:u.map(t=>{const s=t.type==="Player"?K(t.contentId):null,c=s?.rarity;return e.jsxs("div",{className:`relative rounded-xl overflow-hidden border-2 group hover:scale-[1.02] transition-transform ${ge(c)}`,children:[c==="Premium Legend"&&e.jsx("div",{className:"absolute inset-0 bg-yellow-500/10 animate-pulse"}),e.jsxs("div",{className:"p-4 relative z-10",children:[t.type==="Player"&&s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:`px-2 py-0.5 text-[10px] font-bold uppercase rounded-full ${he(c)}`,children:s.rarity}),e.jsx("span",{className:"text-2xl font-black text-white",children:s.ovr})]}),e.jsx("div",{className:"h-32 flex items-center justify-center bg-gray-900/60 rounded-lg mb-4",children:e.jsx(re,{playerId:s.id,size:"lg",className:"shadow-[0_0_18px_rgba(15,23,42,0.95)]"})}),e.jsx("h3",{className:"text-lg font-bold text-white truncate",children:s.name}),e.jsx("p",{className:"text-sm text-gray-400",children:s.position})]}):null,t.type==="Skill"&&e.jsxs("div",{className:"h-40 flex flex-col items-center justify-center text-center text-gray-200",children:[e.jsx("div",{className:"text-sm font-semibold text-cyan-300 mb-1",children:"Celebration Unlock"}),e.jsx("div",{className:"text-lg font-bold text-white",children:Z(t.contentId)}),e.jsx("div",{className:"mt-2 text-xs text-gray-400",children:"Unlocks a new goal celebration animation."})]}),t.type!=="Player"&&t.type!=="Skill"&&e.jsxs("div",{className:"h-40 flex items-center justify-center text-gray-500",children:[t.type," Item"]})]}),e.jsxs("div",{className:"p-4 bg-gray-900/80 border-t border-gray-700 flex items-center justify-between gap-2",children:[typeof t.stock=="number"&&e.jsxs("div",{className:"text-[10px] text-gray-300",children:["Left: ",t.stock]}),e.jsxs("button",{onClick:()=>V(t),className:"flex-1 py-2 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded flex items-center justify-center gap-2",children:[e.jsx("span",{children:t.currency==="Diamonds"?"ðŸ’Ž":"ðŸª™"}),t.price.toLocaleString()]}),r?.role==="Owner"&&e.jsx("button",{onClick:()=>{const f=window.prompt("New Diamond price",String(t.price))||"",h=window.prompt("New max buyers (empty to keep current, 0 to remove limit)",typeof t.stock=="number"?String(t.stock):"")||"",j=parseInt(f||"0",10)||0;if(j<=0){alert("Price must be greater than 0");return}let _=t.stock;if(h.trim()==="0")_=void 0;else if(h.trim()!==""){const O=parseInt(h||"0",10)||0;_=O>0?O:void 0}const D=F.updateItemPriceAndStock(t.id,j,_);x(D.items)},className:"px-2 py-1 rounded bg-gray-800 hover:bg-gray-700 text-[10px] text-gray-200 font-semibold",children:"Edit"})]})]},t.id)})}),Y&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"purchase-anim-overlay relative",children:e.jsxs("div",{className:"purchase-anim-card relative w-56 h-[280px] rounded-2xl border-2 mx-auto p-4 flex flex-col items-center justify-between bg-gradient-to-br from-cyan-900 via-slate-900 to-black border-cyan-400 shadow-[0_0_36px_rgba(34,211,238,0.85)]",children:[e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx("div",{className:"text-3xl font-black text-white",children:Y.ovr}),e.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-[0.3em] text-cyan-200",children:Y.position})]}),e.jsx("div",{className:"mt-3 mb-3 flex items-center justify-center",children:e.jsx(re,{playerId:Y.id,size:"lg",className:"shadow-[0_0_22px_rgba(15,23,42,0.95)]"})}),e.jsxs("div",{className:"w-full text-center",children:[e.jsx("div",{className:"text-xs font-bold uppercase tracking-widest text-cyan-300",children:"Premium Purchase"}),e.jsx("div",{className:"text-base font-black text-white truncate px-1",children:Y.name})]}),e.jsx("div",{className:U?.currency==="Diamonds"?"purchase-anim-diamonds":"purchase-anim-coins"})]})})}),r?.role==="Owner"&&G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-md px-4",children:e.jsxs("div",{className:"w-full max-w-lg bg-gray-900 border border-emerald-500/40 rounded-2xl shadow-2xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold uppercase tracking-widest text-emerald-400",children:"Add Premium Player"}),e.jsx("div",{className:"text-[11px] text-gray-400",children:"Select a Premium or Premium Legend and set price and limit"})]}),e.jsx("button",{onClick:()=>{k(!1)},className:"text-xs px-3 py-1 rounded-full border border-gray-600 text-gray-300 hover:bg-gray-700 transition-colors",children:"Close"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-gray-300 text-xs font-semibold uppercase",children:"Search Player"}),e.jsx("input",{type:"text",value:z,onChange:t=>C(t.target.value),className:"w-full bg-gray-900/70 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-emerald-500",placeholder:"Type name or ID"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-gray-300 text-xs font-semibold uppercase",children:"Player"}),e.jsxs("select",{value:L,onChange:t=>{const s=t.target.value;W(s);const c=b.find(f=>f.id===s);if(c){const f=String(c.rarity||""),h=Number(c.ovr||0),j=ee(h,f),_=u.find(O=>O.type==="Player"&&O.contentId===c.id),D=_?_.price:j;A(D>0?String(D):"")}},className:"w-full bg-gray-900/70 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-emerald-500",children:[v.map(t=>{const s=t;return e.jsxs("option",{value:s.id,children:[s.name," (",s.rarity,") â€¢ OVR ",s.ovr]},s.id)}),v.length===0&&e.jsx("option",{value:"",children:"No players match this search"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-gray-300 text-xs font-semibold uppercase",children:"Price (Diamonds)"}),e.jsx("input",{type:"number",min:"0",value:R,onChange:t=>A(t.target.value),className:"w-full bg-gray-900/70 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-emerald-500",placeholder:S>0?String(S):"0"}),e.jsx("div",{className:"text-[10px] text-gray-400",children:M?`Current shop price: ${M.price.toLocaleString()} ðŸ’Ž`:S>0?`Suggested price from stats: ${S.toLocaleString()} ðŸ’Ž`:"Enter a Diamond price for this player"}),R&&e.jsxs("div",{className:"text-[10px] text-emerald-300",children:["New price: ",Number(R||"0").toLocaleString()," ðŸ’Ž"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-gray-300 text-xs font-semibold uppercase",children:"Limit (Max buyers)"}),e.jsx("input",{type:"number",min:"0",value:B,onChange:t=>q(t.target.value),className:"w-full bg-gray-900/70 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-emerald-500",placeholder:"Empty = unlimited"}),e.jsx("div",{className:"text-[10px] text-gray-400",children:"Leave empty for unlimited. Use 100 to limit to 100 buyers, etc."})]})]}),P&&e.jsx("div",{className:"mt-2 rounded-lg border border-gray-700 bg-gray-900/70 px-3 py-2 text-[11px] text-gray-200 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold",children:[P.name," (",y||"Premium",")"]}),e.jsxs("div",{className:"text-gray-400",children:["OVR ",E," â€¢ ID ",P.id]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 rounded-lg border border-gray-600 text-sm text-gray-200 hover:bg-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{if(!L){alert("Select a player");return}const t=parseInt(R||"0",10)||0;if(t<=0){alert("Price must be greater than 0");return}let s;if(B.trim()!==""){const c=parseInt(B||"0",10)||0;c>0&&(s=c)}try{const c=F.addManualPlayerItem(L,t,s);x(c.items),k(!1)}catch(c){alert(c?.message||"Failed to add player")}},className:"px-5 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-500 text-sm font-bold text-black tracking-wide",children:"Add to Premium Shop"})]})]})})]})};export{ve as PremiumShop};
